"use strict";(self.webpackChunkAngularArchitecture=self.webpackChunkAngularArchitecture||[]).push([[411],{17411:(U,u,l)=>{l.r(u),l.d(u,{ActionToAssignModule:()=>L});var p=l(36895),c=l(24006),h=l(28729),v=l(60065),A=l(60808),d=l(15439),e=l(94650),y=l(32278),S=l(14455),f=l(3238),D=l(77585),E=l(32444),m=l(99602),k=l(59549),T=l(84385),g=l(64537);function C(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"mat-option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const n=r.$implicit;e.\u0275\u0275property("value",n.Exec_BlockNo),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.Exec_BlockName," ")}}function j(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"ng-option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const n=r.$implicit;e.\u0275\u0275property("value",n.Emp_No),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.DisplayName," ")}}function b(i,r){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1,"Assign To required!"),e.\u0275\u0275elementEnd())}function M(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"ng-option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const n=r.$implicit;e.\u0275\u0275property("value",n.Portfolio_ID),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.Portfolio_Name," ")}}function O(i,r){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1,"Start Date required!"),e.\u0275\u0275elementEnd())}function P(i,r){1&i&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1,"End Date required!"),e.\u0275\u0275elementEnd())}function x(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"label"),e.\u0275\u0275text(2,"End Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.datesCheck())}),e.\u0275\u0275elementStart(4,"input",35),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275reference(8);return e.\u0275\u0275resetView(s.open())})("ngModelChange",function(s){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a._EndDate=s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",21),e.\u0275\u0275element(6,"mat-datepicker-toggle",22)(7,"mat-datepicker",null,36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,P,2,0,"span",14),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275reference(8),t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",n)("min",t._StartDate)("ngModel",t._EndDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",n),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",1==t.noEndDate)}}function I(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"label"),e.\u0275\u0275text(2,"End Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.enddateChecker())}),e.\u0275\u0275elementStart(4,"input",37),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275reference(8);return e.\u0275\u0275resetView(s.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",21),e.\u0275\u0275element(6,"mat-datepicker-toggle",22)(7,"mat-datepicker",null,36),e.\u0275\u0275elementEnd()()()}if(2&i){const n=e.\u0275\u0275reference(8),t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",n)("matDatepickerFilter",t.myFilter),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",n)}}const N=[{path:"",component:(()=>{class i{constructor(n,t,s,a,o,B,V){this.notifyService=n,this.ProjectTypeService=t,this.dateAdapter=s,this.datepipe=a,this.router=o,this.BsService=B,this._projectunplanned=V,this.selectedProjectType="",this._description="",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo="",this.disablePreviousDate=new Date,this._taskName="",this.dropdownSettings_Employee={},this.cat_name="",this.txtdisabled=!1,this.buttondisable=!0,this._remarks="",this._inputAttachments=[],this.selectedFile=null,this.typeoftask="",this.selectedEmployee="",this.noStartDate=!1,this.noEndDate=!1,this._ObjAssigntaskDTO=new v.x,this._ObjCompletedProj=new A.z,this.BsService.bs_AssignId.subscribe(_=>this.task_id=_),this.BsService.bs_TaskName.subscribe(_=>{this._taskName=_,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem("EmpNo"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList(),this.BsService.bs_catId.subscribe(n=>{this.cat_id=n}),this.BsService.bs_catName.subscribe(n=>{this.cat_name=n}),this.ProjectTypeService.GetPortfoliosForAssignTask().subscribe(n=>{this.PortfolioList=n,console.log(this.PortfolioList,"portfolios")})}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(n=>{this.ProjectTypelist=JSON.parse(n[0].ProjectTypeList)})}EmployeeOnSelect(n){this._SelectedEmpNo=n,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(n){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(n){this._inputAttachments=[...this._inputAttachments,{FileName:n.target.files[0].name,Size:n.target.files[0].size,Files:n.target.files[0]}]}datesCheck(){this.noEndDate=!1}OnAssignTask_Submit(){if(null==this._StartDate&&null!=this._EndDate)this.noStartDate=!0,this.noEndDate=!1;else if(null!=this._StartDate&&null==this._EndDate)this.noEndDate=!0,this.noStartDate=!1;else{var n,t;this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,null!=this._StartDate&&null!=this._EndDate?(n=d(this._StartDate).format(),t=d(this._EndDate).format(),this._ObjAssigntaskDTO.StartDate=n,this._ObjAssigntaskDTO.EndDate=t):(n=d(new Date).format(),t=d(new Date).format(),this._ObjAssigntaskDTO.StartDate=n,this._ObjAssigntaskDTO.EndDate=t),null!=this._StartDate&&null!=this._EndDate?(this.Difference_In_Time=this._StartDate.getTime()-this._EndDate.getTime(),this.Difference_In_Days=this.Difference_In_Time/864e5,this._ObjAssigntaskDTO.ProjectDays=-this.Difference_In_Days):this._ObjAssigntaskDTO.ProjectDays=0,this.BsService.bs_TypeofTask.subscribe(a=>{this.typeoftask=a}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,null!=this._inputAttachments&&this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files);const s=new FormData;s.append("AssignTo",this._ObjAssigntaskDTO.AssignTo),null!=this._inputAttachments?this._inputAttachments.length>0&&(s.append("Attachment","true"),s.append("file",this._inputAttachments[0].Files),console.log(this._inputAttachments,"files")):(s.append("Attachment","false"),s.append("file","")),s.append("TaskName",this._taskName),s.append("Desc",this._description),s.append("StartDate",n),s.append("EndDate",t),s.append("ProjectDays",this._ObjAssigntaskDTO.ProjectDays.toString()),s.append("TypeofTask",this.typeoftask),s.append("Remarks",this._remarks),s.append("ProjectType",this.selectedProjectType),null!=this.task_id&&s.append("AssignId",this.task_id.toString()),s.append("AssignedBy",this.CurrentUser_ID),this.port_id=null!=this.port_id&&null!=this.port_id&&""!=this.port_id?this.port_id:0,s.append("Portfolio_Id",this.port_id),this.ProjectTypeService._InsertAssignTaskServie(s).subscribe(a=>{this._projectunplanned.getCatid(),this.router.navigate(["UnplannedTask/"]),this.notifyService.showSuccess("Task sent to assign projects",a.Message),this.clearFeilds(),this.closeInfo(),this._inputAttachments=[]})}}closeInfo(){this.clearFeilds(),this.router.navigate(["UnplannedTask/"]),document.getElementById("mysideInfobar").classList.remove("kt-action-panel--on"),document.getElementsByClassName("side_view")[0].classList.remove("position-fixed"),document.getElementById("rightbar-overlay").style.display="none"}clearFeilds(){this._description="",this._StartDate=null,this._remarks=null,this._inputAttachments=null,document.getElementById("uploadFile").value="",this._EndDate=null,this._SelectedEmpNo="",this.selectedProjectType=null,this.selectedProjectCode="",this.SelectedEmplList=[],this.selectedProjectCodelist=[],this.noStartDate=!1,this.noEndDate=!1}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(n=>{this.EmployeeList=JSON.parse(n[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:"Emp_No",textField:"DisplayName",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}startdatechecker(){this.noStartDate=!1,this.noEndDate=!0,this._EndDate=null}enddateChecker(){this.noStartDate=!0,this.myFilter=n=>{const t=(n||new Date).getDay();return 0!==t&&1!==t&&2!==t&&3!==t&&4!==t&&5!==t&&6!==t&&7!==t}}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(y.g),e.\u0275\u0275directiveInject(S.B),e.\u0275\u0275directiveInject(f._A),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(D.o),e.\u0275\u0275directiveInject(E.j))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-action-to-assign"]],decls:78,vars:27,consts:[[1,"p-4"],["kt-hidden-height","40",1,"offcanvas-header","d-flex","align-items-center","justify-content-between","pb-5"],[1,"font-weight-bold","m-0"],["href","javascript:void(0)",1,"btn","btn-xs","btn-icon","btn-hover-primary",3,"click"],[1,"fa","fa-times"],[1,"form-group"],["placeholder","Select Project Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter Task Name","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],["aria-describedby","basic-addon1",1,"form-control",2,"height","100px",3,"ngModel","ngModelChange"],[1,"form-group","text-dark-50","w-75px","flex-grow-1","brdng-0"],[1,"text-danger"],["required","","placeholder","Select Employee",3,"ngModel","change","ngModelChange"],["assign","ngModel"],["style","color:red",4,"ngIf"],["placeholder","Select Portfolio",3,"ngModel","ngModelChange"],["Portfolio","ngModel"],[1,"d-flex","gap-1"],[1,"form-group","flex-1"],[1,"input-group",3,"click"],["matInput","","placeholder","Start Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],[1,"input-group-text","p-0"],["matSuffix","",3,"for"],["picker1",""],["class","form-group flex-1",4,"ngIf"],[1,"form-group",3,"hidden"],["name","Select Type","placeholder","Submission Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["for","exampleFormControlFile1"],["aria-label","With textarea",1,"form-control",2,"height","111px",3,"ngModel","ngModelChange"],[1,"custom-file","pl-1"],["type","file","id","uploadFile","value","hello","accept","application/pdf",1,"form-control-file",3,"change"],[1,"form-group","mb-1"],["type","submit",1,"btn","btn-primary",2,"width","150px",3,"disabled","click"],[2,"color","red"],["matInput","","placeholder","End Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],["picker2",""],["matInput","","placeholder","End Date",1,"form-control",3,"matDatepicker","matDatepickerFilter","click"]],template:function(n,t){if(1&n){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),e.\u0275\u0275text(3,"Assign Task/Project"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",3),e.\u0275\u0275listener("click",function(){return t.closeInfo()}),e.\u0275\u0275element(5,"i",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"label"),e.\u0275\u0275text(8,"Project Type : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-select",6),e.\u0275\u0275listener("ngModelChange",function(o){return t.selectedProjectType=o}),e.\u0275\u0275template(10,C,2,2,"mat-option",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",5)(12,"label"),e.\u0275\u0275text(13," Task/Project Name : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"input",8),e.\u0275\u0275listener("ngModelChange",function(o){return t._taskName=o}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",5)(16,"label"),e.\u0275\u0275text(17,"Description : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"textarea",9),e.\u0275\u0275listener("ngModelChange",function(o){return t._description=o}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",10)(20,"label"),e.\u0275\u0275text(21," Assign To "),e.\u0275\u0275elementStart(22,"span",11),e.\u0275\u0275text(23,"*"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24," : "),e.\u0275\u0275element(25,"strong"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"ng-select",12,13),e.\u0275\u0275listener("change",function(o){return t.EmployeeOnSelect(o)})("ngModelChange",function(o){return t.SelectedEmplList=o}),e.\u0275\u0275template(28,j,2,2,"ng-option",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,b,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",10)(31,"label"),e.\u0275\u0275text(32,"Link Portfolio : "),e.\u0275\u0275element(33,"strong"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"ng-select",15,16),e.\u0275\u0275listener("ngModelChange",function(o){return t.port_id=o}),e.\u0275\u0275template(36,M,2,2,"ng-option",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",17)(38,"div",18)(39,"label"),e.\u0275\u0275text(40,"Start Date : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",19),e.\u0275\u0275listener("click",function(){return t.startdatechecker()}),e.\u0275\u0275elementStart(42,"input",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const o=e.\u0275\u0275reference(46);return e.\u0275\u0275resetView(o.open())})("ngModelChange",function(o){return t._StartDate=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",21),e.\u0275\u0275element(44,"mat-datepicker-toggle",22)(45,"mat-datepicker",null,23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(47,O,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,x,10,5,"div",24),e.\u0275\u0275template(49,I,9,3,"div",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",25)(51,"mat-select",26),e.\u0275\u0275listener("ngModelChange",function(o){return t.SelectedSubmissionType=o}),e.\u0275\u0275elementStart(52,"mat-option",27),e.\u0275\u0275text(53,"Select Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"mat-option",27),e.\u0275\u0275text(55,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"mat-option",27),e.\u0275\u0275text(57,"Weekly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"mat-option",27),e.\u0275\u0275text(59,"Monthly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"mat-option",27),e.\u0275\u0275text(61,"Quarterly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"mat-option",27),e.\u0275\u0275text(63,"HalfYearly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"mat-option",27),e.\u0275\u0275text(65,"Annually"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(66,"div",5)(67,"label",28),e.\u0275\u0275text(68,"Remarks"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"textarea",29),e.\u0275\u0275listener("ngModelChange",function(o){return t._remarks=o}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"div",5)(71,"div",30)(72,"label",28),e.\u0275\u0275text(73,"Reference"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"input",31),e.\u0275\u0275listener("change",function(o){return t.onFileChangeATP(o)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(75,"div",32)(76,"button",33),e.\u0275\u0275listener("click",function(){return t.OnAssignTask_Submit()}),e.\u0275\u0275text(77,"Submit "),e.\u0275\u0275elementEnd()()()}if(2&n){const s=e.\u0275\u0275reference(27),a=e.\u0275\u0275reference(46);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngModel",t.selectedProjectType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.ProjectTypelist),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",t._taskName),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",t._description),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngModel",t.SelectedEmplList),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.EmployeeList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.touched&&!t.SelectedEmplList),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t.port_id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.PortfolioList),e.\u0275\u0275advance(6),e.\u0275\u0275property("matDatepicker",a)("min",t.disablePreviousDate)("ngModel",t._StartDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",1==t.noStartDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t._StartDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t._StartDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden","003"!=t.selectedProjectType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.SelectedSubmissionType),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",0),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",4),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",8),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",10),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",16),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t._remarks),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",!t.SelectedEmplList)}},dependencies:[p.sg,p.O5,c.Fj,c.JJ,c.Q7,c.On,m.Mq,m.hl,m.nW,k.R9,T.gD,f.ey,g.w9,g.xv]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.Bz.forChild(N),h.Bz]}),i})();var w=l(77937);let L=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({providers:[p.uU],imports:[p.ez,F,w.ZQ,c.u5,c.UX,m.FA,T.LD,g.A0]}),i})()}}]);