(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{viUt:function(e,t,c){"use strict";c.r(t),c.d(t,"ActionToAssignModule",(function(){return D}));var s=c("ofXK"),i=c("3Pt+"),n=c("tyNb"),a=c("UuEW"),o=c("XN+D"),l=c("fXoL"),r=c("ps0H"),d=c("tHiJ"),p=c("FKr1"),b=c("6i5P"),h=c("Cj0y"),m=c("d3UM"),g=c("ZOsW"),u=c("iadO"),y=c("kmnG");function _(e,t){if(1&e&&(l.cc(0,"mat-option",23),l.Xc(1),l.bc()),2&e){const e=t.$implicit;l.yc("value",e.Exec_BlockNo),l.Jb(1),l.Zc(" ",e.Exec_BlockName," ")}}function f(e,t){if(1&e&&(l.cc(0,"ng-option",23),l.Xc(1),l.bc()),2&e){const e=t.$implicit;l.yc("value",e.Emp_No),l.Jb(1),l.Zc(" ",e.DisplayName," ")}}const k=[{path:"",component:(()=>{class e{constructor(e,t,c,s,i){this.notifyService=e,this.ProjectTypeService=t,this.dateAdapter=c,this.BsService=s,this._projectunplanned=i,this.selectedProjectType="",this._description="",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo="",this.disablePreviousDate=new Date,this._taskName="",this.dropdownSettings_Employee={},this.txtdisabled=!1,this.buttondisable=!0,this._remarks="",this._inputAttachments=[],this.selectedFile=null,this.typeoftask="",this.selectedEmployee="",this._ObjAssigntaskDTO=new a.a,this._ObjCompletedProj=new o.a,this.BsService.bs_AssignId.subscribe(e=>this.task_id=e),this.BsService.bs_TaskName.subscribe(e=>{this._taskName=e,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem("EmpNo"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList()}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.ProjectTypelist=JSON.parse(e[0].ProjectTypeList)})}EmployeeOnSelect(e){this._SelectedEmpNo=e,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(e){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(e){this._inputAttachments=[...this._inputAttachments,{FileName:e.target.files[0].name,Size:e.target.files[0].size,Files:e.target.files[0]}]}OnAssignTask_Submit(){this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,this._ObjAssigntaskDTO.StartDate=this._StartDate,this._ObjAssigntaskDTO.EndDate=this._EndDate;var e=this._StartDate.getTime()-this._EndDate.getTime();this._ObjAssigntaskDTO.ProjectDays=-e/864e5,this.BsService.bs_TypeofTask.subscribe(e=>{this.typeoftask=e}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files);var t=new Date(this._StartDate).toUTCString(),c=new Date(this._EndDate).toUTCString();const s=new FormData;s.append("AssignTo",this._ObjAssigntaskDTO.AssignTo),this._inputAttachments.length>0?(s.append("Attachment","true"),s.append("file",this._inputAttachments[0].Files)):(s.append("Attachment","false"),s.append("file","")),s.append("TaskName",this._taskName),s.append("Desc",this._description),s.append("StartDate",t),s.append("EndDate",c),s.append("ProjectDays",this._ObjAssigntaskDTO.ProjectDays.toString()),s.append("TypeofTask",this.typeoftask),s.append("Remarks",this._remarks),s.append("ProjectType",this.selectedProjectType),null!=this.task_id&&s.append("AssignId",this.task_id.toString()),s.append("AssignedBy",this.CurrentUser_ID),this.ProjectTypeService._InsertAssignTaskServie(s).subscribe(e=>{this.notifyService.showSuccess("Task sent to assign projects",e.Message),this._projectunplanned.CallOnSubmitCategory(),this.clearFeilds(),this.closeInfo(),this._inputAttachments=[]})}closeInfo(){document.getElementById("mysideInfobar").style.width="0px",document.getElementById("rightbar-overlay").style.display="none",this.clearFeilds()}clearFeilds(){this._description="",this._StartDate=null,this._remarks=null,this._inputAttachments=null,document.getElementById("uploadFile").value="",this._EndDate=null,this._SelectedEmpNo="",this.selectedProjectType=null,this.selectedProjectCode="",this.SelectedEmplList=[],this.selectedProjectCodelist=[]}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.EmployeeList=JSON.parse(e[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:"Emp_No",textField:"DisplayName",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}}return e.\u0275fac=function(t){return new(t||e)(l.Wb(r.a),l.Wb(d.a),l.Wb(p.c),l.Wb(b.a),l.Wb(h.a))},e.\u0275cmp=l.Qb({type:e,selectors:[["app-action-to-assign"]],decls:85,vars:25,consts:[["id","mysideInfobar",1,"sideInfobar","animate-right","offcanvas"],[1,"p-4"],["kt-hidden-height","40",1,"offcanvas-header","d-flex","align-items-center","justify-content-between","pb-5"],[1,"font-weight-bold","m-0"],["href","javascript:void(0)",1,"btn","btn-xs","btn-icon","btn-hover-primary",3,"click"],[1,"fa","fa-times"],[1,"form-group"],[1,"text-danger"],["placeholder","Select Project Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter Task Name","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],["aria-describedby","basic-addon1",1,"form-control",2,"height","139px",3,"ngModel","ngModelChange"],[1,"form-group","text-dark-50","w-75px","flex-grow-1","brdng-0"],["placeholder","Select Employee",3,"ngModel","change","ngModelChange"],[1,"input-group"],["matInput","","placeholder","Start Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],[1,"input-group-text","p-0"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","End Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],["picker2",""],[1,"form-group",3,"hidden"],["name","Select Type","placeholder","Submission Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["for","exampleFormControlFile1"],["aria-label","With textarea",1,"form-control",2,"height","111px",3,"ngModel","ngModelChange"],[1,"custom-file","pl-1"],["type","file","id","uploadFile","value","hello","accept","application/pdf",1,"form-control-file",3,"change"],[1,"form-group","mb-1"],["type","submit",1,"btn","btn-primary",2,"width","150px",3,"disabled","click"]],template:function(e,t){if(1&e){const e=l.dc();l.cc(0,"div",0),l.cc(1,"div",1),l.cc(2,"div",2),l.cc(3,"h3",3),l.Xc(4,"Assign Task/Project"),l.bc(),l.cc(5,"a",4),l.nc("click",(function(){return t.closeInfo()})),l.Xb(6,"i",5),l.bc(),l.bc(),l.cc(7,"div",6),l.cc(8,"label"),l.Xc(9,"Project Type : "),l.cc(10,"span",7),l.Xc(11,"*"),l.bc(),l.bc(),l.cc(12,"mat-select",8),l.nc("ngModelChange",(function(e){return t.selectedProjectType=e})),l.Vc(13,_,2,2,"mat-option",9),l.bc(),l.bc(),l.cc(14,"div",6),l.cc(15,"label"),l.Xc(16," Task/Project Name : "),l.cc(17,"span",7),l.Xc(18,"*"),l.bc(),l.bc(),l.cc(19,"input",10),l.nc("ngModelChange",(function(e){return t._taskName=e})),l.bc(),l.bc(),l.cc(20,"div",6),l.cc(21,"label"),l.Xc(22,"Description : "),l.cc(23,"span",7),l.Xc(24,"*"),l.bc(),l.bc(),l.cc(25,"textarea",11),l.nc("ngModelChange",(function(e){return t._description=e})),l.bc(),l.bc(),l.cc(26,"div",12),l.cc(27,"label"),l.Xc(28," Assign To "),l.cc(29,"span",7),l.Xc(30,"*"),l.bc(),l.Xc(31," : "),l.Xb(32,"strong"),l.bc(),l.cc(33,"ng-select",13),l.nc("change",(function(e){return t.EmployeeOnSelect(e)}))("ngModelChange",(function(e){return t.SelectedEmplList=e})),l.Vc(34,f,2,2,"ng-option",9),l.bc(),l.bc(),l.cc(35,"div",6),l.cc(36,"label"),l.Xc(37,"Start Date : "),l.cc(38,"span",7),l.Xc(39,"*"),l.bc(),l.bc(),l.cc(40,"div",14),l.cc(41,"input",15),l.nc("click",(function(){return l.Mc(e),l.Jc(45).open()}))("ngModelChange",(function(e){return t._StartDate=e})),l.bc(),l.cc(42,"div",16),l.Xb(43,"mat-datepicker-toggle",17),l.Xb(44,"mat-datepicker",null,18),l.bc(),l.bc(),l.bc(),l.cc(46,"div",6),l.cc(47,"label"),l.Xc(48,"End Date :"),l.cc(49,"span",7),l.Xc(50,"*"),l.bc(),l.bc(),l.cc(51,"div",14),l.cc(52,"input",19),l.nc("click",(function(){return l.Mc(e),l.Jc(56).open()}))("ngModelChange",(function(e){return t._EndDate=e})),l.bc(),l.cc(53,"div",16),l.Xb(54,"mat-datepicker-toggle",17),l.Xb(55,"mat-datepicker",null,20),l.bc(),l.bc(),l.bc(),l.cc(57,"div",21),l.cc(58,"mat-select",22),l.nc("ngModelChange",(function(e){return t.SelectedSubmissionType=e})),l.cc(59,"mat-option",23),l.Xc(60,"Select Type"),l.bc(),l.cc(61,"mat-option",23),l.Xc(62,"Daily"),l.bc(),l.cc(63,"mat-option",23),l.Xc(64,"Weekly"),l.bc(),l.cc(65,"mat-option",23),l.Xc(66,"Monthly"),l.bc(),l.cc(67,"mat-option",23),l.Xc(68,"Quarterly"),l.bc(),l.cc(69,"mat-option",23),l.Xc(70,"HalfYearly"),l.bc(),l.cc(71,"mat-option",23),l.Xc(72,"Annually"),l.bc(),l.bc(),l.bc(),l.cc(73,"div",6),l.cc(74,"label",24),l.Xc(75,"Remarks"),l.bc(),l.cc(76,"textarea",25),l.nc("ngModelChange",(function(e){return t._remarks=e})),l.bc(),l.bc(),l.cc(77,"div",6),l.cc(78,"div",26),l.cc(79,"label",24),l.Xc(80,"Reference"),l.bc(),l.cc(81,"input",27),l.nc("change",(function(e){return t.onFileChangeATP(e)})),l.bc(),l.bc(),l.bc(),l.cc(82,"div",28),l.cc(83,"button",29),l.nc("click",(function(){return t.OnAssignTask_Submit()})),l.Xc(84,"Submit "),l.bc(),l.bc(),l.bc(),l.bc()}if(2&e){const e=l.Jc(45),c=l.Jc(56);l.Jb(12),l.yc("ngModel",t.selectedProjectType),l.Jb(1),l.yc("ngForOf",t.ProjectTypelist),l.Jb(6),l.yc("ngModel",t._taskName),l.Jb(6),l.yc("ngModel",t._description),l.Jb(8),l.yc("ngModel",t.SelectedEmplList),l.Jb(1),l.yc("ngForOf",t.EmployeeList),l.Jb(7),l.yc("matDatepicker",e)("min",t.disablePreviousDate)("ngModel",t._StartDate),l.Jb(2),l.yc("for",e),l.Jb(9),l.yc("matDatepicker",c)("min",t.disablePreviousDate)("ngModel",t._EndDate),l.Jb(2),l.yc("for",c),l.Jb(3),l.yc("hidden","003"!=t.selectedProjectType),l.Jb(1),l.yc("ngModel",t.SelectedSubmissionType),l.Jb(1),l.yc("value",0),l.Jb(2),l.yc("value",1),l.Jb(2),l.yc("value",2),l.Jb(2),l.yc("value",4),l.Jb(2),l.yc("value",8),l.Jb(2),l.yc("value",10),l.Jb(2),l.yc("value",16),l.Jb(5),l.yc("ngModel",t._remarks),l.Jb(7),l.yc("disabled",!(t.selectedProjectType&&t._description&&t._taskName&&t.SelectedEmplList&&t._StartDate&&t._EndDate))}},directives:[m.a,i.n,i.q,s.n,i.d,g.a,u.b,u.d,y.e,u.a,p.n,g.c],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(k)],n.i]}),e})();var j=c("Egam");let D=(()=>{class e{}return e.\u0275mod=l.Ub({type:e}),e.\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[s.c,T,j.b,i.j,i.t,u.c,m.b,g.b]]}),e})()}}]);