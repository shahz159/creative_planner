(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{viUt:function(e,t,s){"use strict";s.r(t),s.d(t,"ActionToAssignModule",(function(){return E}));var c=s("ofXK"),i=s("3Pt+"),n=s("tyNb"),a=s("UuEW"),o=s("XN+D"),r=s("fXoL"),l=s("ps0H"),d=s("tHiJ"),p=s("FKr1"),h=s("6i5P"),b=s("Cj0y"),m=s("d3UM"),u=s("ZOsW"),g=s("iadO"),y=s("kmnG");function _(e,t){if(1&e&&(r.cc(0,"mat-option",26),r.Yc(1),r.bc()),2&e){const e=t.$implicit;r.yc("value",e.Exec_BlockNo),r.Jb(1),r.ad(" ",e.Exec_BlockName," ")}}function f(e,t){if(1&e&&(r.cc(0,"ng-option",26),r.Yc(1),r.bc()),2&e){const e=t.$implicit;r.yc("value",e.Emp_No),r.Jb(1),r.ad(" ",e.DisplayName," ")}}function D(e,t){1&e&&(r.cc(0,"span",33),r.Yc(1,"Assign To required!"),r.bc())}function k(e,t){1&e&&(r.cc(0,"span",33),r.Yc(1,"Start Date required!"),r.bc())}function S(e,t){1&e&&(r.cc(0,"span",33),r.Yc(1,"End Date required!"),r.bc())}const T=[{path:"",component:(()=>{class e{constructor(e,t,s,c,i,n){this.notifyService=e,this.ProjectTypeService=t,this.dateAdapter=s,this.datepipe=c,this.BsService=i,this._projectunplanned=n,this.selectedProjectType="",this._description="",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo="",this.disablePreviousDate=new Date,this._taskName="",this.dropdownSettings_Employee={},this.cat_name="",this.txtdisabled=!1,this.buttondisable=!0,this._remarks="",this._inputAttachments=[],this.selectedFile=null,this.typeoftask="",this.selectedEmployee="",this.noStartDate=!1,this.noEndDate=!1,this._ObjAssigntaskDTO=new a.a,this._ObjCompletedProj=new o.a,this.BsService.bs_AssignId.subscribe(e=>this.task_id=e),this.BsService.bs_TaskName.subscribe(e=>{this._taskName=e,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem("EmpNo"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList(),this.BsService.bs_catId.subscribe(e=>{this.cat_id=e}),this.BsService.bs_catName.subscribe(e=>{this.cat_name=e})}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.ProjectTypelist=JSON.parse(e[0].ProjectTypeList)})}EmployeeOnSelect(e){this._SelectedEmpNo=e,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(e){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(e){this._inputAttachments=[...this._inputAttachments,{FileName:e.target.files[0].name,Size:e.target.files[0].size,Files:e.target.files[0]}]}datesCheck(){this.noStartDate=!1,this.noEndDate=!1}OnAssignTask_Submit(){if(null==this._StartDate&&null!=this._EndDate)this.noStartDate=!0,this.noEndDate=!1;else if(null!=this._StartDate&&null==this._EndDate)this.noEndDate=!0,this.noStartDate=!1;else{var e,t;this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,null!=this._StartDate&&null!=this._EndDate?(e=this.datepipe.transform(this._StartDate,"yyyy/MM/dd HH:MM:SS"),t=this.datepipe.transform(this._EndDate,"yyyy/MM/dd HH:MM:SS"),this._ObjAssigntaskDTO.StartDate=e,this._ObjAssigntaskDTO.EndDate=t):(e=this.datepipe.transform(new Date,"yyyy/MM/dd HH:MM:SS"),t=this.datepipe.transform(new Date,"yyyy/MM/dd HH:MM:SS"),this._ObjAssigntaskDTO.StartDate=e,this._ObjAssigntaskDTO.EndDate=t),null!=this._StartDate&&null!=this._EndDate?(this.Difference_In_Time=this._StartDate.getTime()-this._EndDate.getTime(),this.Difference_In_Days=this.Difference_In_Time/864e5,this._ObjAssigntaskDTO.ProjectDays=-this.Difference_In_Days):this._ObjAssigntaskDTO.ProjectDays=0,this.BsService.bs_TypeofTask.subscribe(e=>{this.typeoftask=e}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,null!=this._inputAttachments&&this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files);const s=new FormData;s.append("AssignTo",this._ObjAssigntaskDTO.AssignTo),null!=this._inputAttachments?this._inputAttachments.length>0&&(s.append("Attachment","true"),s.append("file",this._inputAttachments[0].Files),console.log(this._inputAttachments,"files")):(s.append("Attachment","false"),s.append("file","")),s.append("TaskName",this._taskName),s.append("Desc",this._description),s.append("StartDate",e),s.append("EndDate",t),s.append("ProjectDays",this._ObjAssigntaskDTO.ProjectDays.toString()),s.append("TypeofTask",this.typeoftask),s.append("Remarks",this._remarks),s.append("ProjectType",this.selectedProjectType),null!=this.task_id&&s.append("AssignId",this.task_id.toString()),s.append("AssignedBy",this.CurrentUser_ID),this.ProjectTypeService._InsertAssignTaskServie(s).subscribe(e=>{this._projectunplanned.OnCategoryClick(this.cat_id,this.cat_name),this.notifyService.showSuccess("Task sent to assign projects",e.Message),this.clearFeilds(),this.closeInfo(),this._inputAttachments=[]})}}closeInfo(){document.getElementById("mysideInfobar").classList.remove("kt-quick-panel--on"),document.getElementById("rightbar-overlay").style.display="none",this.clearFeilds()}clearFeilds(){this._description="",this._StartDate=null,this._remarks=null,this._inputAttachments=null,document.getElementById("uploadFile").value="",this._EndDate=null,this._SelectedEmpNo="",this.selectedProjectType=null,this.selectedProjectCode="",this.SelectedEmplList=[],this.selectedProjectCodelist=[]}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.EmployeeList=JSON.parse(e[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:"Emp_No",textField:"DisplayName",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(l.a),r.Wb(d.a),r.Wb(p.c),r.Wb(c.f),r.Wb(h.a),r.Wb(b.a))},e.\u0275cmp=r.Qb({type:e,selectors:[["app-action-to-assign"]],decls:79,vars:28,consts:[[1,"p-4"],["kt-hidden-height","40",1,"offcanvas-header","d-flex","align-items-center","justify-content-between","pb-5"],[1,"font-weight-bold","m-0"],["href","javascript:void(0)",1,"btn","btn-xs","btn-icon","btn-hover-primary",3,"click"],[1,"fa","fa-times"],[1,"form-group"],["placeholder","Select Project Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter Task Name","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],["aria-describedby","basic-addon1",1,"form-control",2,"height","100px",3,"ngModel","ngModelChange"],[1,"form-group","text-dark-50","w-75px","flex-grow-1","brdng-0"],[1,"text-danger"],["required","","placeholder","Select Employee",3,"ngModel","change","ngModelChange"],["assign","ngModel"],["style","color:red",4,"ngIf"],[1,"d-flex","gap-1",3,"click"],[1,"form-group","flex-1"],[1,"input-group"],["matInput","","placeholder","Start Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],[1,"input-group-text","p-0"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","End Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],["picker2",""],[1,"form-group",3,"hidden"],["name","Select Type","placeholder","Submission Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["for","exampleFormControlFile1"],["aria-label","With textarea",1,"form-control",2,"height","111px",3,"ngModel","ngModelChange"],[1,"custom-file","pl-1"],["type","file","id","uploadFile","value","hello","accept","application/pdf",1,"form-control-file",3,"change"],[1,"form-group","mb-1"],["type","submit",1,"btn","btn-primary",2,"width","150px",3,"disabled","click"],[2,"color","red"]],template:function(e,t){if(1&e){const e=r.dc();r.cc(0,"div",0),r.cc(1,"div",1),r.cc(2,"h3",2),r.Yc(3,"Assign Task/Project"),r.bc(),r.cc(4,"a",3),r.nc("click",(function(){return t.closeInfo()})),r.Xb(5,"i",4),r.bc(),r.bc(),r.cc(6,"div",5),r.cc(7,"label"),r.Yc(8,"Project Type : "),r.bc(),r.cc(9,"mat-select",6),r.nc("ngModelChange",(function(e){return t.selectedProjectType=e})),r.Wc(10,_,2,2,"mat-option",7),r.bc(),r.bc(),r.cc(11,"div",5),r.cc(12,"label"),r.Yc(13," Task/Project Name : "),r.bc(),r.cc(14,"input",8),r.nc("ngModelChange",(function(e){return t._taskName=e})),r.bc(),r.bc(),r.cc(15,"div",5),r.cc(16,"label"),r.Yc(17,"Description : "),r.bc(),r.cc(18,"textarea",9),r.nc("ngModelChange",(function(e){return t._description=e})),r.bc(),r.bc(),r.cc(19,"div",10),r.cc(20,"label"),r.Yc(21," Assign To "),r.cc(22,"span",11),r.Yc(23,"*"),r.bc(),r.Yc(24," : "),r.Xb(25,"strong"),r.bc(),r.cc(26,"ng-select",12,13),r.nc("change",(function(e){return t.EmployeeOnSelect(e)}))("ngModelChange",(function(e){return t.SelectedEmplList=e})),r.Wc(28,f,2,2,"ng-option",7),r.bc(),r.Wc(29,D,2,0,"span",14),r.bc(),r.cc(30,"div",15),r.nc("click",(function(){return t.datesCheck()})),r.cc(31,"div",16),r.cc(32,"label"),r.Yc(33,"Start Date : "),r.bc(),r.cc(34,"div",17),r.cc(35,"input",18),r.nc("click",(function(){return r.Nc(e),r.Kc(39).open()}))("ngModelChange",(function(e){return t._StartDate=e})),r.bc(),r.cc(36,"div",19),r.Xb(37,"mat-datepicker-toggle",20),r.Xb(38,"mat-datepicker",null,21),r.bc(),r.bc(),r.Wc(40,k,2,0,"span",14),r.bc(),r.cc(41,"div",16),r.cc(42,"label"),r.Yc(43,"End Date :"),r.bc(),r.cc(44,"div",17),r.cc(45,"input",22),r.nc("click",(function(){return r.Nc(e),r.Kc(49).open()}))("ngModelChange",(function(e){return t._EndDate=e})),r.bc(),r.cc(46,"div",19),r.Xb(47,"mat-datepicker-toggle",20),r.Xb(48,"mat-datepicker",null,23),r.bc(),r.bc(),r.Wc(50,S,2,0,"span",14),r.bc(),r.bc(),r.cc(51,"div",24),r.cc(52,"mat-select",25),r.nc("ngModelChange",(function(e){return t.SelectedSubmissionType=e})),r.cc(53,"mat-option",26),r.Yc(54,"Select Type"),r.bc(),r.cc(55,"mat-option",26),r.Yc(56,"Daily"),r.bc(),r.cc(57,"mat-option",26),r.Yc(58,"Weekly"),r.bc(),r.cc(59,"mat-option",26),r.Yc(60,"Monthly"),r.bc(),r.cc(61,"mat-option",26),r.Yc(62,"Quarterly"),r.bc(),r.cc(63,"mat-option",26),r.Yc(64,"HalfYearly"),r.bc(),r.cc(65,"mat-option",26),r.Yc(66,"Annually"),r.bc(),r.bc(),r.bc(),r.cc(67,"div",5),r.cc(68,"label",27),r.Yc(69,"Remarks"),r.bc(),r.cc(70,"textarea",28),r.nc("ngModelChange",(function(e){return t._remarks=e})),r.bc(),r.bc(),r.cc(71,"div",5),r.cc(72,"div",29),r.cc(73,"label",27),r.Yc(74,"Reference"),r.bc(),r.cc(75,"input",30),r.nc("change",(function(e){return t.onFileChangeATP(e)})),r.bc(),r.bc(),r.bc(),r.cc(76,"div",31),r.cc(77,"button",32),r.nc("click",(function(){return t.OnAssignTask_Submit()})),r.Yc(78,"Submit "),r.bc(),r.bc(),r.bc()}if(2&e){const e=r.Kc(27),s=r.Kc(39),c=r.Kc(49);r.Jb(9),r.yc("ngModel",t.selectedProjectType),r.Jb(1),r.yc("ngForOf",t.ProjectTypelist),r.Jb(4),r.yc("ngModel",t._taskName),r.Jb(4),r.yc("ngModel",t._description),r.Jb(8),r.yc("ngModel",t.SelectedEmplList),r.Jb(2),r.yc("ngForOf",t.EmployeeList),r.Jb(1),r.yc("ngIf",e.touched&&!t.SelectedEmplList),r.Jb(6),r.yc("matDatepicker",s)("min",t.disablePreviousDate)("ngModel",t._StartDate),r.Jb(2),r.yc("for",s),r.Jb(3),r.yc("ngIf",1==t.noStartDate),r.Jb(5),r.yc("matDatepicker",c)("min",t.disablePreviousDate)("ngModel",t._EndDate),r.Jb(2),r.yc("for",c),r.Jb(3),r.yc("ngIf",1==t.noEndDate),r.Jb(1),r.yc("hidden","003"!=t.selectedProjectType),r.Jb(1),r.yc("ngModel",t.SelectedSubmissionType),r.Jb(1),r.yc("value",0),r.Jb(2),r.yc("value",1),r.Jb(2),r.yc("value",2),r.Jb(2),r.yc("value",4),r.Jb(2),r.yc("value",8),r.Jb(2),r.yc("value",10),r.Jb(2),r.yc("value",16),r.Jb(5),r.yc("ngModel",t._remarks),r.Jb(7),r.yc("disabled",!t.SelectedEmplList||1==t.noStartDate||1==t.noEndDate)}},directives:[m.a,i.o,i.r,c.n,i.d,u.a,i.w,c.o,g.c,g.e,y.e,g.b,p.n,u.c],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(T)],n.i]}),e})();var v=s("Egam");let E=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},providers:[c.f],imports:[[c.c,j,v.b,i.k,i.v,g.d,m.b,u.b]]}),e})()}}]);