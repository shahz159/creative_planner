"use strict";(self.webpackChunkAngularArchitecture=self.webpackChunkAngularArchitecture||[]).push([[411],{17411:(x,g,l)=>{l.r(g),l.d(g,{ActionToAssignModule:()=>N});var d=l(69808),p=l(93075),u=l(42131),y=l(60065),A=l(60808),e=l(5e3),T=l(32278),S=l(58245),_=l(90508),v=l(77585),D=l(94380),c=l(86856),E=l(67322),f=l(74107),m=l(64537);function j(s,r){if(1&s&&(e.\u0275\u0275elementStart(0,"mat-option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const n=r.$implicit;e.\u0275\u0275property("value",n.Exec_BlockNo),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.Exec_BlockName," ")}}function b(s,r){if(1&s&&(e.\u0275\u0275elementStart(0,"ng-option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const n=r.$implicit;e.\u0275\u0275property("value",n.Emp_No),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.DisplayName," ")}}function k(s,r){1&s&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1,"Assign To required!"),e.\u0275\u0275elementEnd())}function C(s,r){1&s&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1,"Start Date required!"),e.\u0275\u0275elementEnd())}function M(s,r){1&s&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1,"End Date required!"),e.\u0275\u0275elementEnd())}const O=[{path:"",component:(()=>{class s{constructor(n,t,o,a,i,F){this.notifyService=n,this.ProjectTypeService=t,this.dateAdapter=o,this.datepipe=a,this.BsService=i,this._projectunplanned=F,this.selectedProjectType="",this._description="",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo="",this.disablePreviousDate=new Date,this._taskName="",this.dropdownSettings_Employee={},this.cat_name="",this.txtdisabled=!1,this.buttondisable=!0,this._remarks="",this._inputAttachments=[],this.selectedFile=null,this.typeoftask="",this.selectedEmployee="",this.noStartDate=!1,this.noEndDate=!1,this._ObjAssigntaskDTO=new y.x,this._ObjCompletedProj=new A.z,this.BsService.bs_AssignId.subscribe(h=>this.task_id=h),this.BsService.bs_TaskName.subscribe(h=>{this._taskName=h,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem("EmpNo"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList(),this.BsService.bs_catId.subscribe(n=>{this.cat_id=n}),this.BsService.bs_catName.subscribe(n=>{this.cat_name=n})}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(n=>{this.ProjectTypelist=JSON.parse(n[0].ProjectTypeList)})}EmployeeOnSelect(n){this._SelectedEmpNo=n,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(n){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(n){this._inputAttachments=[...this._inputAttachments,{FileName:n.target.files[0].name,Size:n.target.files[0].size,Files:n.target.files[0]}]}datesCheck(){this.noStartDate=!1,this.noEndDate=!1}OnAssignTask_Submit(){if(null==this._StartDate&&null!=this._EndDate)this.noStartDate=!0,this.noEndDate=!1;else if(null!=this._StartDate&&null==this._EndDate)this.noEndDate=!0,this.noStartDate=!1;else{var n,t;this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,null!=this._StartDate&&null!=this._EndDate?(n=this.datepipe.transform(this._StartDate,"yyyy/MM/dd HH:MM:SS"),t=this.datepipe.transform(this._EndDate,"yyyy/MM/dd HH:MM:SS"),this._ObjAssigntaskDTO.StartDate=n,this._ObjAssigntaskDTO.EndDate=t):(n=this.datepipe.transform(new Date,"yyyy/MM/dd HH:MM:SS"),t=this.datepipe.transform(new Date,"yyyy/MM/dd HH:MM:SS"),this._ObjAssigntaskDTO.StartDate=n,this._ObjAssigntaskDTO.EndDate=t),null!=this._StartDate&&null!=this._EndDate?(this.Difference_In_Time=this._StartDate.getTime()-this._EndDate.getTime(),this.Difference_In_Days=this.Difference_In_Time/864e5,this._ObjAssigntaskDTO.ProjectDays=-this.Difference_In_Days):this._ObjAssigntaskDTO.ProjectDays=0,this.BsService.bs_TypeofTask.subscribe(a=>{this.typeoftask=a}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,null!=this._inputAttachments&&this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files);const o=new FormData;o.append("AssignTo",this._ObjAssigntaskDTO.AssignTo),null!=this._inputAttachments?this._inputAttachments.length>0&&(o.append("Attachment","true"),o.append("file",this._inputAttachments[0].Files),console.log(this._inputAttachments,"files")):(o.append("Attachment","false"),o.append("file","")),o.append("TaskName",this._taskName),o.append("Desc",this._description),o.append("StartDate",n),o.append("EndDate",t),o.append("ProjectDays",this._ObjAssigntaskDTO.ProjectDays.toString()),o.append("TypeofTask",this.typeoftask),o.append("Remarks",this._remarks),o.append("ProjectType",this.selectedProjectType),null!=this.task_id&&o.append("AssignId",this.task_id.toString()),o.append("AssignedBy",this.CurrentUser_ID),this.ProjectTypeService._InsertAssignTaskServie(o).subscribe(a=>{this._projectunplanned.OnCategoryClick(this.cat_id,this.cat_name),this.notifyService.showSuccess("Task sent to assign projects",a.Message),this.clearFeilds(),this.closeInfo(),this._inputAttachments=[]})}}closeInfo(){document.getElementById("mysideInfobar").classList.remove("kt-quick-panel--on"),document.getElementById("rightbar-overlay").style.display="none",this.clearFeilds()}clearFeilds(){this._description="",this._StartDate=null,this._remarks=null,this._inputAttachments=null,document.getElementById("uploadFile").value="",this._EndDate=null,this._SelectedEmpNo="",this.selectedProjectType=null,this.selectedProjectCode="",this.SelectedEmplList=[],this.selectedProjectCodelist=[]}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode="AssignedTask",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(n=>{this.EmployeeList=JSON.parse(n[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:"Emp_No",textField:"DisplayName",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}}return s.\u0275fac=function(n){return new(n||s)(e.\u0275\u0275directiveInject(T.g),e.\u0275\u0275directiveInject(S.B),e.\u0275\u0275directiveInject(_._A),e.\u0275\u0275directiveInject(d.uU),e.\u0275\u0275directiveInject(v.o),e.\u0275\u0275directiveInject(D.j))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-action-to-assign"]],decls:79,vars:28,consts:[[1,"p-4"],["kt-hidden-height","40",1,"offcanvas-header","d-flex","align-items-center","justify-content-between","pb-5"],[1,"font-weight-bold","m-0"],["href","javascript:void(0)",1,"btn","btn-xs","btn-icon","btn-hover-primary",3,"click"],[1,"fa","fa-times"],[1,"form-group"],["placeholder","Select Project Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter Task Name","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],["aria-describedby","basic-addon1",1,"form-control",2,"height","100px",3,"ngModel","ngModelChange"],[1,"form-group","text-dark-50","w-75px","flex-grow-1","brdng-0"],[1,"text-danger"],["required","","placeholder","Select Employee",3,"ngModel","change","ngModelChange"],["assign","ngModel"],["style","color:red",4,"ngIf"],[1,"d-flex","gap-1",3,"click"],[1,"form-group","flex-1"],[1,"input-group"],["matInput","","placeholder","Start Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],[1,"input-group-text","p-0"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","End Date",1,"form-control",3,"matDatepicker","min","ngModel","click","ngModelChange"],["picker2",""],[1,"form-group",3,"hidden"],["name","Select Type","placeholder","Submission Type",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["for","exampleFormControlFile1"],["aria-label","With textarea",1,"form-control",2,"height","111px",3,"ngModel","ngModelChange"],[1,"custom-file","pl-1"],["type","file","id","uploadFile","value","hello","accept","application/pdf",1,"form-control-file",3,"change"],[1,"form-group","mb-1"],["type","submit",1,"btn","btn-primary",2,"width","150px",3,"disabled","click"],[2,"color","red"]],template:function(n,t){if(1&n){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),e.\u0275\u0275text(3,"Assign Task/Project"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",3),e.\u0275\u0275listener("click",function(){return t.closeInfo()}),e.\u0275\u0275element(5,"i",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"label"),e.\u0275\u0275text(8,"Project Type : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-select",6),e.\u0275\u0275listener("ngModelChange",function(i){return t.selectedProjectType=i}),e.\u0275\u0275template(10,j,2,2,"mat-option",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",5)(12,"label"),e.\u0275\u0275text(13," Task/Project Name : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"input",8),e.\u0275\u0275listener("ngModelChange",function(i){return t._taskName=i}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",5)(16,"label"),e.\u0275\u0275text(17,"Description : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"textarea",9),e.\u0275\u0275listener("ngModelChange",function(i){return t._description=i}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",10)(20,"label"),e.\u0275\u0275text(21," Assign To "),e.\u0275\u0275elementStart(22,"span",11),e.\u0275\u0275text(23,"*"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(24," : "),e.\u0275\u0275element(25,"strong"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"ng-select",12,13),e.\u0275\u0275listener("change",function(i){return t.EmployeeOnSelect(i)})("ngModelChange",function(i){return t.SelectedEmplList=i}),e.\u0275\u0275template(28,b,2,2,"ng-option",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,k,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",15),e.\u0275\u0275listener("click",function(){return t.datesCheck()}),e.\u0275\u0275elementStart(31,"div",16)(32,"label"),e.\u0275\u0275text(33,"Start Date : "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",17)(35,"input",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const i=e.\u0275\u0275reference(39);return e.\u0275\u0275resetView(i.open())})("ngModelChange",function(i){return t._StartDate=i}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",19),e.\u0275\u0275element(37,"mat-datepicker-toggle",20)(38,"mat-datepicker",null,21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(40,C,2,0,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",16)(42,"label"),e.\u0275\u0275text(43,"End Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",17)(45,"input",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const i=e.\u0275\u0275reference(49);return e.\u0275\u0275resetView(i.open())})("ngModelChange",function(i){return t._EndDate=i}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",19),e.\u0275\u0275element(47,"mat-datepicker-toggle",20)(48,"mat-datepicker",null,23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(50,M,2,0,"span",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",24)(52,"mat-select",25),e.\u0275\u0275listener("ngModelChange",function(i){return t.SelectedSubmissionType=i}),e.\u0275\u0275elementStart(53,"mat-option",26),e.\u0275\u0275text(54,"Select Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"mat-option",26),e.\u0275\u0275text(56,"Daily"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"mat-option",26),e.\u0275\u0275text(58,"Weekly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"mat-option",26),e.\u0275\u0275text(60,"Monthly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"mat-option",26),e.\u0275\u0275text(62,"Quarterly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"mat-option",26),e.\u0275\u0275text(64,"HalfYearly"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"mat-option",26),e.\u0275\u0275text(66,"Annually"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(67,"div",5)(68,"label",27),e.\u0275\u0275text(69,"Remarks"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"textarea",28),e.\u0275\u0275listener("ngModelChange",function(i){return t._remarks=i}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"div",5)(72,"div",29)(73,"label",27),e.\u0275\u0275text(74,"Reference"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"input",30),e.\u0275\u0275listener("change",function(i){return t.onFileChangeATP(i)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(76,"div",31)(77,"button",32),e.\u0275\u0275listener("click",function(){return t.OnAssignTask_Submit()}),e.\u0275\u0275text(78,"Submit "),e.\u0275\u0275elementEnd()()()}if(2&n){const o=e.\u0275\u0275reference(27),a=e.\u0275\u0275reference(39),i=e.\u0275\u0275reference(49);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngModel",t.selectedProjectType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.ProjectTypelist),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",t._taskName),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",t._description),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngModel",t.SelectedEmplList),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.EmployeeList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.touched&&!t.SelectedEmplList),e.\u0275\u0275advance(6),e.\u0275\u0275property("matDatepicker",a)("min",t.disablePreviousDate)("ngModel",t._StartDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",a),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",1==t.noStartDate),e.\u0275\u0275advance(5),e.\u0275\u0275property("matDatepicker",i)("min",t.disablePreviousDate)("ngModel",t._EndDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",1==t.noEndDate),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden","003"!=t.selectedProjectType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",t.SelectedSubmissionType),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",0),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",2),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",4),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",8),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",10),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",16),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",t._remarks),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",!t.SelectedEmplList||1==t.noStartDate||1==t.noEndDate)}},dependencies:[d.sg,d.O5,p.Fj,p.JJ,p.Q7,p.On,c.Mq,c.hl,c.nW,E.R9,f.gD,_.ey,m.w9,m.xv]}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.Bz.forChild(O),u.Bz]}),s})();var I=l(77937);let N=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({providers:[d.uU],imports:[d.ez,P,I.ZQ,p.u5,p.UX,c.FA,f.LD,m.A0]}),s})()}}]);