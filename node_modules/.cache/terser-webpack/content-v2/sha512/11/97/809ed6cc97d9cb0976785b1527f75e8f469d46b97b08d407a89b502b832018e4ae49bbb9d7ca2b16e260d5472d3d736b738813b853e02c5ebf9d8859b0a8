{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{viUt:function(e,t,c){\"use strict\";c.r(t),c.d(t,\"ActionToAssignModule\",(function(){return S}));var i=c(\"ofXK\"),s=c(\"3Pt+\"),n=c(\"tyNb\"),a=c(\"UuEW\"),o=c(\"XN+D\"),l=c(\"fXoL\"),r=c(\"ps0H\"),d=c(\"tHiJ\"),p=c(\"FKr1\"),h=c(\"6i5P\"),b=c(\"Cj0y\"),m=c(\"d3UM\"),g=c(\"ZOsW\"),u=c(\"iadO\"),y=c(\"kmnG\");function _(e,t){if(1&e&&(l.cc(0,\"mat-option\",25),l.Yc(1),l.bc()),2&e){const e=t.$implicit;l.yc(\"value\",e.Exec_BlockNo),l.Jb(1),l.ad(\" \",e.Exec_BlockName,\" \")}}function f(e,t){if(1&e&&(l.cc(0,\"ng-option\",25),l.Yc(1),l.bc()),2&e){const e=t.$implicit;l.yc(\"value\",e.Emp_No),l.Jb(1),l.ad(\" \",e.DisplayName,\" \")}}function k(e,t){1&e&&(l.cc(0,\"span\",32),l.Yc(1,\"Assign To required!\"),l.bc())}const D=[{path:\"\",component:(()=>{class e{constructor(e,t,c,i,s){this.notifyService=e,this.ProjectTypeService=t,this.dateAdapter=c,this.BsService=i,this._projectunplanned=s,this.selectedProjectType=\"\",this._description=\"\",this._StartDate=null,this._EndDate=null,this._SelectedEmpNo=\"\",this.disablePreviousDate=new Date,this._taskName=\"\",this.dropdownSettings_Employee={},this.txtdisabled=!1,this.buttondisable=!0,this._remarks=\"\",this._inputAttachments=[],this.selectedFile=null,this.typeoftask=\"\",this.selectedEmployee=\"\",this._ObjAssigntaskDTO=new a.a,this._ObjCompletedProj=new o.a,this.BsService.bs_AssignId.subscribe(e=>this.task_id=e),this.BsService.bs_TaskName.subscribe(e=>{this._taskName=e,null==this._taskName?(this.txtdisabled=!1,this._taskName=null):this.txtdisabled=!0}),this._inputAttachments=[]}ngOnInit(){this.CurrentUser_ID=localStorage.getItem(\"EmpNo\"),this.getProjectTypeList(),this.GetAssignFormEmployeeDropdownList()}getProjectTypeList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode=\"AssignedTask\",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.ProjectTypelist=JSON.parse(e[0].ProjectTypeList)})}EmployeeOnSelect(e){this._SelectedEmpNo=e,this.selectedEmployee=this._SelectedEmpNo}EmployeeOnDeselect(e){this._SelectedEmpNo=null,this.selectedEmployee=this._SelectedEmpNo}onFileChangeATP(e){this._inputAttachments=[...this._inputAttachments,{FileName:e.target.files[0].name,Size:e.target.files[0].size,Files:e.target.files[0]}]}OnAssignTask_Submit(){var e,t;this._ObjAssigntaskDTO.TaskName=this._taskName,this._ObjAssigntaskDTO.TaskDescription=this._description,this._ObjAssigntaskDTO.StartDate=this._StartDate,this._ObjAssigntaskDTO.EndDate=this._EndDate,null!=this._StartDate||null!=this._EndDate?(this.Difference_In_Time=this._StartDate.getTime()-this._EndDate.getTime(),this.Difference_In_Days=this.Difference_In_Time/864e5,this._ObjAssigntaskDTO.ProjectDays=-this.Difference_In_Days):this._ObjAssigntaskDTO.ProjectDays=0,this.BsService.bs_TypeofTask.subscribe(e=>{this.typeoftask=e}),this._ObjAssigntaskDTO.TypeOfTask=this.typeoftask,this._ObjAssigntaskDTO.AssignTo=this.selectedEmployee,this._ObjAssigntaskDTO.Assigned_By=this.CurrentUser_ID,this._ObjAssigntaskDTO.AssignId=this.task_id,this._ObjAssigntaskDTO.ProjectType=this.selectedProjectType,this._ObjAssigntaskDTO.Remarks=this._remarks,this._inputAttachments.length>0&&(this._ObjAssigntaskDTO.Reference=this._inputAttachments[0].Files),null!=this._StartDate||null!=this._EndDate?(e=new Date(this._StartDate).toUTCString(),t=new Date(this._EndDate).toUTCString()):(e=(new Date).toUTCString(),t=(new Date).toUTCString());const c=new FormData;c.append(\"AssignTo\",this._ObjAssigntaskDTO.AssignTo),this._inputAttachments.length>0?(c.append(\"Attachment\",\"true\"),c.append(\"file\",this._inputAttachments[0].Files)):(c.append(\"Attachment\",\"false\"),c.append(\"file\",\"\")),c.append(\"TaskName\",this._taskName),c.append(\"Desc\",this._description),c.append(\"StartDate\",e),c.append(\"EndDate\",t),c.append(\"ProjectDays\",this._ObjAssigntaskDTO.ProjectDays.toString()),c.append(\"TypeofTask\",this.typeoftask),c.append(\"Remarks\",this._remarks),c.append(\"ProjectType\",this.selectedProjectType),null!=this.task_id&&c.append(\"AssignId\",this.task_id.toString()),c.append(\"AssignedBy\",this.CurrentUser_ID),this.ProjectTypeService._InsertAssignTaskServie(c).subscribe(e=>{this.notifyService.showSuccess(\"Task sent to assign projects\",e.Message),this._projectunplanned.CallOnSubmitCategory(),this.clearFeilds(),this.closeInfo(),this._inputAttachments=[]})}closeInfo(){document.getElementById(\"mysideInfobar\").style.width=\"0px\",document.getElementById(\"rightbar-overlay\").style.display=\"none\",this.clearFeilds()}clearFeilds(){this._description=\"\",this._StartDate=null,this._remarks=null,this._inputAttachments=null,document.getElementById(\"uploadFile\").value=\"\",this._EndDate=null,this._SelectedEmpNo=\"\",this.selectedProjectType=null,this.selectedProjectCode=\"\",this.SelectedEmplList=[],this.selectedProjectCodelist=[]}GetAssignFormEmployeeDropdownList(){this._ObjCompletedProj.PageNumber=1,this._ObjCompletedProj.Emp_No=this.CurrentUser_ID,this._ObjCompletedProj.Mode=\"AssignedTask\",this.ProjectTypeService._GetCompletedProjects(this._ObjCompletedProj).subscribe(e=>{this.EmployeeList=JSON.parse(e[0].EmployeeList),this.dropdownSettings_Employee={singleSelection:!0,idField:\"Emp_No\",textField:\"DisplayName\",itemsShowLimit:3,allowSearchFilter:!0,closeDropDownOnSelection:!0}})}}return e.\\u0275fac=function(t){return new(t||e)(l.Wb(r.a),l.Wb(d.a),l.Wb(p.c),l.Wb(h.a),l.Wb(b.a))},e.\\u0275cmp=l.Qb({type:e,selectors:[[\"app-action-to-assign\"]],decls:77,vars:26,consts:[[\"id\",\"mysideInfobar\",1,\"sideInfobar\",\"animate-right\",\"offcanvas\"],[1,\"p-4\"],[\"kt-hidden-height\",\"40\",1,\"offcanvas-header\",\"d-flex\",\"align-items-center\",\"justify-content-between\",\"pb-5\"],[1,\"font-weight-bold\",\"m-0\"],[\"href\",\"javascript:void(0)\",1,\"btn\",\"btn-xs\",\"btn-icon\",\"btn-hover-primary\",3,\"click\"],[1,\"fa\",\"fa-times\"],[1,\"form-group\"],[\"placeholder\",\"Select Project Type\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"type\",\"text\",\"placeholder\",\"Enter Task Name\",\"aria-describedby\",\"basic-addon1\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"aria-describedby\",\"basic-addon1\",1,\"form-control\",2,\"height\",\"139px\",3,\"ngModel\",\"ngModelChange\"],[1,\"form-group\",\"text-dark-50\",\"w-75px\",\"flex-grow-1\",\"brdng-0\"],[1,\"text-danger\"],[\"required\",\"\",\"placeholder\",\"Select Employee\",3,\"ngModel\",\"change\",\"ngModelChange\"],[\"assign\",\"ngModel\"],[\"style\",\"color:red\",4,\"ngIf\"],[1,\"input-group\"],[\"matInput\",\"\",\"placeholder\",\"Start Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[1,\"input-group-text\",\"p-0\"],[\"matSuffix\",\"\",3,\"for\"],[\"picker1\",\"\"],[\"matInput\",\"\",\"placeholder\",\"End Date\",1,\"form-control\",3,\"matDatepicker\",\"min\",\"ngModel\",\"click\",\"ngModelChange\"],[\"picker2\",\"\"],[1,\"form-group\",3,\"hidden\"],[\"name\",\"Select Type\",\"placeholder\",\"Submission Type\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[3,\"value\"],[\"for\",\"exampleFormControlFile1\"],[\"aria-label\",\"With textarea\",1,\"form-control\",2,\"height\",\"111px\",3,\"ngModel\",\"ngModelChange\"],[1,\"custom-file\",\"pl-1\"],[\"type\",\"file\",\"id\",\"uploadFile\",\"value\",\"hello\",\"accept\",\"application/pdf\",1,\"form-control-file\",3,\"change\"],[1,\"form-group\",\"mb-1\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",2,\"width\",\"150px\",3,\"disabled\",\"click\"],[2,\"color\",\"red\"]],template:function(e,t){if(1&e){const e=l.dc();l.cc(0,\"div\",0),l.cc(1,\"div\",1),l.cc(2,\"div\",2),l.cc(3,\"h3\",3),l.Yc(4,\"Assign Task/Project\"),l.bc(),l.cc(5,\"a\",4),l.nc(\"click\",(function(){return t.closeInfo()})),l.Xb(6,\"i\",5),l.bc(),l.bc(),l.cc(7,\"div\",6),l.cc(8,\"label\"),l.Yc(9,\"Project Type : \"),l.bc(),l.cc(10,\"mat-select\",7),l.nc(\"ngModelChange\",(function(e){return t.selectedProjectType=e})),l.Wc(11,_,2,2,\"mat-option\",8),l.bc(),l.bc(),l.cc(12,\"div\",6),l.cc(13,\"label\"),l.Yc(14,\" Task/Project Name : \"),l.bc(),l.cc(15,\"input\",9),l.nc(\"ngModelChange\",(function(e){return t._taskName=e})),l.bc(),l.bc(),l.cc(16,\"div\",6),l.cc(17,\"label\"),l.Yc(18,\"Description : \"),l.bc(),l.cc(19,\"textarea\",10),l.nc(\"ngModelChange\",(function(e){return t._description=e})),l.bc(),l.bc(),l.cc(20,\"div\",11),l.cc(21,\"label\"),l.Yc(22,\" Assign To \"),l.cc(23,\"span\",12),l.Yc(24,\"*\"),l.bc(),l.Yc(25,\" : \"),l.Xb(26,\"strong\"),l.bc(),l.cc(27,\"ng-select\",13,14),l.nc(\"change\",(function(e){return t.EmployeeOnSelect(e)}))(\"ngModelChange\",(function(e){return t.SelectedEmplList=e})),l.Wc(29,f,2,2,\"ng-option\",8),l.bc(),l.Wc(30,k,2,0,\"span\",15),l.bc(),l.cc(31,\"div\",6),l.cc(32,\"label\"),l.Yc(33,\"Start Date : \"),l.bc(),l.cc(34,\"div\",16),l.cc(35,\"input\",17),l.nc(\"click\",(function(){return l.Nc(e),l.Kc(39).open()}))(\"ngModelChange\",(function(e){return t._StartDate=e})),l.bc(),l.cc(36,\"div\",18),l.Xb(37,\"mat-datepicker-toggle\",19),l.Xb(38,\"mat-datepicker\",null,20),l.bc(),l.bc(),l.bc(),l.cc(40,\"div\",6),l.cc(41,\"label\"),l.Yc(42,\"End Date :\"),l.bc(),l.cc(43,\"div\",16),l.cc(44,\"input\",21),l.nc(\"click\",(function(){return l.Nc(e),l.Kc(48).open()}))(\"ngModelChange\",(function(e){return t._EndDate=e})),l.bc(),l.cc(45,\"div\",18),l.Xb(46,\"mat-datepicker-toggle\",19),l.Xb(47,\"mat-datepicker\",null,22),l.bc(),l.bc(),l.bc(),l.cc(49,\"div\",23),l.cc(50,\"mat-select\",24),l.nc(\"ngModelChange\",(function(e){return t.SelectedSubmissionType=e})),l.cc(51,\"mat-option\",25),l.Yc(52,\"Select Type\"),l.bc(),l.cc(53,\"mat-option\",25),l.Yc(54,\"Daily\"),l.bc(),l.cc(55,\"mat-option\",25),l.Yc(56,\"Weekly\"),l.bc(),l.cc(57,\"mat-option\",25),l.Yc(58,\"Monthly\"),l.bc(),l.cc(59,\"mat-option\",25),l.Yc(60,\"Quarterly\"),l.bc(),l.cc(61,\"mat-option\",25),l.Yc(62,\"HalfYearly\"),l.bc(),l.cc(63,\"mat-option\",25),l.Yc(64,\"Annually\"),l.bc(),l.bc(),l.bc(),l.cc(65,\"div\",6),l.cc(66,\"label\",26),l.Yc(67,\"Remarks\"),l.bc(),l.cc(68,\"textarea\",27),l.nc(\"ngModelChange\",(function(e){return t._remarks=e})),l.bc(),l.bc(),l.cc(69,\"div\",6),l.cc(70,\"div\",28),l.cc(71,\"label\",26),l.Yc(72,\"Reference\"),l.bc(),l.cc(73,\"input\",29),l.nc(\"change\",(function(e){return t.onFileChangeATP(e)})),l.bc(),l.bc(),l.bc(),l.cc(74,\"div\",30),l.cc(75,\"button\",31),l.nc(\"click\",(function(){return t.OnAssignTask_Submit()})),l.Yc(76,\"Submit \"),l.bc(),l.bc(),l.bc(),l.bc()}if(2&e){const e=l.Kc(28),c=l.Kc(39),i=l.Kc(48);l.Jb(10),l.yc(\"ngModel\",t.selectedProjectType),l.Jb(1),l.yc(\"ngForOf\",t.ProjectTypelist),l.Jb(4),l.yc(\"ngModel\",t._taskName),l.Jb(4),l.yc(\"ngModel\",t._description),l.Jb(8),l.yc(\"ngModel\",t.SelectedEmplList),l.Jb(2),l.yc(\"ngForOf\",t.EmployeeList),l.Jb(1),l.yc(\"ngIf\",e.touched&&!t.SelectedEmplList),l.Jb(5),l.yc(\"matDatepicker\",c)(\"min\",t.disablePreviousDate)(\"ngModel\",t._StartDate),l.Jb(2),l.yc(\"for\",c),l.Jb(7),l.yc(\"matDatepicker\",i)(\"min\",t.disablePreviousDate)(\"ngModel\",t._EndDate),l.Jb(2),l.yc(\"for\",i),l.Jb(3),l.yc(\"hidden\",\"003\"!=t.selectedProjectType),l.Jb(1),l.yc(\"ngModel\",t.SelectedSubmissionType),l.Jb(1),l.yc(\"value\",0),l.Jb(2),l.yc(\"value\",1),l.Jb(2),l.yc(\"value\",2),l.Jb(2),l.yc(\"value\",4),l.Jb(2),l.yc(\"value\",8),l.Jb(2),l.yc(\"value\",10),l.Jb(2),l.yc(\"value\",16),l.Jb(5),l.yc(\"ngModel\",t._remarks),l.Jb(7),l.yc(\"disabled\",!t.SelectedEmplList)}},directives:[m.a,s.o,s.r,i.n,s.d,g.a,s.w,i.o,u.b,u.d,y.f,u.a,p.n,g.c],styles:[\"\"]}),e})()}];let T=(()=>{class e{}return e.\\u0275mod=l.Ub({type:e}),e.\\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(D)],n.i]}),e})();var j=c(\"Egam\");let S=(()=>{class e{}return e.\\u0275mod=l.Ub({type:e}),e.\\u0275inj=l.Tb({factory:function(t){return new(t||e)},imports:[[i.c,T,j.b,s.k,s.v,u.c,m.b,g.b]]}),e})()}}]);","extractedComments":[]}