<!-- Link memos Template -->

<div id="LinkSideBar" class="sideInfobar shadow-0 animate-right" [hidden]="_LinkSideBar">
    <div class="">
        <div class="offcanvas-header d-flex align-items-center justify-content-between">
            <h4 class="m-0"><i class="fa fa-link mr-1"></i> Link DMS</h4>
            <a href="javascript:void(0)" class="closebtn btn btn-xs btn-icon btn-hover-info"
                (click)="closeLinkSideBar()">
                <i class="flaticon2-delete"></i>
            </a>
        </div>
    </div>
    <!-- <div class="kt-portlet__head p-3 bg-blued">
        <div class="kt-portlet__head-label">
            <a href="javascript:void(0)" class="closebtn pull-right btn btn-xs btn-icon btn-hover-info"
                (click)="closeLinkSideBar()"><i class="flaticon2-delete"></i> </a>
            <h5 class="title-sidebar mb-0 text-white">
                <i class="fa fa-link"></i> Link Project
            </h5>
        </div>
    </div> -->
    <ul class="kt-nav">
        <li class="kt-nav__head d-block">
            <p class="text-primary">
                {{_displayProjName}}</p>
            <div class="M_fsize">
                Total
                <div class="badge badge-pill badge-outline-info">
                    {{_totalMemos}}</div>
                Linked
                <div class="badge badge-pill badge-outline-success">
                    {{_mappedMemos}}</div>
            </div>
            <div class="kt-nav__separator"></div>
        </li>
        <li class="kt-nav__item px-4">
            <div class="d-flex">
                <!-- Working... -->
                <ng-multiselect-dropdown [placeholder]="'Select Memo' "
                    class="mutlidropdown-set mutlidropdown-full mr-1" [settings]="dropdownSettings_Memo"
                    [data]="Memos_List" [(ngModel)]="ngDropdwonMemo" (onSelect)="Memo_Select(ngDropdwonMemo)"
                    (onDeSelect)="Memo_Deselect()" style="flex: 3;">
                </ng-multiselect-dropdown>

                <button class="btn btn-label-primary btn-upper btn-sm btn-bold" [disabled]="!ngDropdwonMemo"
                    (click)="_AddLink()">Link</button>
            </div>
        </li>
        <li class="kt-nav__foot"></li>
    </ul>
</div>

<!-- Link memos Template -->

<div id="LinkSideBar1" class="sideInfobar shadow-0 animate-right" [hidden]="_LinkSideBar1">
    <div class="">
        <div class="offcanvas-header d-flex align-items-center justify-content-between">
            <h4 class="m-0"><i class="fa fa-link mr-1"></i> Link Portfolio</h4>
            <a href="javascript:void(0)" class="closebtn btn btn-xs btn-icon btn-hover-info"
                (click)="closeLinkSideBar()">
                <i class="flaticon2-delete"></i>
            </a>
        </div>
    </div>

    <ul class="kt-nav">
        <li class="kt-nav__head d-block">
            <p class="text-primary">
                Portfolios</p>
            <div class="M_fsize">
                Total
                <div class="badge badge-pill badge-outline-info">
                    {{totalPortfolios}}</div>
                Linked
                <div class="badge badge-pill badge-outline-success">
                    {{_portfolioLength}}</div>
            </div>
            <div class="kt-nav__separator"></div>
        </li>
        <li class="kt-nav__item px-4">
            <div class="d-flex">
                <!-- Working... -->
                <!-- <ng-select #portId="ngModel" name="portfolioId" placeholder="Select Portfolio" id="portfolioName"
                    [(ngModel)]="portfolioId"  [multiple]="true" [closeOnSelect]="false"
                    [clearSearchOnAdd]="true" (click)="getPortfolios()">                    
                    <ng-option [value]="item.Portfolio_ID" *ngFor="let item of _portfoliosList">
                        {{item.Portfolio_Name}}
                    </ng-option>
                </ng-select> -->


                <ng-multiselect-dropdown appFocusOnClick [placeholder]="'Select Portfolio(s)'"
                    class="mutlidropdown-set mutlidropdown-full mr-1" [settings]="dropdownSettings_Portfolio"
                    [data]="_portfoliosList" [(ngModel)]="ngDropdwonPort" (onSelect)="Portfolio_Select(ngDropdwonPort)"
                    (onDeSelect)="Portfolio_Deselect(ngDropdwonPort)" (onSelectAll)="Portfolio_SelectAll($event)"
                    (onDeSelectAll)="Portfolio_DeSelectAll()" style="flex: 3;">
                </ng-multiselect-dropdown>

                <button class="btn btn-label-primary btn-upper btn-sm btn-bold"
                    [disabled]="_SelectedPorts==' '|| _SelectedPorts==null"
                    (click)="addProjectToPortfolio()">Link</button>
            </div>
        </li>
        <li class="kt-nav__foot"></li>
    </ul>
</div>


<!-- <h4>{{projectCode}}</h4> -->
<div id="mysideInfobar" class="sideInfobar animate-right offcanvas" [hidden]="_openInfoSideBar">
    <div class="">
        <div class="offcanvas-header d-flex align-items-center justify-content-between">
            <h4 class="m-0">
                Project Details
            </h4>
            <a href="javascript:void(0)" class="closebtn btn btn-xs btn-icon btn-hover-info" (click)="closeInfo()"><i
                    class="flaticon2-delete"></i></a>
        </div>
    </div>

    <div class="card-body card-car" *ngFor="let item of ProjectInfo_List">


        <div class="d-flex  align-items-start justify-content-between mt-0">
            <div class="flex-1">
                <div class="d-flex align-items-center">
                    <h5 class="fs-3 mb-2 d-inline-blck" id="pro_name_{{Pid}}">{{item.Project_Name }}</h5>
                    <!--edit project name-->
                    <span class="text-info mb-2" [hidden]="Editbutton" (click)="OnEditProject(Pid,_ProjectName)"
                        id="EidtBtn_single{{Pid}}" *ngIf="(Current_user_ID=='2000' || Current_user_ID == item.OwnerEmpNo || Current_user_ID == item.Responsible|| Current_user_ID == item.Authority)">
                        <i class="fas fa-edit ml-2 mb-1 curser-pointer" data-toggle="tooltip"
                            title="edit project name"></i>
                    </span>
                    <span class="kt-inbox__subject mb-2 w-100" style="display:none;" id="spanTextbox_single{{Pid}}">
                        <div class="d-flex">
                            <input type="text" class="form-control" id="textboxfocus_single{{Pid}}"
                                [(ngModel)]="_modelProjectName" style="width: 78%;height: 32px;"
                                (keydown.enter)="OnProject_Rename(Pid,_MasterCode)">
                            <div class="d-inline-block ml-3" id="button-addon4">
                                <button (click)="OnProject_Rename(Pid,_MasterCode)"
                                    class="btn btn-primary btn btn-sm mr-2">Done</button>
                                <button class=" btn btn-secondary btn btn-sm" (click)="onCancel(Pid)">Cancel</button>
                            </div>
                        </div>
                    </span>
                </div>
                <!--edit project name end-->

                <p class="mb-2">
                    <span class="text-muted fs-5" id="Span_Desc_{{Pid}}">{{item.Project_Description}}</span>
                    <span class="text-info fs-5" [hidden]="Editbutton" (click)="OnEditProject_Desc(Pid,Proj_Desc)"
                        id="EidtBtn_single{{Pid}}" *ngIf="(Current_user_ID=='2000' || Current_user_ID  == item.OwnerEmpNo || Current_user_ID == item.Responsible|| Current_user_ID == item.Authority)">
                        <i class="fas fa-edit ml-2 mb-1 curser-pointer" data-toggle="tooltip"
                            title="edit description"></i>
                    </span>
                    <span class="kt-inbox__subject mt-2" style="display:none;" id="spanTextarea_single{{Pid}}">
                        <div class="d-flex">
                            <input type="text" class="form-control" id="textboxfocus_single{{Pid}}"
                                [(ngModel)]="_modelProjDesc" style="width: 78%;height: 32px;"
                                (keydown.enter)="OnProject_Rename(Pid,_MasterCode)">
                            <div class="d-inline-block ml-3" id="button-addon4">
                                <button (click)="OnProject_Rename(Pid,_MasterCode)"
                                    class="btn btn-primary btn btn-sm mr-2">Done</button>
                                <button class=" btn btn-secondary btn btn-sm" (click)="onCancel(Pid)">Cancel</button>
                            </div>
                        </div>
                    </span>
                </p>
            </div>


            <div>
                <button type="button" class="btn btn-info btn-sm py-1" (click)="moreDetails()">
                    <i class="fa fa-chart-bar"></i>More Info
                </button>
            </div>
        </div>



        <div>
            <div class="mt-1">
                <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                    <i class="fa fa-clone mr-2"></i> {{item.Exec_BlockName}}
                </label>

                <label class=" kt-badge kt-bg-light-primary kt-badge--inline ml-2"
                    *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'">
                    <span class="mr-1">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="13" height="12">
                            <path
                                d="M8 19.9998V21.9323C8 22.2085 7.77614 22.4323 7.5 22.4323C7.38303 22.4323 7.26977 22.3913 7.17991 22.3164L3.06093 18.8839C2.84879 18.7072 2.82013 18.3919 2.99691 18.1797C3.09191 18.0657 3.23264 17.9998 3.38103 17.9998L18 17.9998C19.1046 17.9998 20 17.1044 20 15.9998V7.99985H22V15.9998C22 18.209 20.2091 19.9998 18 19.9998H8ZM16 3.99985V2.06738C16 1.79124 16.2239 1.56738 16.5 1.56738C16.617 1.56738 16.7302 1.60839 16.8201 1.68327L20.9391 5.11575C21.1512 5.29253 21.1799 5.60782 21.0031 5.81995C20.9081 5.93395 20.7674 5.99986 20.619 5.99986L6 5.99985C4.89543 5.99985 4 6.89528 4 7.99985V15.9998H2V7.99985C2 5.79071 3.79086 3.99985 6 3.99985H16Z">
                            </path>
                        </svg>
                    </span> {{item.SubmissionType1}}
                </label>
            </div>

        </div>


        <div class="d-flex  align-items-center justify-content-between mt-3" *ngIf="(Current_user_ID  == approvalEmpId)  && 
                (item.Status!='Completed') ">
            <!--&& item.Status!='InProcess' && item.Status!='Delay' && item.Status!='New Project Rejected'" -->

            <div class="">
                <h5 class="text-hover-underline text-hover-info mb-0" data-toggle="collapse" href="#pro_actns"
                    role="button" aria-expanded="true" aria-controls="pro_actns" *ngIf="pro_act==true">
                    <!-- <i class="fas fa-check-circle"></i> -->
                    Project Actions
                    <!-- <i class="fa fa-chevron-up ml-2 m-0"></i> -->
                </h5>
            </div>

            <div class>
                <a class="text-info text-hover-underline" data-toggle="collapse" href="#pro_actns" role="button"
                    aria-expanded="true" aria-controls="pro_actns" *ngIf="pro_act==true">
                    <span class="c1">Hide</span>
                    <span class="s1">View</span>
                </a>
            </div>

            <!-- <div> *ngIf="requestType!='Project Forward'" 
                && (requestType!='Project Forward')
                <button type="button" class="btn btn-info btn-sm py-1" data-toggle="collapse" href="#pro_actns" role="button" aria-expanded="true" aria-controls="pro_actns">
                    Collapse
                        <i class="ml-2 fa fa-chevron-up"></i>
                </button>
            </div> -->
        </div>
        <div class="card card-itm1 mt-2 collapse show" id="pro_actns"
            *ngIf="(Current_user_ID  == approvalEmpId) && (pro_act==true)">
            <!-- &&  -->
            <!-- item.Status!='Completed' && item.Status!='InProcess' && item.Status!='Delay' && item.Status!='New Project Rejected'" -->
            <div class="card-body px-0">

                <div class="d-flex">
                    <div class=" w-45">

                        <div class="px-cb">
                            <!-- <div class="align-items-center">
                                <h5 class="fs-6" id="">{{requestComments}}</h5>
                            </div> -->

                            <div class="pb-2">
                                <!-- [ngClass]="{ ' ' : item.Status!='Deadline Extend Under Approval',
                                        'justify-content-between' : item.Status=='Deadline Extend Under Approval'}"  -->
                                <div class="proctdetls" id="ProjectDetails_Main">

                                    <div class="d-flex align-items-center mb-3">
                                        <div class=""><span class="svg-icon svg-icon-2x text-primary mr-2"><svg
                                                    _ngcontent-jrv-c350="" width="24" height="24" viewBox="0 0 40 40"
                                                    aria-hidden="true" focusable="false" fill="currentColor">
                                                    <path _ngcontent-jrv-c350=""
                                                        d="M30.5,9h-7.8l-3.6-3.6C18.2,4.5,16.9,4,15.6,4h-5.1C6.9,4,4,6.9,4,10.5v19c0,3.6,2.9,6.5,6.5,6.5h19c3.6,0,6.5-2.9,6.5-6.5v-15C36,11.5,33.5,9,
                                            30.5,9z M33,29.5c0,1.9-1.6,3.5-3.5,3.5h-19C8.6,33,7,31.4,7,29.5v-19C7,8.6,8.6,7,10.5,7h5.1c0.5,0,1,0.2,1.4,0.6l4.1,4c0.3,0.3,0.7,0.4,1.1,0.4h8.4c1.4,
                                            0,2.5,1.1,2.5,2.5L33,29.5L33,29.5z M13.5,13L13.5,13c0.8,0,1.5,0.7,1.5,1.5v13c0,0.8-0.7,1.5-1.5,1.5l0,0c-0.8,0-1.5-0.7-1.5-1.5v-13C12,13.7,12.7,13,13.5,13z
                                            M25.5,18L25.5,18c0.8,0,1.5,0.7,1.5,1.5v8c0,0.8-0.7,1.5-1.5,1.5l0,0c-0.8,0-1.5-0.7-1.5-1.5v-8C24,18.7,24.7,18,25.5,18z M19.5,22L19.5,22c0.8,0,1.5,0.7,1.5,1
                                            .5v4c0,0.8-0.7,1.5-1.5,1.5l0,0c-0.8,0-1.5-0.7-1.5-1.5v-4C18,22.7,18.7,22,19.5,22z"></path>
                                                </svg></span></div>
                                        <div class="action-content">
                                            <h6 class="txtm-cus mb-1 pt-1">Request type</h6>
                                            <h6 class="mt-1 text-blue">{{requestType}}</h6>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mb-3">
                                        <div class=""><span class="svg-icon svg-icon-2x text-primary mr-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" width="24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5">
                                                    </path>
                                                </svg>
                                            </span></div>
                                        <!-- <div class="action-content">
                                            <h6 class="txtm-cus mb-1 pt-1">Request Date</h6>
                                            <h6 class="mt-1 text-blue">{{requestDate|date:'dd-MM-yyyy'}}</h6>
                                        </div> -->

                                        <div class="action-content d-flex align-items-center gap-1">
                                            <div class="left-w">
                                                <h6 class="txtm-cus pt-1">Project duration</h6>
                                                <h6 class="mt-1"
                                                    *ngIf="(item.Exec_BlockName != 'Standard Tasks' && item.Exec_BlockName!='Routine Tasks')">
                                                    {{item.DPG|date:'dd-MM-yyyy'}}/{{date2 | date: 'dd-MM-yyyy'}}</h6>
                                                <h6 class="mt-1"
                                                    *ngIf="(item.Exec_BlockName == 'Standard Tasks' || item.Exec_BlockName=='Routine Tasks')">
                                                    {{item.DPG|date:'dd-MM-yyyy'}} / {{item.SubmissionType1}}</h6>
                                            </div>
                                            <div class="px-1"
                                                *ngIf="item.Status=='Deadline Extend Under Approval' || item.Status=='Project Hold' || item.Status=='Project Hold Under Approval'">
                                                <i class="la la-arrow-right mx-3 fs-4 font-weight-bold"></i>
                                            </div>
                                            <div *ngIf="item.Status=='Deadline Extend Under Approval'">
                                                <h6 class="txtm-cus pt-1">New end date</h6>
                                                <h6 class="mt-1"> {{new_deadline | date: 'dd-MM-yyyy'}} </h6>
                                            </div>
                                            <div
                                                *ngIf="item.Status=='Project Hold' || item.Status=='Project Hold Under Approval'">
                                                <h6 class="txtm-cus pt-1">Hold until</h6>
                                                <h6 class="mt-1"> {{proj_holddate}} </h6>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mb-3">
                                        <div class="">
                                            <span class="svg-icon svg-icon-2x text-primary mr-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" height="24" width="24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3">
                                                    </path>
                                                </svg>
                                            </span>
                                        </div>

                                        <div class="action-content d-flex align-items-center gap-1">
                                            <div class="left-w">
                                                <h6 class="txtm-cus pt-1">Existing cost</h6>
                                                <h6 class="mt-1"> {{Project_Cost |currency:'SAR '}} </h6>
                                                <!-- <h6 class="mt-1"> SAR 100.00 <i class="la la-arrow-right mx-3 fs-4 font-weight-bold"></i> SAR 200.00 </h6> -->
                                            </div>
                                            <!-- <div class="px-1" *ngIf="item.Status=='Deadline Extend Under Approval'">
                                                <i class="la la-arrow-right mx-3 fs-4 font-weight-bold"></i>
                                            </div>
                                            <div *ngIf="item.Status=='Deadline Extend Under Approval'">
                                                <h6 class="txtm-cus pt-1">New cost</h6>
                                                <h6 class="mt-1"> {{new_cost |currency:'SAR '}} </h6>
                                            </div> -->
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mb-3"
                                        *ngIf="item.Status=='Forward Under Approval'">
                                        <div class="">
                                            <span class="svg-icon svg-icon-2x text-primary mr-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" height="24" width="24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3">
                                                    </path>
                                                </svg>
                                            </span>
                                        </div>
                                        <div class="action-content d-flex align-items-center gap-1"
                                            *ngIf="item.Status=='Forward Under Approval'">
                                            <div class="left-w">
                                                <h6 class="txtm-cus pt-1">Forward from</h6>
                                                <h6 class="mt-1">{{forwardfrom}}</h6>
                                            </div>
                                            <div class="px-1">
                                                <i class="la la-arrow-right mx-3 fs-4 font-weight-bold"></i>
                                            </div>
                                            <div>
                                                <h6 class="txtm-cus pt-1">Forward to</h6>
                                                <h6 class="mt-1">{{forwardto}}</h6>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mb-3"
                                        *ngIf="requestType=='Project Complete' || requestType=='ToDo Achieved'">
                                        <div class="">
                                            <span class="svg-icon svg-icon-2x text-primary mr-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" height="24" width="24">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                        d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3">
                                                    </path>
                                                </svg>
                                            </span>
                                        </div>
                                        <div class="action-content d-flex align-items-center gap-1"
                                            *ngIf="requestType=='Project Complete'">
                                            <div class="left-w">
                                                <h6 class="txtm-cus pt-1">Complete attachment</h6>
                                                <a (click)="openPDF(iscloud,url)">
                                                    <h6 class="mt-1"><u>{{completedoc}}</u></h6>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="action-content d-flex align-items-center gap-1"
                                            *ngIf="requestType=='ToDo Achieved'">
                                            <div class="left-w">
                                                <h6 class="txtm-cus pt-1">Complete attachment</h6>
                                                <a (click)="openPDF(iscloud,url)">
                                                    <h6 class="mt-1"><u>{{url}}</u></h6>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- <div class="d-flex align-items-center mb-3"
                                        *ngIf="item.Status=='Deadline Extend Under Approval' || item.Status=='Forward Under Approval'">
                                        <div class=""><span class="svg-icon svg-icon-2x text-dangr mr-2"><svg width="24"
                                                    height="24" viewBox="0 0 40 40" aria-hidden="true" focusable="false"
                                                    fill="currentColor">
                                                    <path
                                                        d="M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M8,4v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4v2H4V8C4,5.8,5.8,4,8,4z M24,28H8c-2.2,0-4-1.8-4-4V12h24v12C28,26.2,26.2,28,24,28z">
                                                    </path>
                                                </svg></span></div>
                                        <div class="action-content">
                                            <h6 class="txtm-cus mb-1 pt-1">Request Deadline</h6>
                                            <h6 class="mt-1 text-blue">{{requestDeadline|date:'dd-MM-yyyy'}}</h6>
                                            <h5 class="mt-1 text-blue" *ngIf="requestDeadline==null">{{requestDate|date:'dd-MM-yyyy'}}</h5>
                                        </div>
                                    </div> -->
                                </div>

                                <div class="comment-list my-3 pb-0" *ngIf="requestComments!=''">
                                    <div class="d-flex">
                                        <div>
                                            <span class="name-box text-center mt-1">{{initials1}}</span>
                                        </div>
                                        <div class="d-flex flex-column flex-grow-1">
                                            <div class=""><span class="comt-info">{{Submitted_By}}</span> on
                                                {{requestDate | date:'dd-MM-yyyy'}}</div>
                                            <div class="comt-text">
                                                <span>{{requestComments}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <a class="btn--1 btn-info--1 btn-sm--1 text-info py-2" data-toggle="collapse"
                                    href="#prevco" role="button" aria-expanded="false" aria-controls="prevco">
                                    View previous comments
                                </a>
                                <div class="px-cb pt-cb bg-gry collapse kt-portlet__body_scroll prv-cmts" id="prevco">
                                    <div class="comment-list" *ngFor="let item of prviousCommentsList">
                                        <div class="d-flex">
                                            <div>
                                                <span class="name-box text-center mt-1">{{item.Initial}}</span>
                                            </div>
                                            <div class="d-flex flex-column flex-grow-1">
                                                <div><span class="comt-info">{{item.Submitted_By}}</span> on
                                                    {{item.Req_date | date:'dd-MM-yyyy'}}</div>
                                                <div class="comt-text">
                                                    <span>{{item.Req_Coments}}</span>
                                                </div>
                                                <div class="blw mt-2">
                                                    <span
                                                        class="kt-badge kt-badge--inline kt-badge--unified-info">{{item.Request_type}}</span>
                                                    <!-- <span
                                                        class="dt kt-badge kt-badge--inline kt-badge--unified-dark">{{item.Req_date
                                                        | date:'dd-MM-yyyy'}}</span> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- accordian_section-->

                    <div class="px-3 w-55 flex-1 br-cus">
                        <div class="">
                            <div class="card-title mb-0">
                                <!-- <div class="card-title mb-0" data-toggle="collapse" data-target="#proj_act_acc" aria-expanded="true" aria-controls="proj_act_acc"> -->
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="det-text pro-nm pl-1 text-blue">Project Actions<span
                                            style="color:red">*</span></span>
                                    <i class="fas fa-chevron-up text-info1 mr-2 d-none"></i>
                                </div>
                            </div>

                            <div id="proj_act_acc" class="px-1">
                                <div class="pro_act_div px-0 pt-1">
                                    <div class="form-group mb-2">
                                        <div>
                                            <div class="form-check-inline" (click)="typeChange()">
                                                <!-- del later <label class="form-check-label lbl-suc btn-app"  data-toggle="collapse" data-target="#comts1" aria-expanded="true" aria-controls="comts1"> -->
                                                <label class="form-check-label lbl-suc btn-app">
                                                    <input id="rdbButtons_0" type="radio" class="form-check-input"
                                                        name="rdbButtons" value="1" checked="checked"
                                                        [(ngModel)]="selectedType">Accept
                                                </label>
                                            </div>
                                            <div class="form-check-inline" *ngIf="requestType=='Project Complete'"
                                                (click)="typeChange()">
                                                <label class="form-check-label lbl-war btn-app">
                                                    <input id="rdbButtons_1" type="radio" class="form-check-input"
                                                        name="rdbButtons" value="2"
                                                        [(ngModel)]="selectedType">Conditional Accept
                                                </label>
                                            </div>
                                            <div class="form-check-inline" (click)="typeChange()">
                                                <label class="form-check-label lbl-dan btn-app">
                                                    <input id="rdbButtons_2" type="radio" class="form-check-input"
                                                        name="rdbButtons" value="3" [(ngModel)]="selectedType">Reject
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="" id="comts1">
                                        <div class="col-md-12 checked-rad pl-1 pt-3">
                                            <div class="form-group" *ngIf="selectedType=='3'">
                                                <label class="mb-2">Reject Type</label><span style="color:red">*</span>
                                                <ng-select required #action="ngModel" name="rej_type"
                                                    placeholder="Select Reject Type" id="rej_type"
                                                    [(ngModel)]="rejectType" (change)="rejectApproval()">
                                                    <ng-option [value]="item.TypeID" *ngFor="let item of reject_list">
                                                        {{item.RejectType}}
                                                    </ng-option>
                                                </ng-select>
                                                <span *ngIf="rejectType!=1 && rejectType"
                                                    style="color:grey">{{rejDesc}}</span>
                                                <span *ngIf="noRejectType==true" style="color:red">Please select Reject
                                                    type!!</span>
                                            </div>

                                            <label class="mb-2" *ngIf="rejectType && selectedType=='3'">Select From
                                                Existing Comments</label>
                                            <div class="appr-comts" *ngIf="rejectType && selectedType=='3'">

                                                <div class="exs-cmts card">
                                                    <div class="card-header">
                                                        <h6 class="mb-0">Existing Comments</h6>
                                                    </div>
                                                    <div class="crd-bdy scroll-y">
                                                        <div class="cmts-items"
                                                            *ngFor="let item of rejectcommentsList;let i=index">
                                                            <h6
                                                                [ngClass]="exist_comment.indexOf(item.Req_Coments) != -1 ? 'text-info' : ''">
                                                                {{item.Req_Coments}}</h6>
                                                            <div class="cmts-actns">
                                                                <span class="cmts-svg"
                                                                    *ngIf="exist_comment.indexOf(item.Req_Coments) == -1"
                                                                    (click)="clickonselect(item.Req_Coments)">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                        viewBox="0 0 24 24">
                                                                        <path
                                                                            d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z">
                                                                        </path>
                                                                    </svg>
                                                                </span>
                                                                <span class="cmts-svg"
                                                                    *ngIf="exist_comment.indexOf(item.Req_Coments) != -1"
                                                                    (click)="clickondeselect(item.Req_Coments,i)">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                        viewBox="0 0 24 24">
                                                                        <path
                                                                            d="M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z">
                                                                        </path>
                                                                    </svg>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <!-- <div class="cmts-items">
                                                            <h6>This is a test Comment</h6>
                                                            <div class="cmts-actns">
                                                                <span class="cmts-svg">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                                        <path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z"></path>
                                                                    </svg>
                                                                </span>
                                                                <span class="cmts-svg">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"></path></svg>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="cmts-items">
                                                            <h6>This is a test Comment</h6>
                                                            <div class="cmts-actns">
                                                                <span class="cmts-svg">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                                        <path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z"></path>
                                                                    </svg>
                                                                </span>
                                                                <span class="cmts-svg">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.0007 10.5865L16.9504 5.63672L18.3646 7.05093L13.4149 12.0007L18.3646 16.9504L16.9504 18.3646L12.0007 13.4149L7.05093 18.3646L5.63672 16.9504L10.5865 12.0007L5.63672 7.05093L7.05093 5.63672L12.0007 10.5865Z"></path></svg>
                                                                </span>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                </div>

                                                <!-- <div class="form-group" *ngIf="selectedType=='1' || selectedType=='2'"
                                                    (click)="clickonselect()">
                                                    <label class="mb-2">Select From Existing Comments</label>
                                                    <ng-select required #action="ngModel" name="comment_accept"
                                                        placeholder="Select Comment" id="comment_accept" class="no-ellip"
                                                        [(ngModel)]="commentSelected">
                                                        <ng-option [value]="item.Req_Coments"
                                                            *ngFor="let item of comments_list">
                                                            {{item.Req_Coments}}
                                                        </ng-option>
                                                    </ng-select>
                                                </div> -->

                                                <!-- <div class="form-group" *ngIf="selectedType=='3'"
                                                    (click)="clickonselect()">
                                                    <label class="mb-2">Select From Existing Comments</label>
                                                    <ng-select required #action="ngModel" name="comment_reject"
                                                        placeholder="Select Comment" id="comment_reject" class="no-ellip"
                                                        [(ngModel)]="commentSelected">
                                                        <ng-option [value]="item.Req_Coments"
                                                            *ngFor="let item of rejectcommentsList">
                                                            {{item.Req_Coments | titlecase}}
                                                        </ng-option>
                                                    </ng-select>
                                                </div> -->

                                            </div>


                                            <div class="form-group" *ngIf="rejectType && selectedType=='3'">
                                                <label class="mb-2">Enter Comments</label><span
                                                    style="color:red">*</span>
                                                <textarea class="form-control h-100px"
                                                    [(ngModel)]="comments"></textarea>
                                            </div>
                                            <div class="form-group" *ngIf="selectedType=='1' || selectedType=='2'">
                                                <label class="mb-2">Enter Comments</label>
                                                <!-- <span style="color:red">*</span> -->
                                                <textarea class="form-control h-100px"
                                                    [(ngModel)]="comments"></textarea>
                                            </div>


                                            <div class="d-flex justify-content-end mb-2" *ngIf="selectedType=='3'">
                                                <button type="submit" class="btn btn-sm py-1 btn-info mr-2"
                                                    (click)="submitApproval()" [disabled]="!comments || !selectedType"
                                                    primary="true">Submit</button>
                                                <button class="btn btn-sm py-1 btn-secondary"
                                                    (click)="resetApproval()">Reset</button>
                                            </div>
                                            <div class="d-flex justify-content-end mb-2"
                                                *ngIf="selectedType=='1' || selectedType=='2'">
                                                <button type="submit" class="btn btn-sm py-1 btn-info mr-2"
                                                    (click)="submitApproval()" [disabled]="!selectedType"
                                                    primary="true">Submit</button>
                                                <button class="btn btn-sm py-1 btn-secondary"
                                                    (click)="resetApproval()">Reset</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class=" border-top mt-3">
            <div class="mt-3">
                <label class="kt-badge kt-bg-light-primary kt-badge--inline">
                    <i class="fa fa-file-alt mr-2"></i>Project Details </label>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Project Duration</p>
                        <div class="d-flex align-items-center">
                            <!-- <i class="fas fa-calendar-alt fs-3 text-muted mr-2"></i> -->
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="dater">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"></path>
                                  </svg>                             
                            </span>

                            <ng-container
                                *ngIf="(item.Exec_BlockName != 'Standard Tasks' && item.Exec_BlockName!='Routine Tasks'); then othertask;">
                            </ng-container>
                            <ng-container
                                *ngIf="(item.Exec_BlockName == 'Standard Tasks' || item.Exec_BlockName=='Routine Tasks'); then standardtask;">
                            </ng-container>
                            <ng-template #standardtask>
                                <h5 class="mb-0">{{item.DPG|date:'dd-MM-yyyy'}} / {{item.SubmissionType1}}
                                </h5>
                            </ng-template>
                            <ng-template #othertask>
                                <div class="mb-0 d-flex align-items-center">
                                    <h5 class="mb-0">{{item.DPG|date:'dd-MM-yyyy'}}</h5> <h5>/</h5> <h5 class="mb-0" *ngIf="deadlineCount==0">
                                        {{item.DeadLine|date:'dd-MM-yyyy'}}</h5>
                                    <h5 class="mb-0" style="color:rgb(112, 45, 45)" data-toggle="kt-tooltip"
                                        title="Extended Deadline for {{deadlineCount}} times" *ngIf="deadlineCount>0">
                                        {{item.DeadLine|date:'dd-MM-yyyy'}}</h5>

                                    <div class="dropdown"
                                        *ngIf="(Current_user_ID=='2000' || Current_user_ID == item.OwnerEmpNo || Current_user_ID == item.Responsible || Current_user_ID == item.Authority) && (item.Status!='Completed')">
                                        <span class="dropdown-toggle no-after text-info" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false" (click)="onEditDeadline(Pid)">
                                            <!-- onclick="document.getElementById('date_edt').style.display='block';document.getElementById('fade').style.display='block'"> -->
                                            <!-- [hidden]="Editbutton" -->
                                            <i class="fas fa-edit ml-2 mb-1 curser-pointer" data-toggle="tooltip"
                                                title="extend deadline"></i>
                                        </span>
                                        <div id="DeadlineArea_{{Pid}}"
                                            class="dropdown-menu dropdown-menu-right dropdown-menu-fit date-drop1">
                                            <ul class="kt-nav pb-0" (click)="$event.stopPropagation();">
                                                <li class="kt-nav__head py-0">
                                                    <div>Deadline Extend</div>
                                                </li>

                                                <li class="kt-nav__separator"></li>
                                                <div class=" height-scroll h-scr">
                                                    <div class="px-4 py-3">
                                                        <div class="form-group">
                                                            <label>Set new project deadline<span
                                                                    class="text-danger">*</span></label>
                                                            <!-- <span class="kt-inbox__subject mt-2" > -->
                                                            <div class="d-flex input-group">
                                                                <input matInput [matDatepicker]="picker2"
                                                                    id="Deadlinetext_{{Pid}}" #Deadlinetext="ngModel"
                                                                    (click)="picker2.open();"
                                                                    (keydown.enter)="onProject_ExtendDeadline(Pid,_MasterCode);"
                                                                    [min]="minhold" placeholder="Select Date"
                                                                    [(ngModel)]="_ProjDeadline" class="form-control"
                                                                    name="date">
                                                                <div class="input-group-append">

                                                                    <mat-datepicker-toggle matSuffix [for]="picker2"
                                                                        class="btn-secondary">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker class="form-group"
                                                                        #picker2></mat-datepicker>
                                                                    <!-- <div class="d-inline-block ml-3" id="button-addon4">
                                                                            <button (click)="onProject_ExtendDeadline(Pid,_MasterCode)"
                                                                                class="btn btn-primary btn btn-sm mr-2">Done</button>
                                                                            <button class=" btn btn-secondary btn btn-sm"
                                                                                (click)="onCancel(Pid)">Cancel</button>
                                                                        </div> -->
                                                                </div>
                                                            </div>
                                                            <!-- </span> -->
                                                        </div>
                                                        <div class="form-group mb-1">
                                                            <label>Remarks<span class="text-danger">*</span></label>
                                                            <textarea class="form-control" [(ngModel)]="extend_remarks"
                                                                placeholder="" rows="2" cols="20"
                                                                style="height:70px;"></textarea>
                                                        </div>
                                                        <!-- <span class="text-danger">Note: (*) are mandatory!</span> -->
                                                    </div>
                                                </div>
                                                <li class="kt-nav__separator"></li>
                                            </ul>
                                            <div class="px-4 pb-3">
                                                <button class="btn btn-info btn-sm mr-2 text-white"
                                                    [disabled]="!_ProjDeadline || !extend_remarks"
                                                    (click)="onProject_ExtendDeadline(Pid,_MasterCode)">Submit</button>
                                                <button class="btn btn-outline-info btn-sm text-dark-75"
                                                    (click)="onCancel(Pid)">Close</button>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="dropdown"
                                        *ngIf="(Current_user_ID=='2000' || Current_user_ID == item.OwnerEmpNo || Current_user_ID == item.Responsible|| Current_user_ID == item.Authority) && (item.Status!='Completed')">
                                        <span class="dropdown-toggle no-after text-info" type="button" id="hold-icn"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                            (click)="onHoldClick(Pid)">
                                            <i class="fas fa-pause ml-2 mb-1 curser-pointer" data-toggle="tooltip"
                                                title="project hold"></i>
                                        </span>
                                        <!-- <span class="dropdown-toggle no-after text-info" type="button" id="hold-icn"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                (click)="onHoldClick(Pid)">
                                <i class="fas fa-play ml-2 mb-1 curser-pointer"></i>
                            </span> -->
                                        <div id="HoldArea_{{Pid}}"
                                            class="dropdown-menu dropdown-menu-right dropdown-menu-fit date-drop2">
                                            <ul class="kt-nav pb-0" (click)="$event.stopPropagation();">
                                                <li class="kt-nav__head py-0">
                                                    <div>Hold project</div>
                                                </li>

                                                <li class="kt-nav__separator"></li>
                                                <div class=" height-scroll h-scr">
                                                    <div class="px-4 py-3">
                                                        <div class="form-group input-group">
                                                            <label>Select hold date<span
                                                                    class="text-danger">*</span></label>
                                                            <div class="input-group">
                                                                <input matInput [matDatepicker]="picker3"
                                                                    id="Holdtext_{{Pid}}" #Holddt="ngModel"
                                                                    (click)="picker3.open();"
                                                                    (keydown.enter)="onProject_Hold(Pid,_MasterCode);"
                                                                    [min]="minhold" [max]="maxhold"
                                                                    placeholder="Select Date" [(ngModel)]="Holddate"
                                                                    class="form-control" name="date">
                                                                <div class="input-group-append">
                                                                    <mat-datepicker-toggle matSuffix [for]="picker3"
                                                                        class="btn-secondary">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker class="form-group"
                                                                        #picker3></mat-datepicker>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-1">
                                                            <label>Remarks<span class="text-danger">*</span></label>
                                                            <textarea class="form-control" [(ngModel)]="hold_remarks"
                                                                placeholder="Define your exact hold reason here. e.g: Waiting for store license"
                                                                rows="2" cols="20" style="height:90px;"></textarea>
                                                        </div>
                                                        <!-- <span class="text-danger">Note: (*) are mandatory!</span> -->
                                                    </div>

                                                </div>
                                                <li class="kt-nav__separator"></li>
                                            </ul>
                                            <div class="px-4 pb-3">
                                                <button class="btn btn-info btn-sm mr-2 text-white"
                                                    [disabled]="!Holddate || !hold_remarks"
                                                    (click)="onProject_Hold(Pid,_MasterCode)">Submit</button>
                                                <button class="btn btn-outline-info btn-sm text-dark-75"
                                                    (click)="onCancel(Pid)">Close</button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </div>
                        <!-- <div class="d-flex align-items-center">
                                        <div class="w-100">
                                            <h5 class="my-1 font-14">{{item.DPG|date:'dd-MM-yyyy'}}</h5>
                                            <div class="mt-1 d-flex align-items-start">
                                                <h5>{{item.DPG|date:'dd-MM-yyyy'}}</h5> / <h5>{{item.DeadLine|date:'dd-MM-yyyy'}}</h5>
                                                <h5 style="color:rgb(112, 45, 45)" data-toggle="kt-tooltip">End Date</h5>
                                                <div class="dropdown">
                                                    <span class="dropdown-toggle no-after text-info" data-toggle="dropdown"
                                                            aria-haspopup="true" aria-expanded="false">
                                                        <i class="fas fa-edit ml-2 mb-1 curser-pointer" data-toggle="tooltip" title="extend deadline"></i>
                                                    </span>
                                                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-fit date-drop1 z-1k">
                                                        <ul class="kt-nav pb-0" (click)="$event.stopPropagation();" >
                                                            <li class="kt-nav__head py-0">
                                                                <div>Deadline Extend</div>
                                                            </li>
                                                            <li class="kt-nav__separator"></li>
                                                            <div class=" height-scroll h-scr">
                                                                <div class="px-4 py-3">
                                                                    <div class="form-group">
                                                                        <label>Select Date<span class="text-danger">*</span></label>
                                                                    </div>
                                                                    <div class="form-group mb-1">
                                                                        <label>Remarks<span class="text-danger">*</span></label>
                                                                        <textarea class="form-control" placeholder="" rows="2" cols="20"
                                                                            style="height:70px;"></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <li class="kt-nav__separator"></li>
                                                        </ul>
                                                        <div class="px-4 pb-3">
                                                            <button class="btn btn-info btn-sm mr-2 text-white">Submit</button>
                                                                <button class="btn btn-outline-info btn-sm text-dark-75">Close</button>
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div> -->
                    </div>

                    <!-- <div *ngIf="(item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks') else EndDate"
                        class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Submission Type</p>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-calendar-alt fs-3 text-muted mr-2"></i>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{item.SubmissionType1}}</h5>
                            </div>
                        </div>
                    </div> -->
                    <!-- <ng-template #EndDate>
                        <div class="col-md-4">
                            <div class="d-flex mt-2 mb-1 ">
                                <p class="m-0 text-muted fs-7">End Date</p>
                               

                            </div>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-calendar-alt fs-3 text-muted mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14" *ngIf="deadlineCount==0">
                                        {{item.DeadLine|date:'dd-MM-yyyy'}}</h5>
                                    <h5 class="my-1 font-14" style="color:rgb(112, 45, 45)" data-toggle="kt-tooltip"
                                        title="Extended Deadline {{deadlineCount}} times!!" *ngIf="deadlineCount>0">
                                        {{item.DeadLine|date:'dd-MM-yyyy'}}</h5>
                                </div>
                            </div>
                        </div>
                    </ng-template> -->
                    <!--  -->
                    <div *ngIf="item.Exec_BlockName !='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'"
                        class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Duration</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100">
                                <h5 class="mb-0 font-14">{{Difference_In_Days}} days</h5>
                                <!-- <p>{{item.Duration/8| number: '1.0-0'}} days <p>-->
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-4 pricevalues text-left"
                    *ngIf="item.Duration<8 && item.Exec_BlockName !='Standard Tasks'">
                    <p>DURATION</p>
                    <h5>{{item.Duration}} days</h5>
                </div> -->

                    <div *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'"
                        class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Duration</p>
                        <!-- <h5>{{item.StandardDuration}}</h5> -->
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100">
                                <h5 class="mb-0 font-14">Continuous</h5>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'"
                        class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Allocated</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100">
                                <h5 class="mb-0 font-14">{{item.Duration}} Hrs </h5>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'"
                        class="col-md-4 pricevalues text-left py-0">
                        <p class="mt-2 mb-1 text-muted fs-7">Allocated</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100">
                                <!-- <h5>{{item.StandardDuration}}</h5> -->
                                <h5 class="mb-0 font-14">{{item.StandardDuration}} </h5>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <!-- New Column -->

                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Cost</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-wallet" viewBox="0 0 16 16">
                                    <path d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5V3zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a1.99 1.99 0 0 1-1-.268zM1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1z"/>
                                </svg>                             
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{item.Project_Cost |currency:'SAR '}}</h5>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="_MainProjectStatus=='Delay';else other" class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Status</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                </svg>                          
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14 text-danger" *ngIf="item.Delaydays>0" data-toggle="tooltip"
                                    title="{{item.Delaydays}} Days Delay!">{{_MainProjectStatus}} {{item.Delaydays}}
                                    days</h5>
                                <h5 class="my-1 font-14 text-danger" *ngIf="item.Delaydays<=0">{{_MainProjectStatus}}
                                </h5>
                            </div>
                        </div>
                    </div>
                    <ng-template #other>
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Status</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                        <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                    </svg>                          
                                </span>
                                <div class="w-100">
                                    <div *ngIf="item.Status=='Under Approval'">
                                        <h5 class="my-1 font-14 text-info">{{item.Status}}</h5>
                                    </div>
                                    <div *ngIf="item.Status=='Delay'">
                                        <h5 class="my-1 font-14 text-danger" *ngIf="item.Delaydays>0"
                                            data-toggle="tooltip" title="{{item.Delaydays}} days delay!">{{item.Status}}
                                        </h5>
                                        <h5 class="my-1 font-14 text-danger" *ngIf="item.Delayday<=0">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='InProcess'">
                                        <h5 class="my-1 font-14 text-warning">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='ToDo InProcess'">
                                        <h5 class="my-1 font-14 text-primary">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='New Project'">
                                        <h5 class="my-1 font-14 text-primary">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='New Project Rejected'">
                                        <h5 class="my-1 font-14 text-danger">{{item.Status}}</h5>

                                    </div>

                                    <div *ngIf="item.Status=='Project Hold' && !proj_holddate">
                                        <h5 class="my-1 font-14 text-danger">Hold
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Project Hold' && proj_holddate">
                                        <h5 class="my-1 font-14 text-danger" data-toggle="tooltip"
                                            title=" Hold till {{proj_holddate}}">
                                            Hold until {{proj_holddate}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='ToDo Completed'">
                                        <h5 class="my-1 font-14 text-primary">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='New Todo'">
                                        <h5 class="my-1 font-14 text-primary">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='Completion Under Approval'">
                                        <h5 class="my-1 font-14 text-primary">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Completed'">
                                        <h5 class="my-1 font-14 text-success">{{item.Status}}
                                        </h5>

                                    </div>
                                    <div *ngIf="item.Status=='Forward Under Approval'">
                                        <h5 class="my-1 font-14 text-warning">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Project Complete Rejected'">
                                        <h5 class="my-1 font-14 text-danger">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Enactive Under Approval'">
                                        <h5 class="my-1 font-14 text-danger">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Version'">
                                        <h5 class="my-1 font-14 text-danger">{{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Deadline Extend Under Approval'">
                                        <h5 class="my-1 font-14 text-info">{{item.Status}}</h5>
                                    </div>
                                    <div *ngIf="item.Status=='Project Holded'">
                                        <h5 style="color: #c0b5dc;" class="my-1 font-14 ">
                                            Hold
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Project Hold Under Approval'">
                                        <h5 style="color: #c0b5dc;" class="my-1 font-14 ">
                                            {{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='ToDo Achieved'">
                                        <h5 class="my-1 font-14 text-info">
                                            {{item.Status}}
                                        </h5>
                                    </div>
                                    <div *ngIf="item.Status=='Standardtask Enactive Hold'">
                                        <h5 class="my-1 font-14 text-danger">
                                            {{item.Status}}
                                        </h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>

                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Client</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-briefcase" viewBox="0 0 16 16">
                                    <path d="M6.5 1A1.5 1.5 0 0 0 5 2.5V3H1.5A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-8A1.5 1.5 0 0 0 14.5 3H11v-.5A1.5 1.5 0 0 0 9.5 1h-3zm0 1h3a.5.5 0 0 1 .5.5V3H6v-.5a.5.5 0 0 1 .5-.5zm1.886 6.914L15 7.151V12.5a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5V7.15l6.614 1.764a1.5 1.5 0 0 0 .772 0zM1.5 4h13a.5.5 0 0 1 .5.5v1.616L8.129 7.948a.5.5 0 0 1-.258 0L1 6.116V4.5a.5.5 0 0 1 .5-.5z"/>
                                  </svg>                         
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{item.Client_Name}}</h5>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Category</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-bookmarks" viewBox="0 0 16 16">
                                  <path d="M2 4a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v11.5a.5.5 0 0 1-.777.416L7 13.101l-4.223 2.815A.5.5 0 0 1 2 15.5V4zm2-1a1 1 0 0 0-1 1v10.566l3.723-2.482a.5.5 0 0 1 .554 0L11 14.566V4a1 1 0 0 0-1-1H4z"/>
                                  <path d="M4.268 1H12a1 1 0 0 1 1 1v11.768l.223.148A.5.5 0 0 0 14 13.5V2a2 2 0 0 0-2-2H6a2 2 0 0 0-1.732 1z"/>
                                </svg>                       
                            </span>
                            <div class="w-100" *ngIf="item.ReportType">
                                <h5 class="my-1 font-14">{{item.ReportType}} </h5>
                            </div>
                            <div class="w-100" *ngIf="item.ReportType == null">
                                <h5 class="my-1 font-14">No category </h5>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-8 pricevalues text-left pt-3" *ngIf="ifcategoryZero=='0';else Reporttype">
                    <p>Category</p>
                    <h5>
                        <b>NA</b>
                    </h5>
                </div>
                <ng-template #Reporttype>
                    <div class="col-8 pricevalues text-left pt-3">
                        <p>Category</p>
                        <h5>
                            <b>NA</b>
                        </h5>
                    </div>
                </ng-template> -->
                </div>

                <!-- <div class="text-left mt-2">
                <p class="mb-2">CLIENT</p>
                <h5>{{item.Client_Name}}</h5>
            </div> -->
            </div>

            <div class="card-body"
                *ngIf="item.Status!='Completed' && item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'">
                <!-- Percentage Bar -->
                <div class="progress_bar"
                    *ngIf="item.Status!='Completed' && item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'">
                    <div *ngIf="ProjectStatus=='Not Started'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- {{ProjectStatus}} -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="0" data-percentage-value="0"></span>
                        </div>
                    </div>

                    <div *ngIf="ProjectStatus=='Just Started'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- {{ProjectStatus}} -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="10" data-percentage-value="10"></span>
                        </div>
                    </div>

                    <div *ngIf="ProjectStatus=='InProcess'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- {{ProjectStatus}} -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="40" data-percentage-value="40"></span>
                        </div>
                    </div>
                    <div *ngIf="ProjectStatus=='UnderCompletion'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- {{ProjectStatus}} -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="90" data-percentage-value="90"></span>
                        </div>
                    </div>
                    <div *ngIf="ProjectStatus=='Completed'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- {{ProjectStatus}} -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="100" data-percentage-value="100"></span>
                        </div>
                    </div>
                    <div *ngIf="ProjectStatus=='ProjDuration0'">
                        <div class="pro-bar">
                            <small class="progress_bar_title">
                                <!-- Just Started -->
                                <span class="progress_number">{{ProjectPercentage}}</span>
                            </small>
                            <span class="progress-bar-inner bg-today" [ngStyle]='{ width : ProjectPercentage }'
                                data-value="100" data-percentage-value="100"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RACIS -->
        <div class="border-top">
            <div class="  d-flex align-items-center my-3">
                <div class="d-flex flex-grow-1 align-items-center">
                    <div class="name-box text-center">
                        {{initials}}
                    </div>
                    <div class="names-response">
                        <span clas="fs-10">Responsible</span>
                        <h5 class="fs-4 my-1">{{Project_Responsible}}</h5>
                    </div>
                    <!--Transfer-->
                    <div class="ml-2 mt-3 ">
                        <div class="dropdown"
                            *ngIf="(Current_user_ID=='2000' || Current_user_ID == item.OwnerEmpNo|| Current_user_ID == item.Responsible)&& (item.Status!='Completed')">
                            <button class="btn btn-primary btn-sm py-1 px-2 dropdown-toggle no-after"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                (click)="onTransferClick(Pid)" data-toggle="tooltip" title="click to transfer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    style="width: 16px;height: 16px;fill: #fff;">
                                    <path
                                        d="M19.1643 12.0001L12.9572 5.79297L11.543 7.20718L16.3359 12.0001L11.543 16.793L12.9572 18.2072L19.1643 12.0001ZM13.5144 12.0001L7.30728 5.79297L5.89307 7.20718L10.686 12.0001L5.89307 16.793L7.30728 18.2072L13.5144 12.0001Z">
                                    </path>
                                </svg>
                                <span class="ml-1">Project transfer</span>
                            </button>
                            <div id="TransferArea_{{Pid}}"
                                class="dropdown-menu dropdown-menu-right dropdown-menu-fit date-drop3">
                                <ul class="kt-nav pb-0" (click)="$event.stopPropagation();">
                                    <li class="kt-nav__head py-0">
                                        <div>Project Transfer</div>
                                    </li>
                                    <li class="kt-nav__separator"></li>
                                    <div class=" height-scroll h-scr">
                                        <div class="px-4 py-3">
                                            <div class="form-group" id="Transtext_{{Pid}}">
                                                <label> Transfer To <span class="text-danger">*</span> :
                                                    <strong></strong></label>
                                                <ng-select reuired #transfer="ngModel" [(ngModel)]="selectedEmpNo"
                                                    placeholder="Select Employee">
                                                    <ng-option [value]="item.Emp_No" *ngFor="let item of Employee_List">
                                                        <a
                                                            *ngIf="(EmpNo_Res!=item.Emp_No && EmpNo_Own!=item.Emp_No)">{{item.DisplayName}}</a>
                                                    </ng-option>
                                                </ng-select>
                                                <!-- <span style="color:red">Transfer to required!</span>  (Change)="EmployeeOnSelect($event)" (keydown.enter)="onProject_Hold(Pid,_MasterCode);"-->
                                            </div>
                                            <!-- <div class="form-group">
                                                <label>Select New Deadline<span class="text-danger">*</span></label>
                                                <input matInput [matDatepicker]="picker4" id="Transtext_{{Pid}}"
                                                #Transdt="ngModel"
                                                (click)="picker4.open();"
                                                [min]="minhold" [max]="maxhold" placeholder="Select Date"
                                                [(ngModel)]="TransDate" class="form-control"
                                                name="date">
                                                <div class="input-group-append">
                                                        <mat-datepicker-toggle matSuffix [for]="picker4" class="btn-secondary">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker class="form-group" #picker4></mat-datepicker>
                                                </div>
                                            </div> -->
                                            <div class="form-group input-group">
                                                <label>Set new deadline (optional):</label>
                                                <!-- <span class="text-danger">*</span> -->
                                                <div class="input-group">
                                                    <input matInput [matDatepicker]="picker4" #Transdt="ngModel"
                                                        (click)="picker4.open();"
                                                        (keydown.enter)="onProject_Transfer(Pid,_MasterCode);"
                                                        [min]="minhold" [max]="maxhold" placeholder="Select Date"
                                                        [(ngModel)]="TransDate" class="form-control" name="date">
                                                    <div class="input-group-append">
                                                        <mat-datepicker-toggle matSuffix [for]="picker4"
                                                            class="btn-secondary">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker class="form-group" #picker4></mat-datepicker>
                                                    </div>
                                                </div>
                                                <span style="color:gray">Existing Deadline:
                                                    {{item.DeadLine|date:'dd-MM-yyyy'}}</span>
                                            </div>
                                            <div class="form-group">
                                                <label>Remarks<span class="text-danger">*</span>:</label>
                                                <textarea class="form-control" [(ngModel)]="transfer_remarks"
                                                    placeholder="Define your exact reason here." rows="2" cols="20"
                                                    style="height:70px;"></textarea>
                                            </div>
                                            <!-- <span class="text-danger">Note: (*) are mandatory!</span> -->
                                        </div>

                                    </div>
                                </ul>

                                <div class="px-4 pb-3">
                                    <button class="btn btn-info btn-sm mr-2 text-white"
                                        [disabled]="!selectedEmpNo || !transfer_remarks"
                                        (click)="sweetAlert(Pid,_MasterCode)">Submit</button>
                                    <button
                                        *ngIf="item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'"
                                        class="btn btn-outline-info btn-sm text-dark-75"
                                        (click)="onCancel(Pid)">Close</button>
                                    <button
                                        *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'"
                                        class="btn btn-outline-info btn-sm text-dark-75"
                                        (click)="onTransferCancel(Pid)">Close</button>


                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Transfer end-->

                </div>
                <div>
                    <button type="button" class="btn btn-primary btn-sm py-1 pr-2 dwn-arw" (click)="bttn_RACI()">RACIS
                        <i class="ml-1 mb-1 fa fa-chevron-up"></i>
                    </button>
                </div>
            </div>

            <!-- Raci Details -->
            <div class="card border-0 shadow-sm mb-3" [hidden]="_raciDetails" id="raciDetails">
                <div class="card-body">
                    <div class="my-2"><label class=" kt-badge kt-bg-light-primary kt-badge--inline">RACIS
                            Details</label></div>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mt-2 mb-1 text-muted fs-7">Owner</p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-caret-right  fs-2 text-success mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{item.Project_Owner}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mt-2 mb-1 text-muted fs-7">Authority</p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-caret-right  fs-2 text-success mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{item.Team_Autho}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mt-2 mb-1 text-muted fs-7">Coordinator</p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-caret-right  fs-2 text-success mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{item.Team_Coor}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mt-2 mb-1 text-muted fs-7">Informer</p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-caret-right  fs-2 text-success mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{item.Team_Informer}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <p class="mt-2 mb-1 text-muted fs-7">Support</p>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-caret-right  fs-2 text-success mr-2"></i>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{item.Team_Support}}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Raci Ends -->

        <!-- ADD DMS  -->
        <div class=" border-top">
            <div class="d-flex  align-items-center justify-content-between mt-3">
                <div class>
                    <div class="my-0">
                        <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                            <i class="fa fa-file-alt mr-2"></i> DMS Link
                        </label>
                    </div>

                </div>
                <div>
                    <button type="button" class="btn btn-info btn-sm py-1" (click)="AddDms()">
                        <i class="fa fa-chart-bar"></i>Link DMS
                    </button>
                </div>
            </div>

            <div class="card-body">
                <div class="fs-6">
                    <table class="table">
                        <tbody>
                            <tr *ngFor="let itemMemos of _MemosSubjectList; let i=index">
                                <td class="tr-9">
                                    <a href="javascript:void(0)" (click)="openUrl(itemMemos.Url)">
                                        {{itemMemos.Subject}}</a>
                                </td>
                                <td class="align-top curser-pointer" (click)="deleteMemos(itemMemos.MailId)">
                                    <i class="fas fa-trash-alt text-primary"></i>
                                </td>
                            </tr>

                        </tbody>
                        <p style="color:gray">{{_MemosNotFound}}</p>
                    </table>
                </div>
            </div>
            <!-- <div class="text-left">
                <ul class="dms-links">
                    <li
                        *ngFor="let item of _MemosSubjectList; let i=index">
                        <a href="javascript:void(0)"
                            (click)="openUrl(item.Url)"
                            class="curser-pointer">
                            {{item.Subject}}</a>
                    </li>
                    <p style="color:gray">{{_MemosNotFound}}</p>
                </ul>
            </div> -->
        </div>

        <!-- ADD DMS  End-->

        <!-- Linked Portfolios -->
        <div class=" border-top">
            <div class="d-flex  align-items-center justify-content-between mt-3">
                <div class>
                    <div class="my-2">
                        <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                            <i class="fa fa-file-alt mr-2"></i>Portfolio Link
                        </label>
                    </div>
                </div>
                <div>
                    <button type="button" class="btn btn-info btn-sm py-1" (click)="AddPortfolio()">
                        <i class="fa fa-chart-bar"></i>Link Portfolio
                    </button>
                </div>
            </div>
            <!-- <div class="card-body" *ngIf="_portfoliolist; else NoPortfolio">                
                <div *ngFor="let tezz of _portfoliolist; let i=index"  class="port_list border-bottom">                        
                        <div>
                            <a *ngIf="tezz.Portfolio_Name !=''; else NoPortfolio">{{tezz.Portfolio_Name}}</a>                           
                        </div>                       
                </div>              
            </div>     -->
            <div class="card-body">
                <div class="fs-6">
                    <table class="table">
                        <tbody>
                            <tr *ngFor="let tezz of _portfoliolist; let i=index">
                                <td class="tr-9">
                                    <a href="javascript:void(0)"
                                        (click)="OnPortfolioClick(tezz.Portfolio_ID,tezz.Portfolio_Name,tezz.Created_By)"
                                        *ngIf="tezz.Portfolio_Name !=''">{{tezz.Portfolio_Name}}</a>
                                </td>
                                <td class="align-top curser-pointer"
                                    (click)="DeleteProject(Pid,tezz.Portfolio_ID,_MasterCode,_ProjectName,tezz.Created_By)">
                                    <i class="fas fa-trash-alt text-primary" *ngIf="tezz.Portfolio_Name !=''"></i>
                                </td>
                            </tr>

                        </tbody>
                        <!-- <ng-template #NoPortfolio> -->
                        <p style="color:gray">{{noPort}}</p>
                        <!-- </ng-template> -->
                    </table>
                </div>
            </div>
        </div>

        <!-- Linked Portfolios -->

        <!-- Subtask List -->
        <div class=" border-top" *ngFor="let task of Subtask_List;let i=index">
            <div class="d-flex  align-items-center justify-content-between mt-3">
                <div class>
                    <div class="my-2">
                        <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                            <i class="fa fa-window-restore mr-2"></i> Action {{i+1}}
                        </label>
                    </div>
                </div>
            </div>
            <div class="d-flex mt-3 flex-column">
                <h5 class="fs-4 mb-1">{{task.SubProject_Name }}</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Owner</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"></path>
                                  </svg>                       
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{task.Subtask_Owner}}</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Responsible</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"></path>
                                  </svg>                       
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{task.Subtask_Res}}</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Status</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                </svg>                         
                            </span>
                            <div class="w-100">
                                <div *ngIf="task.SubProject_Status=='Under Approval'">
                                    <h5 class="1 my-1 font-14 text-info">
                                        {{task.SubProject_Status}}</h5>
                                    <!-- <span class="bg-success">{{item.Status}}</span> -->
                                </div>
                                <div *ngIf="task.SubProject_Status=='Delay'">
                                    <h5 class="my-1 font-14 text-danger" *ngIf="task.Delayday==0">
                                        {{task.SubProject_Status}}</h5>
                                    <h5 class="my-1 font-14 text-danger" *ngIf="task.Delaydays>0" data-toggle="tooltip"
                                        title="{{task.Delaydays}} days delay!">
                                        {{task.SubProject_Status}} {{task.Delaydays}} days</h5>
                                    <!-- <span class="font-weight-400">{{item.Status}}</span> -->
                                </div>
                                <!-- Other Status -->
                                <div *ngIf="task.SubProject_Status=='InProcess'">
                                    <h5 class="my-1 font-14 text-warning">
                                        {{task.SubProject_Status}}</h5>
                                </div>
                                <div *ngIf="task.SubProject_Status=='ToDo InProcess'">
                                    <h5 class="my-1 font-14 text-primary">
                                        {{task.SubProject_Status}}</h5>
                                </div>
                                <div *ngIf="task.SubProject_Status=='New Project'">
                                    <h5 class="my-1 font-14 text-primary">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='New Project Rejected'">
                                    <h5 class="my-1 font-14 text-danger">
                                        {{task.SubProject_Status}}</h5>

                                </div>

                                <div *ngIf="task.SubProject_Status=='Project Hold'">
                                    <h5 class="my-1 font-14 text-danger">
                                        Hold</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='ToDo Completed'">
                                    <h5 class="my-1 font-14 text-primary">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='New Todo'">
                                    <h5 class="my-1 font-14 text-primary">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Completion Under Approval'">
                                    <h5 class="my-1 font-14 text-primary">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Completed'">
                                    <h5 class="my-1 font-14 text-success">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Forward Under Approval'">
                                    <h5 class="my-1 font-14 text-warning">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Project Complete Rejected'">
                                    <h5 class="my-1 font-14 text-danger">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Enactive Under Approval'">
                                    <h5 class="my-1 font-14 text-danger">
                                        {{task.SubProject_Status}}</h5>

                                </div>

                                <div *ngIf="task.SubProject_Status=='Version'">
                                    <h5 class="my-1 font-14 text-danger">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Deadline Extend Under Approval'">
                                    <h5 class="my-1 font-14 text-info">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Project Holded'">
                                    <h5 style="color: #c0b5dc;" class="my-1 font-14 ">
                                        {{task.SubProject_Status}}</h5>

                                </div>
                                <div *ngIf="task.SubProject_Status=='Project Hold Under Approval'">
                                    <h5 style="color: #c0b5dc;">
                                        {{task.SubProject_Status}}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Action Duration </p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">
                                    {{task.StartDate|date:'dd-MM-yyyy'}}/{{task.SubProject_DeadLine|date:'dd-MM-yyyy'}}
                                </h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Allocated</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                </svg>                           
                            </span>
                            <div class="w-100 d-flex">
                                <h5 class="my-1 font-14" data-toggle="tooltip" title="Action hours!">
                                    {{task.SubtaskAllocated}} Hrs</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Cost</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-wallet" viewBox="0 0 16 16">
                                    <path d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5V3zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a1.99 1.99 0 0 1-1-.268zM1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1z"/>
                                </svg>                             
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{task.Project_Cost|currency:'SAR '}}</h5>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row">   
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Duration</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass" viewBox="0 0 16 16">
                                    <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2h-7z"/>
                                  </svg>
                            </span>
                            <div class="w-100">
                                <h5 *ngIf="item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'"
                                    class="my-1 font-14">
                                    {{task.SubtaskDuration}} days</h5>
                                <h5 *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'"
                                    class="my-1 font-14">
                                    Continuous</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <p class="mt-2 mb-1 text-muted fs-7">Percentage</p>
                        <div class="d-flex align-items-center">
                            <span class="detail-icn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-percent" viewBox="0 0 16 16">
                                    <path d="M13.442 2.558a.625.625 0 0 1 0 .884l-10 10a.625.625 0 1 1-.884-.884l10-10a.625.625 0 0 1 .884 0zM4.5 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm7 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                                  </svg>
                            </span>
                            <div class="w-100">
                                <h5 class="my-1 font-14">{{(task.SubtaskAllocated /
                                    totalSubtaskHours) | percent:'.1-2'}}</h5>
                                <h5 class="my-1 font-14" *ngIf="totalSubtaskHours == 0"> 0% </h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Completed Task  -->
        <div class="border-top" *ngIf="CompletedList != ''">
            <div class="d-block align-items-center justify-content-between mt-3">
                <div class>
                    <div class="my-2">
                        <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                            <i class="fa fa-list mr-2"></i> Action's Done List
                        </label>
                    </div>
                </div>
            </div>
            <div class="" *ngFor="let task of CompletedList;let i=index">
                <div class="text-left mt-3">
                    <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                        <i class="fa fa-window-restore mr-2"></i>Action {{i+1}}
                    </label>
                </div>
                <div class="text-left my-3">
                    <!-- <p class="mb-2">CLIENT</p> -->
                    <h5>{{task.SubProject_Name }}</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Owner</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"></path>
                                      </svg>                       
                                </span>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{task.Subtask_Owner}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Responsible</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"></path>
                                      </svg>                       
                                </span>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{task.Subtask_Res}}</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Status</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                        <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                    </svg>                         
                                </span>
                                <div class="w-100">
                                    <h5 class="my-1 font-14 text-success">Done</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Action Duration </p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                    </svg>                           
                                </span>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">
                                        {{task.StartDate|date:'dd-MM-yyyy'}}/{{task.SubProject_DeadLine|date:'dd-MM-yyyy'}}
                                    </h5>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Allocated</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                    </svg>                           
                                </span>
                                <div class="w-100 d-flex">
                                    <h5 class="my-1 font-14" data-toggle="tooltip" title="Action hours!">
                                        {{task.SubtaskAllocated}} Hrs</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Cost</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-wallet" viewBox="0 0 16 16">
                                        <path d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5V3zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a1.99 1.99 0 0 1-1-.268zM1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1z"/>
                                    </svg>                             
                                </span>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{task.Project_Cost|currency:'SAR '}}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Duration</p>
                            <div class="d-flex align-items-center">
                                <span class="detail-icn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass" viewBox="0 0 16 16">
                                        <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2h-7z"/>
                                      </svg>
                                </span>
                                <div class="w-100">
                                    <h5 *ngIf="item.Exec_BlockName!='Standard Tasks' && item.Exec_BlockName!='Routine Tasks'"
                                        class="my-1 font-14">
                                        {{task.SubtaskDuration}} days</h5>
                                    <h5 *ngIf="item.Exec_BlockName=='Standard Tasks' || item.Exec_BlockName=='Routine Tasks'"
                                        class="my-1 font-14">
                                        Continuous</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <p class="mt-2 mb-1 text-muted fs-7">Percentage</p>
                            <div class="d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-percent" viewBox="0 0 16 16">
                                    <path d="M13.442 2.558a.625.625 0 0 1 0 .884l-10 10a.625.625 0 1 1-.884-.884l10-10a.625.625 0 0 1 .884 0zM4.5 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm7 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                                </svg>
                                <div class="w-100">
                                    <h5 class="my-1 font-14">{{(task.SubtaskAllocated /
                                        totalSubtaskHours) | percent:'.1-2'}}</h5>
                                    <h5 class="my-1 font-14" *ngIf="totalSubtaskHours == 0"> 0% </h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="border-top" *ngIf="AssigntaskList != ''">
            <div class="d-block align-items-center justify-content-between mt-3">

                <div class="my-2">
                    <button type="button" id="asgnid-colpse" (click)="scrldwn()"
                        class="btn btn-primary btn-sm py-1 d-flex align-items-center asgn-colpse collapsed"
                        data-toggle="collapse" data-target="#assignlapse" aria-expanded="false"><i
                            class="fa fa-chart-bar"></i>Assigned Details <i class="fa fa-chevron-up ml-2 m-0"></i>
                    </button>
                    <!-- <label class=" kt-badge kt-bg-light-primary kt-badge--inline">
                        <i class="fa fa-list mr-2"></i> Assigned Details
                    </label>     -->

                </div>
                <div *ngFor="let item of AssigntaskList" id="assignlapse" class="collapse"
                    aria-labelledby="assignlapse">
                    <div class="text-left mt-3">
                        <div class="d-flex mt-3 flex-column">
                            <h5 class="fs-3 mb-2">{{item.Task_Name}}</h5>
                            <span class="text-muted fs-5">{{item.Task_Description}}</span>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <p class="mt-2 mb-1 text-muted fs-7">Assigned By:</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-user-tie fs-3 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h5 class="my-1 font-14">{{item.AssignedBy}} </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <p class="mt-2 mb-1 text-muted fs-7">Assigned Date:</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-calendar-alt fs-2 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h5 class="my-1 font-14">{{item.Creation_Date | date:'dd-MM-yyyy'}}</h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <p class="mt-2 mb-1 text-muted fs-7">Assigned To:</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-user-tie fs-3 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h5 class="my-1 font-14">{{item.AssignedTo}} </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <p class="mt-2 mb-1 text-muted fs-7">Status</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-star fs-3 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h5 class="my-1 font-14 text-success">{{item.Status}}</h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <p class="mt-2 mb-1 text-muted fs-7"> Duration </p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-calendar-alt fs-2 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h5 class="my-1 font-14">
                                                {{item.Start_Date | date:'dd-MM-yyyy'}}/{{item.End_Date | date:'dd-MM-yyyy'}}
                                            </h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4" *ngIf="item.FileName">
                                    <p class="mt-2 mb-1 text-muted fs-7" *ngIf="item.FileName">Attachments</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-file-pdf fs-2 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h6 class="my-1 font-14">{{item.FileName}}</h6>
                                        </div>
                                        <!-- <div class="w-100">
                                            <i class="fas fa-file-pdf text-muted mr-1"
                                                *ngIf="item.FileName">{{item.FileName}}</i>
                                        </div> -->
                                    </div>
                                </div>
                                <div class="col-md-4" *ngIf="item.Remarks != '' && item.Remarks!='null'">
                                    <p class="mt-2 mb-1 text-muted fs-7"
                                        *ngIf="item.Remarks != '' && item.Remarks!='null'">Remarks</p>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-registered fs-2 text-muted mr-2"></i>
                                        <div class="w-100">
                                            <h6 class="my-1 font-14">{{item.Remarks}}</h6>
                                        </div>
                                    </div>
                                    <!-- <div class="d-flex align-items-center">

                                        <div class="w-100">
                                            <i class="fas fa-registered text-muted mr-1 my-1 font-14"
                                                *ngIf="item.Remarks != '' && item.Remarks!='null'">{{item.Remarks}}</i>

                                        </div>
                                    </div> -->
                                </div>
                            </div>


                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>


    <button class="btn22 btn btn-label-primary btn-pill btn-sm mr-2 d-none" (click)="btmspace_opn()">Edit Tab</button>

    <div class="spacer-tab d-none" id="btm-space">
        <div class="spacer--body">
            <div class="">

                <ul class="kt-nav pb-0">
                    <li class="kt-nav__head py-0">
                        <div>New End Date<br>Action: <b>Project_Name</b></div>
                    </li>
                    <li class="kt-nav__separator"></li>
                    <div class="height-scroll h-scr">
                        <div class="px-4 py-3">

                            <div class="form-group">
                                <label> Transfer To <span class="text-danger">*</span>
                                </label>
                                <select reuired="" placeholder="Select Employee" class="form-control">
                                    <option>Select</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Set new End Date <span class="text-danger">*</span></label>
                                <div class="d-flex input-group">
                                    <input placeholder="Select Date" class="form-control" name="date">
                                    <div class="input-group-append">
                                        <mat-datepicker-toggle matSuffix [for]="picker5" class="btn-secondary">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker class="form-group" #picker5></mat-datepicker>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mb-1">
                                <label>Remarks <span class="text-danger">*</span></label>
                                <textarea placeholder="" rows="2" cols="20" class="form-control"
                                    style="height: 70px;"></textarea>
                            </div>
                        </div>
                    </div>
                    <li class="kt-nav__separator"></li>
                </ul>
                <div class="px-4 pb-3">
                    <button class="btn btn-info btn-sm mr-2 text-white"> Submit </button>
                    <button class="btn btn-outline-info btn-sm text-dark-75" (click)="close_space()">Close</button>
                </div>


            </div>
        </div>
    </div>


</div>
<!-- <div id="fade" onclick="document.getElementById('date_edt').style.display='none';document.getElementById('hold_pro').style.display='none';document.getElementById('div-pro1').style.display='none';document.getElementById('fade').style.display='none'" class="black_overlay"></div> -->