<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid margin-height side_view" id="timepage">

    <div class="row">
        <div class="col-lg-12">
            <!--begin:: Widgets/Authors Profit-->
            <div class="kt-portlet kt-portlet--bordered-semi mb-2">
                <div class="kt-portlet__head align-items-center">
                    <div class="kt-portlet__head-label">
                        <div class="dropdown">
                            <h3 class="kt-portlet__head-title cursor-pointer dropdown-toggle select-box"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                {{Type}}
                            </h3>
                            <div class="dropdown-menu main-d" aria-labelledby="dropdownMenuButton">
                                <a [ngClass]="Type==type1 ? 'dropdown-item active' : 'dropdown-item'"  (click)="timelineLog(type1)">{{type1}}</a>
                                <a [ngClass]="Type==type2 ? 'dropdown-item active' : 'dropdown-item'"  (click)="timelineLog1(type2)">{{type2}}</a>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <!-- <div class="d-flex align-items-center mr-2">

                            <div class="mr-3">
                                <ng-container *ngIf="CurrentPageNo==1">
                                    {{CurrentPageNo}} - {{_CurrentpageRecords}}
                                </ng-container>
                                <ng-container *ngIf="CurrentPageNo!=1 && CurrentPageNo!=LastPage">
                                    {{_CurrentpageRecords * (CurrentPageNo-1) + 1}} - {{_CurrentpageRecords *
                                    CurrentPageNo}}
                                </ng-container>
                                <ng-container *ngIf="CurrentPageNo==LastPage  && CurrentPageNo!=1">
                                    {{lastPagerecords * (CurrentPageNo-1) + 1}} - {{lastPagerecords * (CurrentPageNo-1) + _CurrentpageRecords}}
                                </ng-container>
                                <span>52</span>
                            </div>
                            <button class="btn btn-label-primary btn-upper btn-sm btn-bold mr-1"
                                    (click)="CurrentPageNo = CurrentPageNo - 1;timelineLog(Type)" [disabled]="CurrentPageNo==1">
                                <i class="fas fa-angle-left mr-0"></i>
                            </button>

                            <button class="btn btn-label-primary btn-upper btn-sm btn-bold mr-1"
                                (click)="CurrentPageNo = CurrentPageNo + 1; timelineLog(Type)"
                                    [disabled]="_CurrentpageRecords<30">
                                <i class="fas fa-angle-right mr-0"></i>
                            </button>
                        </div> -->
                        <div class="mr-2"><span>Total achievement hours: {{timelineDuration | number:'1.2-2'}} hrs</span></div>

                        <div class="dropdown">
                            <button class="btn-pill btn btn-sm btn-sort mr-2 dropdown-toggle no-after"
                                id="srt-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-sort-down desc-ar" viewBox="0 0 16 16">
                                    <path d="M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"/>
                                </svg>

                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sort-up asc-ar" viewBox="0 0 16 16">
                                    <path d="M3.5 12.5a.5.5 0 0 1-1 0V3.707L1.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 3.707V12.5zm3.5-9a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"/>
                                  </svg>
                                  <a class="ordr-a" href="javascritp:void(0)">{{sortType}}</a>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right sort-drop" aria-labelledby="srt-btn">
                                <span class="sort-by pb-2">Sort by</span>
                                <a [ngClass]="activeDate? 'dropdown-item active' : 'dropdown-item'" (click)="sortTimeline(sort1)">Date
                                    <span *ngIf="activeDate==true">
                                        <!-- <a class="sort-a" href="javascritp:void(0)">(desc)</a> -->
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check ckc-icn" viewBox="0 0 16 16">
                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                        </svg>
                                    </span>
                                </a>
                                <a [ngClass]="activeProject? 'dropdown-item active' : 'dropdown-item'" (click)="sortTimeline(sort2)">
                                    Project
                                    <span *ngIf="activeProject==true">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check ckc-icn" viewBox="0 0 16 16">
                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                        </svg>
                                    </span>
                                </a>
                                <!-- <a class="dropdown-item" (click)="notinAction()">User</a> -->
                            </div>
                        </div>
                        <button type="button" class="btn btn-info btn-sm btn-fw" (click)="darcreate()"> Create timeline </button>
                    </div>
                </div>
            </div>
            <!--begin::Portlet 1 class="sticky-header" style="font-size: 13px;"-->
            <div class="kt-portlet portlet-height" *ngIf="sortType=='Date'">
                <div class="kt-portlet__body kt-portlet__body_scroll p-0 scrollbar1">
                    <div class="mt-3">
                        <div class="">
                            <div class="" *ngIf="showtimeline==true">
                                <div class="px-4" *ngFor="let item of darArray;let i =index">
                                    <div class="timeline-header sticky-header">
                                        <h4 class="header-date p-0 ">
                                            {{item.SubmissionDate | date: 'fullDate'}}
                                        </h4>
                                    </div>
                                    <div class="">
                                        <table class="time-table mb-1">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px;">S.No.</th>
                                                    <th style="width: 280px;">Employee</th>
                                                    <th style="width: 280px;">Type</th>
                                                    <th>Achievement</th>
                                                    <th style="width: 80px;">Start</th>
                                                    <th style="width: 80px;">End</th>
                                                    <th style="width: 80px;">Time</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item1 of item.Dardata;let j=index">
                                                    <td>{{j+1}}</td>
                                                    <td>
                                                        <div class="d-flex">
                                                            <div class="initial-box color-7 b-50 mr-2">{{item1.Initial}}
                                                            </div>
                                                            <span class="user--name">{{item1.EmpName}}</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <a class="pro-link" href="javascript:void(0)" *ngIf="item1.ProjectName && item1.Tasktype!='Lunch' && item1.Tasktype!='Personal'" (click)="newDetails(item1.project_code)">{{item1.ProjectName }}</a>
                                                        <a *ngIf="item1.Tasktype=='Lunch'">Lunch</a>
                                                        <a *ngIf="item1.Tasktype=='Personal'">Personal</a>
                                                        <a *ngIf="!item1.ProjectName && item1.Tasktype!='Lunch' && item1.Tasktype!='Personal'">{{item1.Tasktype }}</a>
                                                        <div class="timeline-text fs-6 " *ngIf="item1.ActionName && item1.ActionName!=item1.ProjectName"><span class="desp-txt fs-7 actlabel-at-type">Action</span>{{item1.ActionName }}</div>
                                                    </td>
                                                    <td>{{item1.WorkAchieved}}</td>
                                                    <td>{{item1.starttime}}</td>
                                                    <td>{{item1.endtime}}</td>
                                                    <td>{{item1.Duration}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="time-totals mb-3">
                                        <div class="">
                                            <ul class="time-totals-list">
                                                <li class="totals-list--item">
                                                    <span><strong>Total hours: </strong></span>
                                                    <span>{{item.TotalDuration}} hrs</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div style="text-align:center" *ngIf="Type=='My Timeline'">
                                     <button class="btn btn-info loadMore"
                                         (click)="CurrentPageNo = CurrentPageNo + 1; loadMore()"
                                        [hidden]="_CurrentpageRecords<30">
                                        Load more!</button>
                                </div>
                                <div style="text-align:center" *ngIf="Type=='RACIS Timeline'">
                                     <button class="btn btn-info loadMore"
                                    (click)="CurrentPageNo = CurrentPageNo + 1; loadMore1()"
                                   [hidden]="_CurrentpageRecords<30">
                                   Load more!</button>
                                </div>
                            </div>
                            <div class="text-center py-4" style="color: lightgrey"  *ngIf="showtimeline==false">
                                <h4>No timeline found.</h4>
                                <p>Please <a href="javascript:void(0)" (click)="darcreate()"><u>click here</u></a> to create timeline</p>
                            </div>
                        </div>
                        <div class="timeline d-none">
                            <div class="timeline-header sticky-header">
                                <span class="header-text header-date d-none">
                                    14, March 2023
                                </span>
                                <a class="pro-name" href="javascript:void(0)">
                                    <span class="header-text">Stream application(creative Planner) development</span>
                                </a>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(creative Planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Notifications and timeline activity modules in dashboard page</div>
                                        <div class="timeline-text fs-6 achv-txt">Rebinding done in notifications page for the responses from the users after clicking on more info icon.</div>

                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>


                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(Creative planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Runway module For assign project and action to project</div>
                                        <div class="timeline-text fs-6 achv-txt">Action to project service update for the list of projects to be shown in runway page.</div>


                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>

                            <div class="timeline-header sticky-header">
                                <span class="header-text header-date">
                                    13, March 2023
                                </span>
                                <a class="pro-name d-none" href="javascript:void(0)">
                                    <span class="header-text">Stream application(Creative planner) development</span>
                                </a>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(Creative planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Runway module for assign project and action to project</div>
                                        <div class="timeline-text fs-6 achv-txt">Action to project service update for the list of projects to be shown in runway page.</div>


                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>


                        </div>
                    </div>
                </div>
            </div>
            <!--begin::Portlet 2-->
            <div class="kt-portlet portlet-height" *ngIf="sortType=='Project'">
                <div class="kt-portlet__body kt-portlet__body_scroll pt-0 scrollbar1">
                    <div class="mt-3">
                        <div class="">
                            <div class="item-b  ribbon-content " *ngIf="showtimeline==true">
                                <div class="mt-3" *ngFor="let item of darArray;let i =index">
                                    <div class="timeline-header sticky-header">
                                        <h4 class="header-date p-0 ">
                                            <a class="pro-link" href="javascript:void(0)" (click)="newDetails(item.project_code)">{{item.ProjectName }}</a>
                                        </h4>
                                    </div>
                                    <div class="">
                                        <table class="time-table mb-1">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px;">S.No.</th>
                                                    <th style="width: 280px;">Employee</th>
                                                    <th style="width: 280px;">Achieved date</th>
                                                    <th>Achievement</th>
                                                    <th style="width: 80px;">Start</th>
                                                    <th style="width: 80px;">End</th>
                                                    <th style="width: 80px;">Time</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item1 of item.Dardata;let j=index">
                                                    <td>{{j+1}}</td>
                                                    <td>
                                                        <div class="d-flex">
                                                            <div class="initial-box color-7 b-50 mr-2">{{item1.Initial}}
                                                            </div>
                                                            <span class="user--name">{{item1.EmpName}}</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="timeline-text fs-6">{{item1.date | date:'fullDate'}}</div>
                                                    </td>
                                                    <td>
                                                        <div class="timeline-text fs-6" *ngIf="item1.ActionName && item1.ActionName!=item1.ProjectName">
                                                            <span class="desp-txt fs-7">Action</span><u>{{item1.ActionName }}</u></div>
                                                        {{item1.WorkAchieved}}
                                                    </td>
                                                    <td>{{item1.starttime}}</td>
                                                    <td>{{item1.endtime}}</td>
                                                    <td>{{item1.Duration}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="time-totals mb-3">
                                        <div class="">
                                            <ul class="time-totals-list">
                                                <li class="totals-list--item">
                                                    <span><strong>Total hours: </strong></span>
                                                    <span>{{item.TotalDuration}} hrs</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div style="text-align:center">
                                     <button class="btn btn-info loadMore"
                                         (click)="CurrentPageNo = CurrentPageNo + 1; loadMorebySort()"
                                        [hidden]="_CurrentpageRecords<30">
                                        Load more!</button>
                                </div>
                            </div>
                            <div class="text-center py-4" style="color: lightgrey"  *ngIf="showtimeline==false">
                                <h4>No timeline found.</h4>
                                <p>Please <a href="javascript:void(0)" (click)="darcreate()"><u>click here</u></a> to create timeline</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--end::Portlet 2-->
        </div>
    </div>
</div>



<div id="darsidebar" class="sideInfobar animate-right">
    <div class="kt-portlet">

    <div class="kt-portlet__head">
        <div class="offcanvas-header d-flex align-items-center justify-content-between pb-2">
            <h4 class="m-0">Timeline submission</h4>
            <a href="javascript:void(0)" class="closebtn btn btn-xs btn-icon btn-hover-info" (click)="closedarBar()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path fill="none" d="M0 0h24v24H0z"></path><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path>
                </svg>
            </a>
        </div>
    </div>

    <div class=" kt-portlet__body pb-0 pt-3 sidehf_scroll scroll-y">

        <div>
            <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0" >
                <label>Type<span class="text-danger">*</span></label>
                <ng-select required #type="ngModel" name="type" placeholder="Select Type" id="projType" [ngClass]="{'error-vd': (fieldRequired&&!project_type)}"
                    [(ngModel)]="project_type" (change)="onTypeChanged()">
                    <ng-option value="core">Core/Secondary tasks</ng-option>
                    <ng-option value="standard">Standard/Routine/ToDo tasks</ng-option>
                    <ng-option value="lunch">Lunch</ng-option>
                    <ng-option value="personal">Personal</ng-option>
                </ng-select>
                <span style="color:red" *ngIf="(fieldRequired&&!project_type)">Please select project type.</span>
            </div>
            <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0" *ngIf="showProject==true">
                <label>Project <span class="text-danger">*</span></label>

                <ng-select required #project="ngModel" name="project" placeholder="Select Project" id="projName" [ngClass]="{'error-vd': (fieldRequired&&!master_code)}"
                    [(ngModel)]="master_code" (change)="getTimelineActions(); getPADetails(master_code,'PROJECT'); ">
                    <ng-option [value]="item.Project_Code" *ngFor="let item of projectList">
                        {{item.Project_Name }}
                    </ng-option>
                </ng-select>

                    <div  class="txtm-cus mt-1 ml-1 ng-star-inserted  d-flex  align-items-center flex-wrap gap-1    " *ngIf="p_details&&master_code">
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{p_details.StartDate|date:'dd-MM-yyyy'}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{p_details.EndDate|date:'dd-MM-yyyy'}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-star mr-1"></i>{{p_details.Status}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-clock mr-1"></i>Allocated hours : {{p_details.AllocatedHours}}</span>
                        <span class="d-inline-flex align-items-center mr-2">
                            <svg width="16px" height="16px" class="mr-1" fill="#757575" viewBox="-2.16 -2.16 28.32 28.32" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" stroke="#757575"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.144"></g><g id="SVGRepo_iconCarrier"> <path d="M23.707,16.325a1,1,0,0,0-1.414,0l-5.627,5.628L13.978,19.3A1,1,0,0,0,12.543,20.7L15.287,23.4a1.876,1.876,0,0,0,1.345.6h.033A1.873,1.873,0,0,0,18,23.447l5.707-5.708a1,1,0,0,0,0-1.414Z M11.09,21.959A10,10,0,1,1,22,12c0,.307-.015.611-.041.911A1,1,0,0,0,22.866,14a.989.989,0,0,0,1.085-.907C23.983,12.73,24,12.367,24,12A12,12,0,1,0,10.91,23.951c.031,0,.061,0,.091,0a1,1,0,0,0,.089-2Z M11,7v4.586L8.293,14.293a1,1,0,1,0,1.414,1.414l3-3A1,1,0,0,0,13,12V7a1,1,0,0,0-2,0Z"></path></g></svg>
                            Used hours : {{p_details.usedHours}}</span>
                        <span class="d-inline-flex align-items-center mr-2 ">
                            <svg width="16px" height="16px" class="mr-1" viewBox="-1.2 -1.2 26.40 26.40" fill="#757575" xmlns="http://www.w3.org/2000/svg" stroke="#757575" stroke-width="0.5"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22.9504 13.051C22.9832 12.7051 23 12.3545 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C12.3545 23 12.7051 22.9832 13.051 22.9504C12.4841 22.3838 12.014 21.7204 11.6675 20.9871C6.85477 20.8122 3.00683 16.8555 3.00683 12C3.00683 7.03321 7.03321 3.00683 12 3.00683C16.8555 3.00683 20.8122 6.85477 20.9871 11.6675C21.7204 12.014 22.3838 12.4841 22.9504 13.051Z" fill="#757575"></path> <path d="M13.8426 12.3677L13 11.8812V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44771 11 6V12.4667C11 12.4667 11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346L12.3766 13.8307C12.7902 13.2737 13.2847 12.7802 13.8426 12.3677Z" fill="#757575"></path> <path d="M16 17C15.4477 17 15 17.4477 15 18C15 18.5523 15.4477 19 16 19H20C20.5523 19 21 18.5523 21 18C21 17.4477 20.5523 17 20 17H16Z" fill="#757575"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24 18C24 21.3137 21.3137 24 18 24C14.6863 24 12 21.3137 12 18C12 14.6863 14.6863 12 18 12C21.3137 12 24 14.6863 24 18ZM13.9819 18C13.9819 20.2191 15.7809 22.0181 18 22.0181C20.2191 22.0181 22.0181 20.2191 22.0181 18C22.0181 15.7809 20.2191 13.9819 18 13.9819C15.7809 13.9819 13.9819 15.7809 13.9819 18Z" fill="#757575"></path> </g></svg>
                            Remaining hours :&nbsp;<span *ngIf="p_details.remainingHours!==null&&p_details.remainingHours!==undefined"  [ngStyle]="{'color':p_details.remainingHours>0?'darkgray':'red'}"  >{{p_details.remainingHours>0?p_details.remainingHours:0}}</span></span>

                    </div>
                    <span style="color:red" *ngIf="(fieldRequired&&!master_code)" >Please select a project.</span>

            </div>
            <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0" *ngIf="showAction==true && project_type=='core'">
                <label>Action <span class="text-danger">*</span></label>
                <ng-select required #action="ngModel" name="action" placeholder="Select Action" id="actinName" [ngClass]="{'error-vd': (fieldRequired&&!project_code)}"
                [ngClass]="{'error-vd': (noact_msg==true && project_type=='core')}"
                    [(ngModel)]="project_code"  (change)="getPADetails(project_code,'ACTION');  prostate(project_code);">
                    <ng-option [value]="item.Project_Code" *ngFor="let item of actionList">
                        {{item.Project_Name }}
                    </ng-option>
                </ng-select>

                <div class="txtm-cus mt-1 ml-1 ng-star-inserted d-flex align-items-center flex-wrap gap-1 "  *ngIf="a_details&&project_code">
                    <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{a_details.StartDate|date:'dd-MM-yyyy'}}</span>
                    <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{a_details.EndDate|date:'dd-MM-yyyy'}}</span>
                    <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-star mr-1"></i>{{a_details.Status}}</span>
                    <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-clock mr-1"></i>Allocated hours : {{a_details.AllocatedHours}}</span>
                    <span class="d-inline-flex align-items-center mr-2">
                        <svg width="16px" height="16px" class="mr-1" fill="#757575" viewBox="-2.16 -2.16 28.32 28.32" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" stroke="#757575"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.144"></g><g id="SVGRepo_iconCarrier"> <path d="M23.707,16.325a1,1,0,0,0-1.414,0l-5.627,5.628L13.978,19.3A1,1,0,0,0,12.543,20.7L15.287,23.4a1.876,1.876,0,0,0,1.345.6h.033A1.873,1.873,0,0,0,18,23.447l5.707-5.708a1,1,0,0,0,0-1.414Z M11.09,21.959A10,10,0,1,1,22,12c0,.307-.015.611-.041.911A1,1,0,0,0,22.866,14a.989.989,0,0,0,1.085-.907C23.983,12.73,24,12.367,24,12A12,12,0,1,0,10.91,23.951c.031,0,.061,0,.091,0a1,1,0,0,0,.089-2Z M11,7v4.586L8.293,14.293a1,1,0,1,0,1.414,1.414l3-3A1,1,0,0,0,13,12V7a1,1,0,0,0-2,0Z"></path></g></svg>
                        Used hours : {{a_details.usedHours}}</span>
                    <span class="d-inline-flex align-items-center mr-2">
                        <svg width="16px" height="16px" class="mr-1" viewBox="-1.2 -1.2 26.40 26.40" fill="#757575" xmlns="http://www.w3.org/2000/svg" stroke="#757575" stroke-width="0.5"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22.9504 13.051C22.9832 12.7051 23 12.3545 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C12.3545 23 12.7051 22.9832 13.051 22.9504C12.4841 22.3838 12.014 21.7204 11.6675 20.9871C6.85477 20.8122 3.00683 16.8555 3.00683 12C3.00683 7.03321 7.03321 3.00683 12 3.00683C16.8555 3.00683 20.8122 6.85477 20.9871 11.6675C21.7204 12.014 22.3838 12.4841 22.9504 13.051Z" fill="#757575"></path> <path d="M13.8426 12.3677L13 11.8812V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44771 11 6V12.4667C11 12.4667 11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346L12.3766 13.8307C12.7902 13.2737 13.2847 12.7802 13.8426 12.3677Z" fill="#757575"></path> <path d="M16 17C15.4477 17 15 17.4477 15 18C15 18.5523 15.4477 19 16 19H20C20.5523 19 21 18.5523 21 18C21 17.4477 20.5523 17 20 17H16Z" fill="#757575"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24 18C24 21.3137 21.3137 24 18 24C14.6863 24 12 21.3137 12 18C12 14.6863 14.6863 12 18 12C21.3137 12 24 14.6863 24 18ZM13.9819 18C13.9819 20.2191 15.7809 22.0181 18 22.0181C20.2191 22.0181 22.0181 20.2191 22.0181 18C22.0181 15.7809 20.2191 13.9819 18 13.9819C15.7809 13.9819 13.9819 15.7809 13.9819 18Z" fill="#757575"></path> </g></svg>
                        Remaining hours :&nbsp;<span *ngIf="a_details.remainingHours!==null&&a_details.remainingHours!==undefined" [ngStyle]="{'color':a_details.remainingHours>0?'darkgray':'red'}">{{a_details.remainingHours>0?a_details.remainingHours:0}}</span></span>

                </div>
                <span style="color:red" *ngIf="(fieldRequired&&!project_code)"   >Please select an action.</span>
                <span style="color:red" *ngIf="(noact_msg==true && project_type=='core')">You do not have any action assigned, Please create atleast one action to submit timeline</span>
            </div>
            <div class="form-group">
                <label>Work description<span class="text-danger">*</span></label>
                <textarea #tlwdes="ngModel" type="text" name="work" class="form-control h-100px" [ngClass]="{'error-border': (fieldRequired&&!workdes)}" [(ngModel)]="workdes" placeholder="Define your achievement here."></textarea>
                <span style="color:red" *ngIf="(fieldRequired&&!workdes)" >Work description is required.</span>
            </div>
            <div class="form-group timeline-date">
                <label>Date<span class="text-danger">*</span></label>
                <div class="input-group">
                    <input (dateChange)="orgValueChange($event)"  [value]="dateF.value"
                        [matDatepicker]="picker1" id="d-date" required (click)="picker1.open()"
                        [min]="disablePreviousDate"  [max]="todayDate" placeholder="Select Date" class="form-control"
                        name="date" >
                    <div class="input-group-text p-0">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </div>
                </div>
                <!-- <span style="color:red"  *ngIf="(fieldRequired&&!dateF.value)" >date required.</span> -->
            </div>
            <div class="d-flex gap-1">
                <div class="form-group w-100">
                    <label>Start time<span class="text-danger">*</span></label>
                    <ng-select #TLStrtTime="ngModel"  name="time" placeholder="Select Start Time" id="time-start" (click)="getDarTime()" [ngClass]="{'error-vd': (fieldRequired&&!starttime)}"
                        [(ngModel)]="starttime">
                        <ng-option [value]="item" *ngFor="let item of timedata; let i=index"
                            [disabled]="item!=lastEndtime && bol==false">
                            <a>{{item}}</a>
                        </ng-option>
                    </ng-select>
                    <span style="color:red" *ngIf="(fieldRequired&&!starttime)">Start time is required.</span>
                </div>
                <div class="form-group w-100">
                    <label>End time<span class="text-danger">*</span></label>
                    <ng-select name="endtim" #end="ngModel" placeholder="Select End Time" id="time-end" [ngClass]="{'error-vd': (fieldRequired&&!endtime)}"
                    [ngClass]="{'error-vd': (endtime < starttime)}"
                        (click)="getDarTime()" [(ngModel)]="endtime">
                        <ng-option [value]="item" *ngFor="let item of timedata; let i=index"
                            [disabled]="item<=lastEndtime">
                            <a>{{item}}</a>
                        </ng-option>
                    </ng-select>
                    <span style="color:red" *ngIf="(fieldRequired&&!endtime)"  >End time is required.</span>
                    <span style="color:red" id="err1" *ngIf="(endtime < starttime)">End time cannot be less than start
                        time!!</span>
                </div>
            </div>



            <ng-container  *ngIf="project_type==='core'&&project_code&&bothActTlSubm">

                <div class="form-group mt-3">
                    <label>Attachments</label><span *ngIf="ProState" style="color:red">*</span>
                    <div class="input-group mb-3" #uploadFile  [ngClass]="{'error-border': (ProState&&fieldRequired&&!selectedFile)}" >
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-upload" viewBox="0 0 16 16">
                                    <path
                                        d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                                    <path
                                        d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
                                </svg>
                            </span>
                        </div>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="uploadFile" (change)="onFileChange($event)" />
                            <label class="custom-file-label" id="_upload" for="uploadFile">
                                <ng-container *ngIf="_inputAttachments==='';else fileprovided">
                                    Select a file
                                </ng-container>
                                <ng-template #fileprovided>
                                    {{_inputAttachments}}
                                </ng-template>
                            </label>
                        </div>
                    </div>

                    <span class="text-info"> *Accept only pdf files</span><br/>
                    <span style="color:red" *ngIf="(ProState&&fieldRequired&&!selectedFile)">please provide file attachment.</span>

                </div>
                <div class="form-group">
                    <label for="exampleFormControlFile1">Remarks<span class="text-danger">*</span> </label>
                    <textarea #TLremarksf="ngModel"  class="form-control" [ngClass]="{'error-border': (fieldRequired&&!_remarks)}" aria-label="With textarea" placeholder="Define your exact reason here."
                    [(ngModel)]="_remarks" style="margin-top: 0px; margin-bottom: 0px; height: 160px;"></textarea>
                     <span style="color:red" *ngIf="(fieldRequired&&!_remarks)" >remarks required.</span>
                </div>
             </ng-container>

             <ng-container *ngIf="project_type==='core'&&project_code">
                <!-- *ngIf="projectActionInfo&&projectActionInfo[currentActionView]" -->
                <div class="d-flex align-items-center" >
                    <!-- *ngIf="['Delay','InProcess'].includes(projectActionInfo[currentActionView].Status)" -->
                        <input type="checkbox" id="actioncompl" class="mr-2" [(ngModel)]="bothActTlSubm" style="accent-color: green; width:15px; height:15px;"/>
                        <label for="actioncompl" class="mb-0 font-weight-normal"> Complete this action </label>
                </div>
              </ng-container>


        </div>
    </div>


    <div class="kt-portlet__foot py-3">
        <!-- <button type="submit" class="btn btn-sm btn-info" (click)="submitDar()" *ngIf="showAction==true"
            [disabled]="!master_code || !project_code || !workdes || !starttime || !endtime || endtime < starttime||(bothActTlSubm&&!_remarks)">
            Submit</button>
        <button type="submit" class="btn btn-info btn-sm" (click)="submitDar()" *ngIf="showAction==false"
            [disabled]=" !master_code ||  !workdes  || !starttime || !endtime || endtime < starttime">
            Submit</button> -->

            <button type="submit" class="btn btn-sm btn-info" (click)="onTLSubmitBtnClick()">Submit</button>

        <button type="reset" class="btn btn-secondary btn-sm ml-2" (click)="clear()">Reset</button>
        <button type="submit" class="btn btn-secondary btn-sm ml-2" (click)="closedarBar()">Cancel</button>
    </div>


    </div>
</div>


<div id="rightbar-overlay" (click)="closeInfo()"></div>
