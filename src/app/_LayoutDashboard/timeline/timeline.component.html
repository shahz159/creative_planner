<ng-container *ngIf="userFound!==undefined;else pleasewait">
  <ng-container *ngIf="(userFound===true)">

<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid margin-height side_view" id="timepage">
    <div class="row">
        <div class="col-lg-12">
            <!--begin:: Widgets/Authors Profit-->
            <div class="kt-portlet kt-portlet--bordered-semi mb-2">
                <div class="kt-portlet__head align-items-center">
                    <div class="kt-portlet__head-label">
                        <div class="dropdown">
                            <h3 class="kt-portlet__head-title cursor-pointer dropdown-toggle select-box"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                {{Type}}
                            </h3>
                            <div class="dropdown-menu main-d" aria-labelledby="dropdownMenuButton">
                                <a [ngClass]="Type==type1 ? 'dropdown-item active' : 'dropdown-item'"  (click)="timelineLog(type1);">{{type1}}</a>
                                <a [ngClass]="Type==type2 ? 'dropdown-item active' : 'dropdown-item'"  (click)="timelineLog1(type2);  setFilterInfo('Date',undefined); ">{{type2}}</a>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <!-- <div class="d-flex align-items-center mr-2">

                            <div class="mr-3">
                                <ng-container *ngIf="CurrentPageNo==1">
                                    {{CurrentPageNo}} - {{_CurrentpageRecords}}
                                </ng-container>
                                <ng-container *ngIf="CurrentPageNo!=1 && CurrentPageNo!=LastPage">
                                    {{_CurrentpageRecords * (CurrentPageNo-1) + 1}} - {{_CurrentpageRecords *
                                    CurrentPageNo}}
                                </ng-container>
                                <ng-container *ngIf="CurrentPageNo==LastPage  && CurrentPageNo!=1">
                                    {{lastPagerecords * (CurrentPageNo-1) + 1}} - {{lastPagerecords * (CurrentPageNo-1) + _CurrentpageRecords}}
                                </ng-container>
                                <span>52</span>
                            </div>
                            <button class="btn btn-label-primary btn-upper btn-sm btn-bold mr-1"
                                    (click)="CurrentPageNo = CurrentPageNo - 1;timelineLog(Type)" [disabled]="CurrentPageNo==1">
                                <i class="fas fa-angle-left mr-0"></i>
                            </button>

                            <button class="btn btn-label-primary btn-upper btn-sm btn-bold mr-1"
                                (click)="CurrentPageNo = CurrentPageNo + 1; timelineLog(Type)"
                                    [disabled]="_CurrentpageRecords<30">
                                <i class="fas fa-angle-right mr-0"></i>
                            </button>
                        </div> -->
                        <div class="mr-2"><span>Total achievement hours: {{timelineDuration | number:'1.2-2'}} hrs</span></div>









    <div class="d-flex">
                            <div class="kt-flter-ic-b br-0">
                                <div class="dropdown">
                                    <a type="button" id="Filter_btn" (click)="previous_filter()">
                                      <ng-container >
                                        <span class="previous-dot active" id="previous-dot"></span>
                                    </ng-container>
                                      <svg xmlns="http://www.w3.org/2000/svg"
                                      fill="currentColor" aria-hidden="true" role="img"
                                      font-size="1.5rem" width="1em" height="1em"
                                      viewBox="0 -1 17 17" class="iconify iconify--mdi">
                                      <path
                                          d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z">
                                      </path>
                                  </svg>
                                  <!-- {{sortType}} -->
                                    </a>
                                    <div id="dropd" aria-labelledby="Filter_btn"
                                        class="dropdown-previous-filter">
                                        <ul class="drop-ul p-1 filtr-config-option ">
                                            <li class="dropdown-header">Filter by</li>

                                            <li>
                                                <button [ngClass]="{'active':filterconfig.filterby=='Date'}"   class="btn btn-filtr" (click)="toggleDropdowns();previous_filter();sortTimeline(sort1);setFilterInfo('Date',filterconfig.sortby);"                                              >
                                                    <div class="d-flex align-items-center">

                                                            <span aria-hidden="true" class="side-icns" >
                                                              <svg fill="currentColor" width="64px" height="64px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M19,4H17V3a1,1,0,0,0-2,0V4H9V3A1,1,0,0,0,7,3V4H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm1,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V12H20Zm0-9H4V7A1,1,0,0,1,5,6H7V7A1,1,0,0,0,9,7V6h6V7a1,1,0,0,0,2,0V6h2a1,1,0,0,1,1,1Z"></path></g></svg>
                                                             </span>
                                                            <div class="fil-lbl">{{'Date'}}</div>
                                                            <span
                                                            class="chck-icn ng-star-inserted">
                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                width="16" height="16"
                                                                fill="currentColor"
                                                                viewBox="0 0 16 16"
                                                                class="bi bi-check2">
                                                                <path
                                                                    d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
                                                                </path>
                                                            </svg>
                                                        </span>
                                                    </div>
                                                </button>
                                            </li>
                                            <li>
                                              <ng-container *ngIf="Type =='My Timeline'">
                                              <button [ngClass]="{'active':filterconfig.filterby=='Project'}"   class="btn btn-filtr" (click)="toggleDropdowns();previous_filter();sortTimeline(sort2);setFilterInfo('Project',filterconfig.sortby);"                                              >
                                                  <div class="d-flex align-items-center">

                                                          <span aria-hidden="true" class="side-icns"  >
                                                            <svg id="summary" fill="currentColor" width="64px" height="64px" viewBox="0 0 14 14" role="img" focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="m 13,2.15688 0,9.68624 C 13,12.49386 12.491071,13 11.842857,13 L 2.1571429,13 C 1.5169643,12.99732 1,12.49922 1,11.84044 L 1,2.15688 C 1,1.51149 1.5035714,1 2.1571429,1 L 11.845536,1 C 12.488393,1 13,1.50346 13,2.15688 Z m -0.999107,9.68356 0,-9.68356 c 0,-0.0803 -0.06964,-0.15532 -0.155357,-0.15532 l -0.249107,0 L 8.6419643,3.99933 7,2.66302 5.3607143,3.99933 2.40625,1.99888 l -0.2491071,0 c -0.085714,0 -0.1553572,0.075 -0.1553572,0.15533 l 0,9.68623 c 0,0.0803 0.069643,0.15532 0.1553572,0.15532 l 9.6883931,0 c 0.08571,0.003 0.155357,-0.0723 0.155357,-0.15532 z m -6.9776787,-6.71636 0,0.99085 -1.96875,0 0,-0.99085 1.96875,0 z m 0,1.99241 0,0.99889 -1.96875,0 0,-0.99889 1.96875,0 z m 0.2973214,-3.94465 1.4464286,-1.17028 -3.1741072,0 1.7276786,1.17028 z m 5.6250003,1.95224 0,0.99085 -5.2500003,0 0,-0.99085 5.2500003,0 z m 0,1.99241 0,0.99889 -5.2500003,0 0,-0.99889 5.2500003,0 z M 8.6794643,3.17184 10.407143,2.00156 l -3.1714287,0 1.44375,1.17028 z m 2.2660717,5.94242 0,0.99888 -2.6625003,0 0,-0.99888 2.6625003,0 z"></path></g></svg>
                                                           </span>
                                                          <div class="fil-lbl">{{'Project'}}</div>
                                                          <span
                                                          class="chck-icn ng-star-inserted">
                                                          <svg xmlns="http://www.w3.org/2000/svg"
                                                              width="16" height="16"
                                                              fill="currentColor"
                                                              viewBox="0 0 16 16"
                                                              class="bi bi-check2">
                                                              <path
                                                                  d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
                                                              </path>
                                                          </svg>
                                                      </span>
                                                  </div>
                                              </button>
                                            </ng-container>
                                          </li>
<ng-container *ngIf="Type !=='My Timeline'">
                                            <li>
                                              <button [ngClass]="{'active':filterconfig.filterby=='Employees'}" class="btn btn-filtr "  (click)="toggleDropdown();setFilterInfo('Employees',filterconfig.sortby);"                                               >
                                                  <div class="d-flex align-items-center">
                                                          <svg
                                                          xmlns="http://www.w3.org/2000/svg"
                                                          width="16" height="16"
                                                          fill="currentColor"
                                                          viewBox="0 0 16 16"
                                                          class="bi bi-people">
                                                          <path
                                                              d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z">
                                                          </path>
                                                      </svg>
                                                      <div class="fil-lbl">{{'Employees'}}</div>
                                                      <span
                                                      class="chck-icn ng-star-inserted">
                                                      <svg xmlns="http://www.w3.org/2000/svg"
                                                          width="16" height="16"
                                                          fill="currentColor"
                                                          viewBox="0 0 16 16"
                                                          class="bi bi-check2">
                                                          <path
                                                              d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
                                                          </path>
                                                      </svg>
                                                  </span>
                                                  </div>
                                              </button>
                                          </li>
                                        </ng-container>



                                            <ng-container *ngIf="showDropdown">
                                            <li role="separator" class="divider"></li>
                                            <li class="dropdown-header">Sort by employee</li>


                                            <li>
                                                <!-- <button [ngClass]="{'active':filterconfig.sortby=='All'}"  class="btn btn-filtr" (click)="getPreviousdate_ByFilter(1); setFilterInfo(filterconfig.filterby,'All');  "
                                                  >
                                                    <div class="d-flex align-items-center">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            width="16" height="16"
                                                            fill="currentColor"
                                                            class="bi bi-border-all"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M0 0h16v16H0zm1 1v6.5h6.5V1zm7.5 0v6.5H15V1zM15 8.5H8.5V15H15zM7.5 15V8.5H1V15z" />
                                                        </svg>
                                                        <div class="fil-lbl">All</div>
                                                        <span
                                                            class="chck-icn ng-star-inserted">
                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                width="16" height="16"
                                                                fill="currentColor"
                                                                viewBox="0 0 16 16"
                                                                class="bi bi-check2">
                                                                <path
                                                                    d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
                                                                </path>
                                                            </svg>
                                                        </span>
                                                    </div>
                                                </button> -->
                                            </li>
                                            <div class=" actns-filtr-scroll">
                                                <li *ngFor="let item of racisemplFilter;let i=index">

                                                    <button  [ngClass]="{'active':item.EmpId==filterconfig.sortby}"    class="btn btn-filtr" (click)=" timelineLog1(type2,item.EmpId); setFilterInfo(filterconfig.filterby,item.EmpId); previous_filter();" >
                                                        <div class="d-flex align-items-center">



                                                              <span class="count tot">{{item.count}}</span>
                                                               <div  class="fil-lbl">
                                                                {{item.EmpName}}</div>

                                                            <span *ngIf="item.EmpId==filterconfig.sortby" class="chck-icn ng-star-inserted">
                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                    width="16" height="16"
                                                                    fill="currentColor"
                                                                    viewBox="0 0 16 16"
                                                                    class="bi bi-check2">
                                                                    <path
                                                                        d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
                                                                    </path>
                                                                </svg>
                                                            </span>
                                                        </div>
                                                    </button>

                                                </li>
                                            </div>

                                            <!-- <li class="view-more">
                                                <a>View More</a>
                                            </li> -->
                                        </ng-container>
                                        </ul>
                                    </div>
                                </div>
                            </div>


                        </div>

                        <button type="button" class="btn btn-info btn-sm btn-fw" (click)="darcreate()"> Add timeline </button>
                    </div>
                </div>
            </div>
            <!--begin::Portlet 1 class="sticky-header" style="font-size: 13px;"-->
            <div class="kt-portlet portlet-height" *ngIf="sortType=='Date'">
                <div class="kt-portlet__body kt-portlet__body_scroll p-0">
                    <div class="mt-3">
                        <div class="timeline-scroll">
                            <div class="" *ngIf="showtimeline==true">
                                <div class="px-4 timeline-px-4" *ngFor="let item of darArray;let i =index">
                                    <div class="timeline-header sticky-header d-flex justify-content-between">
                                        <h4 class="header-date p-0 mb-0">
                                            {{item.SubmissionDate | date: 'fullDate'}}
                                        </h4>
                                        <div *ngIf="Type==type1"  class="d-flex">
                                            <span class="tl-status fs-7 font-weight-400"  [ngClass]="{
                                                'tl-submitted':item.DarStatus=='Accepted',
                                                'tl-notsubmitted':item.DarStatus=='Not Submitted',
                                                'tl-underaprvl':item.DarStatus=='Under Approval',
                                                'tl-suspend':item.DarStatus=='Suspend'
                                                }">
                                                <svg *ngIf="item.DarStatus=='Accepted'" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style=" width: 20px;height: 20px;"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.1" d="M13.8179 4.54512L13.6275 4.27845C12.8298 3.16176 11.1702 3.16176 10.3725 4.27845L10.1821 4.54512C9.76092 5.13471 9.05384 5.45043 8.33373 5.37041L7.48471 5.27608C6.21088 5.13454 5.13454 6.21088 5.27608 7.48471L5.37041 8.33373C5.45043 9.05384 5.13471 9.76092 4.54512 10.1821L4.27845 10.3725C3.16176 11.1702 3.16176 12.8298 4.27845 13.6275L4.54512 13.8179C5.13471 14.2391 5.45043 14.9462 5.37041 15.6663L5.27608 16.5153C5.13454 17.7891 6.21088 18.8655 7.48471 18.7239L8.33373 18.6296C9.05384 18.5496 9.76092 18.8653 10.1821 19.4549L10.3725 19.7215C11.1702 20.8382 12.8298 20.8382 13.6275 19.7215L13.8179 19.4549C14.2391 18.8653 14.9462 18.5496 15.6663 18.6296L16.5153 18.7239C17.7891 18.8655 18.8655 17.7891 18.7239 16.5153L18.6296 15.6663C18.5496 14.9462 18.8653 14.2391 19.4549 13.8179L19.7215 13.6275C20.8382 12.8298 20.8382 11.1702 19.7215 10.3725L19.4549 10.1821C18.8653 9.76092 18.5496 9.05384 18.6296 8.33373L18.7239 7.48471C18.8655 6.21088 17.7891 5.13454 16.5153 5.27608L15.6663 5.37041C14.9462 5.45043 14.2391 5.13471 13.8179 4.54512Z" fill="#388e3c"></path> <path d="M13.8179 4.54512L13.6275 4.27845C12.8298 3.16176 11.1702 3.16176 10.3725 4.27845L10.1821 4.54512C9.76092 5.13471 9.05384 5.45043 8.33373 5.37041L7.48471 5.27608C6.21088 5.13454 5.13454 6.21088 5.27608 7.48471L5.37041 8.33373C5.45043 9.05384 5.13471 9.76092 4.54512 10.1821L4.27845 10.3725C3.16176 11.1702 3.16176 12.8298 4.27845 13.6275L4.54512 13.8179C5.13471 14.2391 5.45043 14.9462 5.37041 15.6663L5.27608 16.5153C5.13454 17.7891 6.21088 18.8655 7.48471 18.7239L8.33373 18.6296C9.05384 18.5496 9.76092 18.8653 10.1821 19.4549L10.3725 19.7215C11.1702 20.8382 12.8298 20.8382 13.6275 19.7215L13.8179 19.4549C14.2391 18.8653 14.9462 18.5496 15.6663 18.6296L16.5153 18.7239C17.7891 18.8655 18.8655 17.7891 18.7239 16.5153L18.6296 15.6663C18.5496 14.9462 18.8653 14.2391 19.4549 13.8179L19.7215 13.6275C20.8382 12.8298 20.8382 11.1702 19.7215 10.3725L19.4549 10.1821C18.8653 9.76092 18.5496 9.05384 18.6296 8.33373L18.7239 7.48471C18.8655 6.21088 17.7891 5.13454 16.5153 5.27608L15.6663 5.37041C14.9462 5.45043 14.2391 5.13471 13.8179 4.54512Z" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9 12L10.8189 13.8189V13.8189C10.9189 13.9189 11.0811 13.9189 11.1811 13.8189V13.8189L15 10" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                                                {{item.DarStatus}}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="">
                                        <table class="time-table mb-1">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px;">S.No.</th>
                                                    <th style="width: 280px;">Employee</th>
                                                    <th style="width: 280px;">Type</th>
                                                    <th>Achievement</th>
                                                    <th style="width: 80px;">Start</th>
                                                    <th style="width: 80px;">End</th>
                                                    <th style="width: 80px;">Time</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item1 of item.Dardata;let j=index">
                                                    <td>{{j+1}}</td>
                                                    <td>
                                                        <div class="d-flex">
                                                            <div class="initial-box color-7 b-50 mr-2">{{item1.Initial}}
                                                            </div>
                                                            <span class="user--name">{{item1.EmpName}}</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <a class="pro-link" href="javascript:void(0)" *ngIf="item1.ProjectName && item1.Tasktype!='Lunch' && item1.Tasktype!='Personal'" (click)="newDetails(item1.project_code.trim())">{{item1.ProjectName }}</a>
                                                        <a *ngIf="item1.Tasktype=='Lunch'">Lunch</a>
                                                        <a *ngIf="item1.Tasktype=='Personal'">Personal</a>
                                                        <a *ngIf="!item1.ProjectName && item1.Tasktype!='Lunch' && item1.Tasktype!='Personal'">{{item1.Tasktype }}</a>
                                                        <a class="pro-link fs-6 cursor-pointer" href="javascript:void(0)" *ngIf="item1.ActionName && item1.ActionName!=item1.ProjectName"  (click)=" newDetailsaction(item1.project_code.trim(),item1.ActionCode.trim())" ><div class="desp-txt fs-7 actlabel-at-type">Action</div>{{item1.ActionName }}</a>
                                                    </td>
                                                    <td>{{item1.WorkAchieved}}</td>
                                                    <td>{{item1.starttime}}</td>
                                                    <td>{{item1.endtime}}</td>
                                                    <td>{{item1.Duration}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="time-totals mb-3">
                                        <div class="d-flex align-items-center gap-1">
                                            <ul class="time-totals-list mb-0">
                                                <li class="totals-list--item">
                                                    <span><strong>Total : </strong></span>
                                                    <span>{{ formatDuration(item.TotalDuration)}}</span>
                                                </li>
                                            </ul>
                                            <button *ngIf="(Type==type1)&&(item.DarStatus=='Not Submitted'&&item.submitable==true)" (click)="submitTL(item.SubmissionDate)" type="button" class="btn btn-info btn-sm btn-fw curser-pointer">Submit</button>
                                        </div>
                                    </div>
                                </div>
                                <div style="text-align:center" *ngIf="Type=='My Timeline'">
                                     <button class="btn btn-info loadMore"
                                         (click)="CurrentPageNo = CurrentPageNo + 1; loadMore()"
                                        [hidden]="_CurrentpageRecords<30">
                                        Load more!</button>
                                </div>

                                <div style="text-align:center" *ngIf="Type=='RACIS Timeline'">
                                     <button class="btn btn-info loadMore"
                                    (click)="CurrentPageNo = CurrentPageNo + 1; loadMore1();"
                                   [hidden]="_CurrentpageRecords<30">
                                   Load more!</button>
                                </div>
                            </div>
                            <div class="text-center py-4" style="color: lightgrey"  *ngIf="showtimeline==false">
                                <h4>No timeline found.</h4>
                                <p>Please <a href="javascript:void(0)" (click)="darcreate()"><u>click here</u></a> to create timeline</p>
                            </div>
                        </div>
                        <div class="timeline d-none">
                            <div class="timeline-header sticky-header">
                                <span class="header-text header-date d-none">
                                    14, March 2023
                                </span>
                                <a class="pro-name" href="javascript:void(0)">
                                    <span class="header-text">Stream application(creative Planner) development</span>
                                </a>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(creative Planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Notifications and timeline activity modules in dashboard page</div>
                                        <div class="timeline-text fs-6 achv-txt">Rebinding done in notifications page for the responses from the users after clicking on more info icon.</div>

                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>


                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(Creative planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Runway module For assign project and action to project</div>
                                        <div class="timeline-text fs-6 achv-txt">Action to project service update for the list of projects to be shown in runway page.</div>


                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>

                            <div class="timeline-header sticky-header">
                                <span class="header-text header-date">
                                    13, March 2023
                                </span>
                                <a class="pro-name d-none" href="javascript:void(0)">
                                    <span class="header-text">Stream application(Creative planner) development</span>
                                </a>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon symbol symbol-circle symbol-40px">
                                    <div class="symbol-label kt-bg-light-primary">
                                        <span class="timeline-media">
                                            VM
                                        </span>
                                    </div>
                                </div>
                                <!--end::Timeline icon-->
                                <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pt-2 pr-3">

                                        <div class="timeline-text fs-6">
                                            Venkata maharshi
                                            <span class="desp-txt fs-7">Logged</span> '3 hrs 30mins'
                                            <span class="ml-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16px" height="16px" viewBox="0 0 24 24"
                                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="vertical-align: sub;color: #848c93;">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                                10:30 AM - 02:00 PM
                                            </span> in
                                        </div>
                                        <div class="timeline-text fs-6">
                                            <span class="desp-txt fs-7">Project</span> <a class="pro-link" href="javascript:void(0)">Stream application(Creative planner) development</a>
                                        </div>
                                        <div class="timeline-text fs-6"><span class="desp-txt fs-7">Action</span>Runway module for assign project and action to project</div>
                                        <div class="timeline-text fs-6 achv-txt">Action to project service update for the list of projects to be shown in runway page.</div>


                                    </div>
                                </div>
                                <!--end::Timeline content-->
                            </div>


                        </div>
                    </div>
                </div>
            </div>
            <!--begin::Portlet 2-->
            <div class="kt-portlet portlet-height" *ngIf="sortType=='Project'">
                <div class="kt-portlet__body kt-portlet__body_scroll p-0">
                    <div class="mt-3">
                        <div class="timeline-scroll">
                            <div class="" *ngIf="showtimeline==true">
                                <div class="px-4 timeline-px-4" *ngFor="let item of darArray;let i =index">
                                    <div class="timeline-header sticky-header">
                                        <h4 class="header-date p-0 ">
                                            <a class="pro-link" href="javascript:void(0)" (click)="newDetails(item.project_code)">{{item.ProjectName }}</a>
                                        </h4>
                                    </div>
                                    <div class="">
                                        <table class="time-table mb-1">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px;">S.No.</th>
                                                    <th style="width: 280px;">Employee</th>
                                                    <th style="width: 280px;">Achieved date</th>
                                                    <th>Achievement</th>
                                                    <th style="width: 80px;">Start</th>
                                                    <th style="width: 80px;">End</th>
                                                    <th style="width: 80px;">Time</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item1 of item.Dardata;let j=index">
                                                    <td>{{j+1}}</td>
                                                    <td>
                                                        <div class="d-flex">
                                                            <div class="initial-box color-7 b-50 mr-2">{{item1.Initial}}
                                                            </div>
                                                            <span class="user--name">{{item1.EmpName}}</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="timeline-text fs-6">{{item1.date | date:'fullDate'}}</div>
                                                    </td>
                                                    <td>
                                                        <div class="timeline-text fs-6" *ngIf="item1.ActionName && item1.ActionName!=item1.ProjectName" (click)="newDetailsaction(item1.project_code,item1.ActionCode)">
                                                            <span class="desp-txt fs-7 ">Action</span><u class="blur">{{item1.ActionName }}</u></div>
                                                        {{item1.WorkAchieved}}
                                                    </td>
                                                    <td>{{item1.starttime}}</td>
                                                    <td>{{item1.endtime}}</td>
                                                    <td>{{item1.Duration}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="time-totals mb-3">
                                        <div class="">
                                            <ul class="time-totals-list">
                                                <li class="totals-list--item">
                                                    <span><strong>Total : </strong></span>
                                                    <span>{{formatHoursToHHMM(item.TotalDuration)}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div style="text-align:center">
                                     <button class="btn btn-info loadMore"
                                         (click)="CurrentPageNo = CurrentPageNo + 1; loadMorebySort()"
                                        [hidden]="_CurrentpageRecords<30">
                                        Load more!</button>
                                </div>
                            </div>
                            <div class="text-center py-4" style="color: lightgrey"  *ngIf="showtimeline==false">
                                <h4>No timeline found.</h4>
                                <p>Please <a href="javascript:void(0)" (click)="darcreate()"><u>click here</u></a> to create timeline</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--end::Portlet 2-->
        </div>
    </div>
</div>



<div id="darsidebar" class="sideInfobar animate-right">
    <div class="kt-portlet">

    <div class="kt-portlet__head">
        <div class="offcanvas-header d-flex align-items-center justify-content-between pb-2">
            <h4 class="m-0">Timeline submission</h4>
            <a href="javascript:void(0)" class="closebtn btn btn-xs btn-icon btn-hover-info" (click)="closedarBar()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path fill="none" d="M0 0h24v24H0z"></path><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"></path>
                </svg>
            </a>
        </div>
    </div>

    <div class=" kt-portlet__body pb-0 pt-3 sidehf_scroll scroll-y  tm-subm-sb   ">
        <div class="timeline-radios">
            <div class="form-check">
                <input type="radio" name="TimelineOfDate" id="todayradio" class="form-check-input" (change)="changeTimelineDate('TODAY')" [checked]="timeline_of === 'TODAY'" /> Today
              </div>
              <div class="form-check">
                <input type="radio" name="TimelineOfDate" id="yesterdayradio" class="form-check-input" (change)="changeTimelineDate('YESTERDAY')" [checked]="timeline_of === 'YESTERDAY'" /> Yesterday
              </div>
        </div>
        <div id="div1">
            <!-- <div class="timeline-item-div mb-2rem">
                <div class="timeline-item-heading">
                    Timeline report
                </div>
                <div class="">
                    <div class="timeline-header sticky-header d-flex justify-content-between bg-white mt-1">
                      <h4 class="header-date p-0 mb-0">{{current_Date|date:'EEEE, MMMM d, y'}}</h4>
                      <span *ngIf="tmReportStatus" class="tl-status fs-7 font-weight-400"  [ngClass]="{
                        'tl-submitted':tmReportStatus=='Accepted',
                        'tl-notsubmitted':tmReportStatus=='Not Submitted',
                        'tl-underaprvl':tmReportStatus=='Under Approval',
                        'tl-suspend':tmReportStatuss=='Suspend'
                        }">
                        <svg *ngIf="tmReportStatus=='Accepted'" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style=" width: 20px;height: 20px;"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.1" d="M13.8179 4.54512L13.6275 4.27845C12.8298 3.16176 11.1702 3.16176 10.3725 4.27845L10.1821 4.54512C9.76092 5.13471 9.05384 5.45043 8.33373 5.37041L7.48471 5.27608C6.21088 5.13454 5.13454 6.21088 5.27608 7.48471L5.37041 8.33373C5.45043 9.05384 5.13471 9.76092 4.54512 10.1821L4.27845 10.3725C3.16176 11.1702 3.16176 12.8298 4.27845 13.6275L4.54512 13.8179C5.13471 14.2391 5.45043 14.9462 5.37041 15.6663L5.27608 16.5153C5.13454 17.7891 6.21088 18.8655 7.48471 18.7239L8.33373 18.6296C9.05384 18.5496 9.76092 18.8653 10.1821 19.4549L10.3725 19.7215C11.1702 20.8382 12.8298 20.8382 13.6275 19.7215L13.8179 19.4549C14.2391 18.8653 14.9462 18.5496 15.6663 18.6296L16.5153 18.7239C17.7891 18.8655 18.8655 17.7891 18.7239 16.5153L18.6296 15.6663C18.5496 14.9462 18.8653 14.2391 19.4549 13.8179L19.7215 13.6275C20.8382 12.8298 20.8382 11.1702 19.7215 10.3725L19.4549 10.1821C18.8653 9.76092 18.5496 9.05384 18.6296 8.33373L18.7239 7.48471C18.8655 6.21088 17.7891 5.13454 16.5153 5.27608L15.6663 5.37041C14.9462 5.45043 14.2391 5.13471 13.8179 4.54512Z" fill="#388e3c"></path> <path d="M13.8179 4.54512L13.6275 4.27845C12.8298 3.16176 11.1702 3.16176 10.3725 4.27845L10.1821 4.54512C9.76092 5.13471 9.05384 5.45043 8.33373 5.37041L7.48471 5.27608C6.21088 5.13454 5.13454 6.21088 5.27608 7.48471L5.37041 8.33373C5.45043 9.05384 5.13471 9.76092 4.54512 10.1821L4.27845 10.3725C3.16176 11.1702 3.16176 12.8298 4.27845 13.6275L4.54512 13.8179C5.13471 14.2391 5.45043 14.9462 5.37041 15.6663L5.27608 16.5153C5.13454 17.7891 6.21088 18.8655 7.48471 18.7239L8.33373 18.6296C9.05384 18.5496 9.76092 18.8653 10.1821 19.4549L10.3725 19.7215C11.1702 20.8382 12.8298 20.8382 13.6275 19.7215L13.8179 19.4549C14.2391 18.8653 14.9462 18.5496 15.6663 18.6296L16.5153 18.7239C17.7891 18.8655 18.8655 17.7891 18.7239 16.5153L18.6296 15.6663C18.5496 14.9462 18.8653 14.2391 19.4549 13.8179L19.7215 13.6275C20.8382 12.8298 20.8382 11.1702 19.7215 10.3725L19.4549 10.1821C18.8653 9.76092 18.5496 9.05384 18.6296 8.33373L18.7239 7.48471C18.8655 6.21088 17.7891 5.13454 16.5153 5.27608L15.6663 5.37041C14.9462 5.45043 14.2391 5.13471 13.8179 4.54512Z" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9 12L10.8189 13.8189V13.8189C10.9189 13.9189 11.0811 13.9189 11.1811 13.8189V13.8189L15 10" stroke="#388e3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                        {{tmReportStatus}}
                       </span>
                    </div>
            <ng-container *ngIf="tmReportLoading==false; else tm_report_loading">
                <ng-container *ngIf="(tmReportArr&&tmReportArr.length>0); else noTimelinePresent">
                    <div>
                      <table class="time-table mb-1">
                        <thead>
                          <tr>
                            <th style="width: 50px;">S.No.</th>
                            <th style="width: 280px;">Employee</th>
                            <th style="width: 280px;">Type</th>
                            <th>Achievement</th>
                            <th style="width: 80px;">Start</th>
                            <th style="width: 80px;">End</th>
                            <th style="width: 80px;">Time</th>
                          </tr>
                        </thead>
                        <tbody>

                          <tr *ngFor="let tm of tmReportArr; let i=index">
                            <td>{{i+1}}</td>
                            <td>
                              <div class="d-flex">
                                <div class="initial-box color-7 b-50 mr-2">{{tm.Initial}}</div><span
                                  class="user--name">{{tm.EmpName}}</span>
                              </div>
                            </td>

                            <td>
                                <a class="pro-link" href="javascript:void(0)" *ngIf="tm.ProjectName && tm.Tasktype!='Lunch' && tm.Tasktype!='Personal'"(click)="newDetails(tm.project_code.trim())">{{tm.ProjectName }}</a>
                                <a *ngIf="tm.Tasktype=='Lunch'">Lunch</a>
                                <a *ngIf="tm.Tasktype=='Personal'">Personal</a>
                                <a *ngIf="!tm.ProjectName && tm.Tasktype!='Lunch' && tm.Tasktype!='Personal'">{{tm.Tasktype }}</a>
                                <a class="pro-link fs-6 cursor-pointer" href="javascript:void(0)" *ngIf="tm.ActionName && tm.ActionName!=tm.ProjectName"
                                    (click)="newDetailsaction(tm.project_code.trim(),tm.ActionCode.trim())">
                                    <div class="desp-txt fs-7 actlabel-at-type">Action</div>{{tm.ActionName }}
                                </a>
                            </td>
                            <td>{{tm.WorkAchieved}}</td>
                            <td>{{tm.starttime}}</td>
                            <td>{{tm.endtime}}</td>
                            <td>{{tm.Duration}}</td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                    <div class="time-totals mb-2">
                      <div class="d-flex align-items-center gap-1">
                        <ul class="time-totals-list mb-0">
                          <li class="totals-list--item"><span><strong>Total hours: </strong></span><span>{{tmReportTotalDuration}} hrs</span></li>
                        </ul>
                      </div>
                    </div>
                    <div *ngIf="tmReportStatus=='Not Submitted'" class="timeline-note pending">
                        <p>
                            <svg fill="#fcc52f" width="17px" height="16px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                stroke="#ffcd42" stroke-width="0.00032">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path d="M30.555 25.219l-12.519-21.436c-1.044-1.044-2.738-1.044-3.782 0l-12.52 21.436c-1.044 1.043-1.044 2.736 0 3.781h28.82c1.046-1.045 1.046-2.738 0.001-3.781zM14.992 11.478c0-0.829 0.672-1.5 1.5-1.5s1.5 0.671 1.5 1.5v7c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5v-7zM16.501 24.986c-0.828 0-1.5-0.67-1.5-1.5 0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.83-0.672 1.5-1.5 1.5z"></path>
                                </g>
                            </svg>
                            Timeline report not submitted.
                        </p>
                        <button (click)="submitTL(tmSubmDate)" type="button" class="btn btn-info btn-sm btn-fw curser-pointer">Submit</button>
                    </div>

                    <div *ngIf="tmReportStatus!='Not Submitted'" class="timeline-note success">
                        <p>
                            <svg fill="#000000" width="20px" height="20px" viewBox="0 0 24 24" id="file-done-2" data-name="Flat Color"
                                xmlns="http://www.w3.org/2000/svg" class="icon flat-color">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path id="primary" d="M17.71,6.29l-4-4A1,1,0,0,0,13,2H4A2,2,0,0,0,2,4V20a2,2,0,0,0,2,2h8.42A5,5,0,0,1,16,15.11a5,5,0,0,1,2,0s0,0,0,0V7A1,1,0,0,0,17.71,6.29Z"style="fill: #99f59d;"></path>
                                    <path id="secondary" d="M17,22a1,1,0,0,1-.71-.29l-2-2a1,1,0,0,1,1.42-1.42L17,19.59l3.29-3.3a1,1,0,0,1,1.42,1.42l-4,4A1,1,0,0,1,17,22Zm-6-9a1,1,0,0,0-1-1H6a1,1,0,0,0,0,2h4A1,1,0,0,0,11,13Zm4-4a1,1,0,0,0-1-1H6a1,1,0,0,0,0,2h8A1,1,0,0,0,15,9Z" style="fill: #0d7c12;"></path>
                                </g>
                            </svg>
                            Timeline report submitted successfully.
                        </p>
                    </div>
                </ng-container>
                <ng-template #noTimelinePresent>
                    <div class="notimeline-present">
                        <img src="./assets/images/noTimelinePresent.png" class="notimeline-present-img" />
                        <div class="bnk-txt mt-3 d-flex justify-content-center">
                            <h3 class="blank-txt fs-6 notimeline-present-label">No timeline found.</h3>
                        </div>
                    </div>
                </ng-template>
            </ng-container>
            <ng-template #tm_report_loading>
               <div class="tm-report-spner">
                <div class="spinner-border text-primary" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
               </div>
            </ng-template>

                </div>
            </div> -->
            <!-- *ngIf="tmReportStatus=='Not Submitted'||tmReportArr.length==0"   -->
            <div class="timeline-item-div">
                <div class="timeline-item-heading">Add timeline</div>
                <h4 class="header-date p-0">{{current_Date|date:'EEEE, MMMM d, y'}}</h4>
                <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0 mt-2" >
                    <label>Type<span class="text-danger">*</span></label>
                    <ng-select required #type="ngModel" name="type" placeholder="Select Type" id="projType" [ngClass]="{'error-vd': (fieldRequired&&!project_type)}"
                        [(ngModel)]="project_type" (change)="onTypeChanged()">
                        <ng-option value="core">Core/Secondary tasks</ng-option>
                        <ng-option value="standard">Standard/Routine/ToDo tasks</ng-option>
                        <ng-option value="lunch">Lunch</ng-option>
                        <ng-option value="personal">Personal</ng-option>
                    </ng-select>
                    <span style="color:red" *ngIf="(fieldRequired&&!project_type)">Please select project type.</span>
                </div>
                <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0" *ngIf="showProject==true">
                    <label>Project <span class="text-danger">*</span></label>

                    <ng-select required #project="ngModel" name="project" placeholder="Select Project" id="projName" [ngClass]="{'error-vd': (fieldRequired&&!master_code)}"
                        [(ngModel)]="master_code" (change)="getTimelineActions(); getPADetails(master_code,'PROJECT'); ">
                        <ng-option [value]="item.Project_Code" *ngFor="let item of projectList">
                            {{item.Project_Name }}
                        </ng-option>
                    </ng-select>

                        <div  class="txtm-cus mt-1 ml-1 ng-star-inserted  d-flex  align-items-center flex-wrap gap-1    " *ngIf="p_details&&master_code">
                            <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{p_details.StartDate|date:'dd-MM-yyyy'}}</span>
                            <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{p_details.EndDate|date:'dd-MM-yyyy'}}</span>
                            <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-star mr-1"></i>
                                {{
                                    p_details.Status!='Completion Under Approval'?p_details.Status:
                                    (p_details.AuditStatus=='Audit Pending'?'Audit Approval':'Completion Approval')
                                }}
                            </span>
                            <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-clock mr-1"></i>Allocated hours : {{p_details.AllocatedHours}}</span>
                            <span class="d-inline-flex align-items-center mr-2">
                                <svg width="16px" height="16px" class="mr-1" fill="#757575" viewBox="-2.16 -2.16 28.32 28.32" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" stroke="#757575"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.144"></g><g id="SVGRepo_iconCarrier"> <path d="M23.707,16.325a1,1,0,0,0-1.414,0l-5.627,5.628L13.978,19.3A1,1,0,0,0,12.543,20.7L15.287,23.4a1.876,1.876,0,0,0,1.345.6h.033A1.873,1.873,0,0,0,18,23.447l5.707-5.708a1,1,0,0,0,0-1.414Z M11.09,21.959A10,10,0,1,1,22,12c0,.307-.015.611-.041.911A1,1,0,0,0,22.866,14a.989.989,0,0,0,1.085-.907C23.983,12.73,24,12.367,24,12A12,12,0,1,0,10.91,23.951c.031,0,.061,0,.091,0a1,1,0,0,0,.089-2Z M11,7v4.586L8.293,14.293a1,1,0,1,0,1.414,1.414l3-3A1,1,0,0,0,13,12V7a1,1,0,0,0-2,0Z"></path></g></svg>
                                Used hours : {{p_details.usedHours}}</span>
                            <span class="d-inline-flex align-items-center mr-2 ">
                                <svg width="16px" height="16px" class="mr-1" viewBox="-1.2 -1.2 26.40 26.40" fill="#757575" xmlns="http://www.w3.org/2000/svg" stroke="#757575" stroke-width="0.5"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22.9504 13.051C22.9832 12.7051 23 12.3545 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C12.3545 23 12.7051 22.9832 13.051 22.9504C12.4841 22.3838 12.014 21.7204 11.6675 20.9871C6.85477 20.8122 3.00683 16.8555 3.00683 12C3.00683 7.03321 7.03321 3.00683 12 3.00683C16.8555 3.00683 20.8122 6.85477 20.9871 11.6675C21.7204 12.014 22.3838 12.4841 22.9504 13.051Z" fill="#757575"></path> <path d="M13.8426 12.3677L13 11.8812V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44771 11 6V12.4667C11 12.4667 11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346L12.3766 13.8307C12.7902 13.2737 13.2847 12.7802 13.8426 12.3677Z" fill="#757575"></path> <path d="M16 17C15.4477 17 15 17.4477 15 18C15 18.5523 15.4477 19 16 19H20C20.5523 19 21 18.5523 21 18C21 17.4477 20.5523 17 20 17H16Z" fill="#757575"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24 18C24 21.3137 21.3137 24 18 24C14.6863 24 12 21.3137 12 18C12 14.6863 14.6863 12 18 12C21.3137 12 24 14.6863 24 18ZM13.9819 18C13.9819 20.2191 15.7809 22.0181 18 22.0181C20.2191 22.0181 22.0181 20.2191 22.0181 18C22.0181 15.7809 20.2191 13.9819 18 13.9819C15.7809 13.9819 13.9819 15.7809 13.9819 18Z" fill="#757575"></path> </g></svg>
                                Remaining hours :&nbsp;<span *ngIf="p_details.remainingHours!==null&&p_details.remainingHours!==undefined"  [ngStyle]="{'color':p_details.remainingHours>0?'darkgray':'red'}"  >{{p_details.remainingHours>0?p_details.remainingHours:0}}</span></span>

                        </div>
                        <span style="color:red" *ngIf="(fieldRequired&&!master_code)" >Please select a project.</span>

                </div>
                <div class="form-group text-dark-50 w-75px flex-grow-1 brdng-0" *ngIf="showAction==true && project_type=='core'">
                    <label>Action <span class="text-danger">*</span></label>
                    <ng-select required #action="ngModel" name="action" placeholder="Select Action" id="actinName" [ngClass]="{'error-vd': (fieldRequired&&!project_code)}"
                    [ngClass]="{'error-vd': (noact_msg==true && project_type=='core')}"
                        [(ngModel)]="project_code"  (change)="getPADetails(project_code,'ACTION');  prostate(project_code);">
                        <ng-option [value]="item.Project_Code" *ngFor="let item of actionList">
                            {{item.Project_Name }}
                        </ng-option>
                    </ng-select>

                    <div class="txtm-cus mt-1 ml-1 ng-star-inserted d-flex align-items-center flex-wrap gap-1 "  *ngIf="a_details&&project_code">
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{a_details.StartDate|date:'dd-MM-yyyy'}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-calendar-alt mr-1"></i>{{a_details.EndDate|date:'dd-MM-yyyy'}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-star mr-1"></i>{{a_details.Status}}</span>
                        <span class="d-inline-flex align-items-center mr-2"><i class="fas fa-clock mr-1"></i>Allocated hours : {{a_details.AllocatedHours}}</span>
                        <span class="d-inline-flex align-items-center mr-2">
                            <svg width="16px" height="16px" class="mr-1" fill="#757575" viewBox="-2.16 -2.16 28.32 28.32" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" stroke="#757575"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.144"></g><g id="SVGRepo_iconCarrier"> <path d="M23.707,16.325a1,1,0,0,0-1.414,0l-5.627,5.628L13.978,19.3A1,1,0,0,0,12.543,20.7L15.287,23.4a1.876,1.876,0,0,0,1.345.6h.033A1.873,1.873,0,0,0,18,23.447l5.707-5.708a1,1,0,0,0,0-1.414Z M11.09,21.959A10,10,0,1,1,22,12c0,.307-.015.611-.041.911A1,1,0,0,0,22.866,14a.989.989,0,0,0,1.085-.907C23.983,12.73,24,12.367,24,12A12,12,0,1,0,10.91,23.951c.031,0,.061,0,.091,0a1,1,0,0,0,.089-2Z M11,7v4.586L8.293,14.293a1,1,0,1,0,1.414,1.414l3-3A1,1,0,0,0,13,12V7a1,1,0,0,0-2,0Z"></path></g></svg>
                            Used hours : {{a_details.usedHours}}</span>
                        <span class="d-inline-flex align-items-center mr-2">
                            <svg width="16px" height="16px" class="mr-1" viewBox="-1.2 -1.2 26.40 26.40" fill="#757575" xmlns="http://www.w3.org/2000/svg" stroke="#757575" stroke-width="0.5"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22.9504 13.051C22.9832 12.7051 23 12.3545 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C12.3545 23 12.7051 22.9832 13.051 22.9504C12.4841 22.3838 12.014 21.7204 11.6675 20.9871C6.85477 20.8122 3.00683 16.8555 3.00683 12C3.00683 7.03321 7.03321 3.00683 12 3.00683C16.8555 3.00683 20.8122 6.85477 20.9871 11.6675C21.7204 12.014 22.3838 12.4841 22.9504 13.051Z" fill="#757575"></path> <path d="M13.8426 12.3677L13 11.8812V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44771 11 6V12.4667C11 12.4667 11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346L12.3766 13.8307C12.7902 13.2737 13.2847 12.7802 13.8426 12.3677Z" fill="#757575"></path> <path d="M16 17C15.4477 17 15 17.4477 15 18C15 18.5523 15.4477 19 16 19H20C20.5523 19 21 18.5523 21 18C21 17.4477 20.5523 17 20 17H16Z" fill="#757575"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M24 18C24 21.3137 21.3137 24 18 24C14.6863 24 12 21.3137 12 18C12 14.6863 14.6863 12 18 12C21.3137 12 24 14.6863 24 18ZM13.9819 18C13.9819 20.2191 15.7809 22.0181 18 22.0181C20.2191 22.0181 22.0181 20.2191 22.0181 18C22.0181 15.7809 20.2191 13.9819 18 13.9819C15.7809 13.9819 13.9819 15.7809 13.9819 18Z" fill="#757575"></path> </g></svg>
                            Remaining hours :&nbsp;<span *ngIf="a_details.remainingHours!==null&&a_details.remainingHours!==undefined" [ngStyle]="{'color':a_details.remainingHours>0?'darkgray':'red'}">{{a_details.remainingHours>0?a_details.remainingHours:0}}</span></span>

                    </div>
                    <span style="color:red" *ngIf="(fieldRequired&&!project_code)"   >Please select an action.</span>
                    <span style="color:red" *ngIf="(noact_msg==true && project_type=='core')">You do not have any action assigned, Please create atleast one action to submit timeline</span>
                </div>
                <div class="form-group">
                    <label>Work description<span class="text-danger">*</span></label>
                    <textarea #tlwdes="ngModel" type="text" name="work" class="form-control h-100px" [ngClass]="{'error-border': (fieldRequired&&!workdes)}" [(ngModel)]="workdes" placeholder="Define your achievement here."></textarea>
                    <span style="color:red" *ngIf="(fieldRequired&&!workdes)" >Work description is required.</span>
                </div>
                <!-- <div class="form-group timeline-date">
                    <label>Date<span class="text-danger">*</span></label>
                    <div class="input-group">
                        <input (dateChange)="orgValueChange($event)"  [value]="dateF.value"
                            [matDatepicker]="picker1" id="d-date" required (click)="picker1.open()"
                            [min]="disablePreviousDate"  [max]="todayDate" placeholder="Select Date" class="form-control"
                            name="date" >
                        <div class="input-group-text p-0">
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </div>
                    </div>

                </div> -->
                <div class="d-flex gap-1">
                    <div class="form-group w-100">
                        <label>Start time<span class="text-danger">*</span></label>
                        <ng-select #TLStrtTime="ngModel"  name="time" placeholder="Select Start Time" id="time-start" (click)="getDarTime()" [ngClass]="{'error-vd': (fieldRequired&&!starttime)}"
                            [(ngModel)]="starttime">
                            <ng-option [value]="item" *ngFor="let item of timedata; let i=index"
                                [disabled]="item!=lastEndtime && bol==false">
                                <a>{{item}}</a>
                            </ng-option>
                        </ng-select>
                        <span style="color:red" *ngIf="(fieldRequired&&!starttime)">Start time is required.</span>
                    </div>
                    <div class="form-group w-100">
                        <label>End time<span class="text-danger">*</span></label>
                        <ng-select name="endtim" #end="ngModel" placeholder="Select End Time" id="time-end" [ngClass]="{'error-vd': (fieldRequired&&!endtime)}"
                        [ngClass]="{'error-vd': (endtime < starttime)}"
                            (click)="getDarTime()" [(ngModel)]="endtime">
                            <ng-option [value]="item" *ngFor="let item of timedata; let i=index"
                                [disabled]="item<=lastEndtime">
                                <a>{{item}}</a>
                            </ng-option>
                        </ng-select>
                        <span style="color:red" *ngIf="(fieldRequired&&!endtime)"  >End time is required.</span>
                        <span style="color:red" id="err1" *ngIf="(endtime < starttime)">End time cannot be less than start
                            time!!</span>
                    </div>
                </div>
                <ng-container  *ngIf="project_type==='core'&&project_code&&bothActTlSubm">

                    <div class="form-group mt-3">
                        <label>Attachments</label><span *ngIf="ProState" style="color:red">*</span>
                        <div class="input-group mb-3" #uploadFile  [ngClass]="{'error-border': (ProState&&fieldRequired&&!selectedFile)}" >
                            <div class="input-group-prepend">
                                <span class="input-group-text">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-upload" viewBox="0 0 16 16">
                                        <path
                                            d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                                        <path
                                            d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
                                    </svg>
                                </span>
                            </div>
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="uploadFile" (change)="onFileChange($event)" />
                                <label class="custom-file-label" id="_upload" for="uploadFile">
                                    <ng-container *ngIf="_inputAttachments==='';else fileprovided">
                                        Select a file
                                    </ng-container>
                                    <ng-template #fileprovided>
                                        {{_inputAttachments}}
                                    </ng-template>
                                </label>
                            </div>
                        </div>

                        <span class="text-info"> *Accept only pdf files</span><br/>
                        <span style="color:red" *ngIf="(ProState&&fieldRequired&&!selectedFile)">please provide file attachment.</span>

                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlFile1">Remarks<span class="text-danger">*</span> </label>
                        <textarea #TLremarksf="ngModel"  class="form-control" [ngClass]="{'error-border': (fieldRequired&&!_remarks)}" aria-label="With textarea" placeholder="Define your exact reason here."
                        [(ngModel)]="_remarks" style="margin-top: 0px; margin-bottom: 0px; height: 160px;"></textarea>
                         <span style="color:red" *ngIf="(fieldRequired&&!_remarks)" >remarks required.</span>
                    </div>
                 </ng-container>

                 <ng-container *ngIf="project_type==='core'&&project_code">
                    <!-- *ngIf="projectActionInfo&&projectActionInfo[currentActionView]" -->
                    <div class="d-flex align-items-center" >
                        <!-- *ngIf="['Delay','InProcess'].includes(projectActionInfo[currentActionView].Status)" -->
                            <input type="checkbox" id="actioncompl" class="mr-2" [(ngModel)]="bothActTlSubm" style="accent-color: green; width:15px; height:15px;"/>
                            <label for="actioncompl" class="mb-0 font-weight-normal"> Complete this action </label>
                    </div>
                  </ng-container>
                  <div class="timeline-add">

                </div>
            </div>
        </div>
    </div>


    <div class="kt-portlet__foot py-3 d-flex justify-content-end">
        <!-- <button type="submit" class="btn btn-sm btn-info" (click)="submitDar()" *ngIf="showAction==true"
            [disabled]="!master_code || !project_code || !workdes || !starttime || !endtime || endtime < starttime||(bothActTlSubm&&!_remarks)">
            Submit</button>
        <button type="submit" class="btn btn-info btn-sm" (click)="submitDar()" *ngIf="showAction==false"
            [disabled]=" !master_code ||  !workdes  || !starttime || !endtime || endtime < starttime">
            Submit</button> -->
<!--
            <button type="submit" class="btn btn-sm btn-info" (click)="onTLSubmitBtnClick()">Submit</button>

        <button type="reset" class="btn btn-secondary btn-sm ml-2" (click)="clear()">Reset</button> -->
        <button type="submit" class="btn btn-secondary btn-sm ml-2" (click)="closedarBar()">Cancel</button>
        <button type="reset" class="btn btn-secondary btn-sm mr-2 ml-2 curser-pointer" (click)="clear()">Reset</button>
        <button type="submit" class="btn btn-info btn-sm btn-fw curser-pointer ml-0" [disabled]="submittingDar" (click)="onTLSubmitBtnClick()">Add timeline</button>
    </div>


    </div>
</div>


<div id="rightbar-overlay" (click)="closeInfo()"></div>
</ng-container></ng-container>


<ng-template #pleasewait>

  <div class="smart-glass">
      <h1></h1>
      <div class="logo">
        <div class="circle">
          <div class="circle">
              <div class="circle">
              </div>
          </div>
      </div>
      <div class="hold-loader">
        <div class="loader-img">
          <img alt="Logo" src="assets/icons/Artboard Copy.png" id="creative" style="width: 100%;">
        </div>
       </div>
      </div>
    </div>


</ng-template>
